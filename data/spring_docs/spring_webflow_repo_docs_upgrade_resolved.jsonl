{"id": "sha256:b5e15ce796a67575210f16c94b318d42bae7a5d2271d32cf6dc22907afe58aae", "content": "[[_actions]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "actions", "heading_level": 1, "file_order": 0, "section_index": 0, "content_hash": "b5e15ce796a67575210f16c94b318d42bae7a5d2271d32cf6dc22907afe58aae", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:c957df49ece6a35ca1ce6a6152de51fc2bdd4ff30cc045740c3150399c1a9f1a", "content": "This chapter shows you how to use the `action-state` element to control the invocation of an action at a point within a flow.\nIt also shows how to use the `decision-state` element to make a flow routing decision.\nFinally, several examples of invoking actions from the various points possible within a flow are discussed.\n\n[[_action_state]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "Executing Actions", "heading_level": 2, "file_order": 0, "section_index": 1, "content_hash": "c957df49ece6a35ca1ce6a6152de51fc2bdd4ff30cc045740c3150399c1a9f1a", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:675c17f3c0d11d325fe01c892d8aa24190e45a05d681ebce9cf618694691b85d", "content": "You can use the `action-state` element when you wish to invoke an action and then transition to another state based on the action's outcome, as follows:\n\n====\n[source,xml]\n----\n<action-state id=\"moreAnswersNeeded\">\n\t<evaluate expression=\"interview.moreAnswersNeeded()\" />\n\t<transition on=\"yes\" to=\"answerQuestions\" />\n\t<transition on=\"no\" to=\"finish\" />\n</action-state>\n----\n====\n\nThe following example shows an interview flow that uses the preceding `action-state` to determine if more answers are needed to complete the interview:\n\n====\n[source,xml]\n----\n<flow xmlns=\"http://www.springframework.org/schema/webflow\"\n xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xsi:schemaLocation=\"http://www.springframework.org/schema/webflow\n https://www.springframework.org/schema/webflow/spring-webflow.xsd\">\n\n\t<on-start>\n <evaluate expression=\"interviewFactory.createInterview()\" result=\"flowScope.interview\" />\n\t</on-start>\n\n\t<view-state id=\"answerQuestions\" model=\"questionSet\">\n <on-entry>\n <evaluate expression=\"interview.getNextQuestionSet()\" result=\"viewScope.questionSet\" />\n </on-entry>\n <transition on=\"submitAnswers\" to=\"moreAnswersNeeded\">\n <evaluate expression=\"interview.recordAnswers(questionSet)\" />\n </transition>\n\t</view-state>\n\n\t<action-state id=\"moreAnswersNeeded\">\n <evaluate expression=\"interview.moreAnswersNeeded()\" />\n <transition on=\"yes\" to=\"answerQuestions\" />\n <transition on=\"no\" to=\"finish\" />\n\t</action-state>\n\n\t<end-state id=\"finish\" />\n\n</flow>\n----\n====\n\nAfter the invocation of each action, the `action-state` checks the result to see if it matches a declared transition to another state.\nThat means that, if more than one action is configured, they are invoked in an ordered chain until one returns a single result event that matches a state transition out of the action-state while the rest are ignored.\nThis is a form of the \"`Chain of Responsibility`\" (CoR) pattern.\n\nThe result of an action's invocation is typically the criteria for a transition out of this state.\nYou can also test additional information in the current `RequestContext` as part of custom transitional criteria that allow for sophisticated transition expressions that reason on contextual state.\n\nNote also that an `action-state` (as any other state) can have more on-entry actions that are invoked as a list from start to end.\n\n[[_decision_state]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "Defining Action States", "heading_level": 3, "file_order": 0, "section_index": 2, "content_hash": "675c17f3c0d11d325fe01c892d8aa24190e45a05d681ebce9cf618694691b85d", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:19bdf29b824add0ef35a6ea07bb993ac590ad20d8a72ae53d4edf60e54e128d3", "content": "You can use the `decision-state` element as an alternative to the `action-state` element to make a routing decision by using a convenient if-else syntax.\nThe following example shows the `moreAnswersNeeded` state (from the example in the preceding section), now implemented as a decision state instead of an action-state:\n\n====\n[source,xml]\n----\n<decision-state id=\"moreAnswersNeeded\">\n\t<if test=\"interview.moreAnswersNeeded()\" then=\"answerQuestions\" else=\"finish\" />\n</decision-state>\n----\n====\n\n[[_action_outcome_events]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "Defining Decision States", "heading_level": 3, "file_order": 0, "section_index": 3, "content_hash": "19bdf29b824add0ef35a6ea07bb993ac590ad20d8a72ae53d4edf60e54e128d3", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:b3ce24f3fc3995b6ee41d00d1d6da008fda544903f9a25a2381860bf422e2616", "content": "Actions often invoke methods on plain Java objects.\nWhen called from `action-state` and `decision-state` elements, these method return values that can be used to drive state transitions.\nSince transitions are triggered by events, a method return value must first be mapped to an `Event` object.\nThe following table describes how common return value types are mapped to `Event` objects:\n\n.Action method return value to event id mappings\n[cols=\"1,1\", options=\"header\"]\n|===\n| Method return type\n| Mapped Event identifier expression\n\n|`java.lang.String`\n|The `String` value\n\n|`java.lang.Boolean`\n|yes (for `true`), no (for `false`)\n\n|`java.lang.Enum`\n|the `Enum` name\n\n|Any other type\n|success\n|===\n\nThe following example invokes a method that returns a boolean value:\n\n====\n[source,xml]\n----\n<action-state id=\"moreAnswersNeeded\">\n\t<evaluate expression=\"interview.moreAnswersNeeded()\" />\n\t<transition on=\"yes\" to=\"answerQuestions\" />\n\t<transition on=\"no\" to=\"finish\" />\n</action-state>\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "Action Outcome Event Mappings", "heading_level": 3, "file_order": 0, "section_index": 4, "content_hash": "b3ce24f3fc3995b6ee41d00d1d6da008fda544903f9a25a2381860bf422e2616", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:4a9ac82645beb005c91aa096ce7896f4d350e92783a4b70960f81a547f35d391", "content": "While writing action code as POJO logic is the most common, there are several other action implementation options.\nSometimes, you need to write action code that needs access to the flow context.\nYou can always invoke a POJO and pass it the `flowRequestContext` as an EL variable.\nAlternatively, you can implement the `Action` interface or extend from the `MultiAction` base class.\nThese options provide stronger type safety when you have a natural coupling between your action code and Spring Web Flow APIs.\nThe following sections show examples of each of these approaches.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "Action Implementations", "heading_level": 3, "file_order": 0, "section_index": 5, "content_hash": "4a9ac82645beb005c91aa096ce7896f4d350e92783a4b70960f81a547f35d391", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:cf1a23e8d0965be5fd9a56c7aac41a8f36e274d5d6e4cb9d044443ff865889c8", "content": "The following example shows how to invoke a POJO action:\n\n====\n[source,xml]\n----\n<evaluate expression=\"pojoAction.method(flowRequestContext)\" />\n----\n\n[source,java]\n----\npublic class PojoAction {\n\tpublic String method(RequestContext context) {\n ...\n\t}\n}\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "Invoking a POJO action", "heading_level": 4, "file_order": 0, "section_index": 6, "content_hash": "cf1a23e8d0965be5fd9a56c7aac41a8f36e274d5d6e4cb9d044443ff865889c8", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:7e1fbc61a26f150e4bb474c7b6bddf363ec7ba73f4ac3f99a4644c93ad0bd613", "content": "The following example shows how to invoke a custom action implementation:\n\n====\n[source,xml]\n----\n<evaluate expression=\"customAction\" />\n----\n\n[source,java]\n----\npublic class CustomAction implements Action {\n\tpublic Event execute(RequestContext context) {\n ...\n\t}\n}\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "Invoking a Custom Action Implementation", "heading_level": 4, "file_order": 0, "section_index": 7, "content_hash": "7e1fbc61a26f150e4bb474c7b6bddf363ec7ba73f4ac3f99a4644c93ad0bd613", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:85ae5b901dd94ee0699f9ac50d1529a1059347b366f50072dd26cc402df2a916", "content": "The following example shows how to invoke a `MultiAction` implementation:\n\n====\n[source,xml]\n----\n<evaluate expression=\"multiAction.actionMethod1\" />\n----\n\n[source,java]\n----\npublic class CustomMultiAction extends MultiAction {\n\tpublic Event actionMethod1(RequestContext context) {\n ...\n\t}\n\n\tpublic Event actionMethod2(RequestContext context) {\n ...\n\t}\n\n\t...\n}\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "Invoking a `MultiAction` Implementation", "heading_level": 4, "file_order": 0, "section_index": 8, "content_hash": "85ae5b901dd94ee0699f9ac50d1529a1059347b366f50072dd26cc402df2a916", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:3fc36102b41456dc33deb7f5763121fc5a075cb099f796d0502f6df214ab4112", "content": "Actions often invoke services that encapsulate complex business logic.\nThese services can throw business exceptions that the action code should handle.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "Action Exceptions", "heading_level": 3, "file_order": 0, "section_index": 9, "content_hash": "3fc36102b41456dc33deb7f5763121fc5a075cb099f796d0502f6df214ab4112", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:ad39eec0dde06ab048c596b0fc8c97117a719b25cae65ff547298b27a0f25c76", "content": "The following example invokes an action that catches a business exception, adds an error message to the context, and returns a result event identifier.\nThe result is treated as a flow event to which the calling flow can then respond.\n\n====\n[source,xml]\n----\n<evaluate expression=\"bookingAction.makeBooking(booking, flowRequestContext)\" />\n----\n\n[source,java]\n----\npublic class BookingAction {\n\tpublic String makeBooking(Booking booking, RequestContext context) {\n try {\n BookingConfirmation confirmation = bookingService.make(booking);\n context.getFlowScope().put(\"confirmation\", confirmation);\n return \"success\";\n } catch (RoomNotAvailableException e) {\n context.addMessage(new MessageBuilder().error().\n .defaultText(\"No room is available at this hotel\").build());\n return \"error\";\n }\n\t}\n}\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "Handling a Business Exception with a POJO Action", "heading_level": 4, "file_order": 0, "section_index": 10, "content_hash": "ad39eec0dde06ab048c596b0fc8c97117a719b25cae65ff547298b27a0f25c76", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:18d96bc81ced5e31ce5f6b3fb2d24157025ec4cad0b546b8f6d807f43bb4a5b5", "content": "The following example is functionally equivalent to the example in the previous section but is implemented as a `MultiAction` instead of a POJO action.\nThe `MultiAction` requires its action methods to be of the signature `Event ${methodName}(RequestContext)`, providing stronger type safety, while a POJO action allows for more freedom.\n\n====\n[source,xml]\n----\n<evaluate expression=\"bookingAction.makeBooking\" />\n----\n\n[source,java]\n----\npublic class BookingAction extends MultiAction {\npublic Event makeBooking(RequestContext context) {\n try {\n Booking booking = (Booking) context.getFlowScope().get(\"booking\");\n BookingConfirmation confirmation = bookingService.make(booking);\n context.getFlowScope().put(\"confirmation\", confirmation);\n return success();\n } catch (RoomNotAvailableException e) {\n context.getMessageContext().addMessage(new MessageBuilder().error().\n .defaultText(\"No room is available at this hotel\").build());\n return error();\n }\n}\n}\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "Handling a Business Exception with a `MultiAction`", "heading_level": 4, "file_order": 0, "section_index": 11, "content_hash": "18d96bc81ced5e31ce5f6b3fb2d24157025ec4cad0b546b8f6d807f43bb4a5b5", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:89b51b1af05a0286baecde9a77ca53eeacf70cfabeb752f09908f8df9fe3c6dc", "content": "In general, you should catch exceptions in actions and return result events that drive standard transitions.\nYou can also add an `exception-handler` sub-element to any state type with a `bean` attribute that references a bean of type `FlowExecutionExceptionHandler`.\nThis is an advanced option that, if used incorrectly, can leave the flow execution in an invalid state.\nConsider the built-in `TransitionExecutingFlowExecutionExceptionHandler` as an example of a correct implementation.\n\n[[_action_examples]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "Using an `exception-handler` Element", "heading_level": 4, "file_order": 0, "section_index": 12, "content_hash": "89b51b1af05a0286baecde9a77ca53eeacf70cfabeb752f09908f8df9fe3c6dc", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:a366c4ca760da8e91cbe6fbfee73ac49b34893282ac495c65d29507bcd311ada", "content": "The remainder of this chapter shows other ways to use actions.\n\n[[_action_on_start]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "Other Action Examples", "heading_level": 3, "file_order": 0, "section_index": 13, "content_hash": "a366c4ca760da8e91cbe6fbfee73ac49b34893282ac495c65d29507bcd311ada", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:b3dd6e4ebbc027ab99aa122adf08ff08c4e83fc994abb7134344f10094d3ff3f", "content": "The following example shows an action that creates a new `Booking` object by invoking a method on a service:\n\n====\n[source,xml]\n----\n<flow xmlns=\"http://www.springframework.org/schema/webflow\"\n xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xsi:schemaLocation=\"http://www.springframework.org/schema/webflow\n https://www.springframework.org/schema/webflow/spring-webflow.xsd\">\n\n\t<input name=\"hotelId\" />\n\n\t<on-start>\n <evaluate expression=\"bookingService.createBooking(hotelId, currentUser.name)\"\n result=\"flowScope.booking\" />\n\t</on-start>\n\n</flow>\n----\n====\n\n[[_action_on_state_entry]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "The `on-start` Element", "heading_level": 4, "file_order": 0, "section_index": 14, "content_hash": "b3dd6e4ebbc027ab99aa122adf08ff08c4e83fc994abb7134344f10094d3ff3f", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:ded9cd6e5f67b3393e8ab5ed40f2d8256506cda8ad1be4c4b9f7ca007819aaf1", "content": "The following example shows a state entry action that sets the special `fragments` variable that causes the `view-state` to render a partial fragment of its view:\n\n====\n[source,xml]\n----\n<view-state id=\"changeSearchCriteria\" view=\"enterSearchCriteria.xhtml\" popup=\"true\">\n\t<on-entry>\n <render fragments=\"hotelSearchForm\" />\n\t</on-entry>\n</view-state>\n----\n====\n\n[[_action_on_state_exit]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "The `on-entry` Element", "heading_level": 4, "file_order": 0, "section_index": 15, "content_hash": "ded9cd6e5f67b3393e8ab5ed40f2d8256506cda8ad1be4c4b9f7ca007819aaf1", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:c05381c44cfababb8e3866cd7f8a8c34aca2021ca15994ddc189a05963eb2ca8", "content": "The following example shows a state exit action that releases a lock on a record being edited:\n\n====\n[source,xml]\n----\n<view-state id=\"editOrder\">\n\t<on-entry>\n <evaluate expression=\"orderService.selectForUpdate(orderId, currentUser)\"\n result=\"viewScope.order\" />\n\t</on-entry>\n\t<transition on=\"save\" to=\"finish\">\n <evaluate expression=\"orderService.update(order, currentUser)\" />\n\t</transition>\n\t<on-exit>\n <evaluate expression=\"orderService.releaseLock(order, currentUser)\" />\n\t</on-exit>\n</view-state>\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "The `on-exit` Element", "heading_level": 4, "file_order": 0, "section_index": 16, "content_hash": "c05381c44cfababb8e3866cd7f8a8c34aca2021ca15994ddc189a05963eb2ca8", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:66a609337f2a9342f80d120758a3bcbc23df0ce5303d15f9572f2b77d3fede71", "content": "The following example shows object locking behavior that is equivalent to the example in the preceding section but uses flow start and end actions:\n\n====\n[source,xml]\n----\n<flow xmlns=\"http://www.springframework.org/schema/webflow\"\n xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xsi:schemaLocation=\"http://www.springframework.org/schema/webflow\n https://www.springframework.org/schema/webflow/spring-webflow.xsd\">\n\n\t<input name=\"orderId\" />\n\n\t<on-start>\n <evaluate expression=\"orderService.selectForUpdate(orderId, currentUser)\"\n result=\"flowScope.order\" />\n\t</on-start>\n\n\t<view-state id=\"editOrder\">\n <transition on=\"save\" to=\"finish\">\n <evaluate expression=\"orderService.update(order, currentUser)\" />\n </transition>\n\t</view-state>\n\n\t<on-end>\n <evaluate expression=\"orderService.releaseLock(order, currentUser)\" />\n\t</on-end>\n\n</flow>\n----\n====\n\n[[_action_on_render]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "The `on-end` Element", "heading_level": 4, "file_order": 0, "section_index": 17, "content_hash": "66a609337f2a9342f80d120758a3bcbc23df0ce5303d15f9572f2b77d3fede71", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:f325f2d12fce68b7f9fb859496b6ee8ece1834a454ea1c9cc4bc724f5fc7e860", "content": "The following example shows a render action that loads a list of hotels to display before the view is rendered:\n\n====\n[source,xml]\n----\n<view-state id=\"reviewHotels\">\n\t<on-render>\n <evaluate expression=\"bookingService.findHotels(searchCriteria)\"\n result=\"viewScope.hotels\" result-type=\"dataModel\" />\n\t</on-render>\n\t<transition on=\"select\" to=\"reviewHotel\">\n <set name=\"flowScope.hotel\" value=\"hotels.selectedRow\" />\n\t</transition>\n</view-state>\n----\n====\n\n[[_action_on_transition]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "The `on-render` Element", "heading_level": 4, "file_order": 0, "section_index": 18, "content_hash": "f325f2d12fce68b7f9fb859496b6ee8ece1834a454ea1c9cc4bc724f5fc7e860", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:cb98581804cbd05d45484412b7f3c43bc4c43a8cce859002ad5dee082570ee91", "content": "The following example shows a transition action that adds a sub-flow outcome event attribute to a collection:\n\n====\n[source,xml]\n----\n<subflow-state id=\"addGuest\" subflow=\"createGuest\">\n\t<transition on=\"guestCreated\" to=\"reviewBooking\">\n <evaluate expression=\"booking.guestList.add(currentEvent.attributes.newGuest)\" />\n\t</transition>\n</subfow-state>\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "The `on-transition` Element", "heading_level": 4, "file_order": 0, "section_index": 19, "content_hash": "cb98581804cbd05d45484412b7f3c43bc4c43a8cce859002ad5dee082570ee91", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:336734231d1d5e979010561168a70c2464526d2515a408c89b0118ae3697d8c9", "content": "The following example shows how to execute a chain of actions in an `action-state`.\nThe name of each action becomes a qualifier for the action's result event.\n\n====\n[source,xml]\n----\n<action-state id=\"doTwoThings\">\n\t<evaluate expression=\"service.thingOne()\">\n <attribute name=\"name\" value=\"thingOne\" />\n\t</evaluate>\n\t<evaluate expression=\"service.thingTwo()\">\n <attribute name=\"name\" value=\"thingTwo\" />\n\t</evaluate>\n\t<transition on=\"thingTwo.success\" to=\"showResults\" />\n</action-state>\n----\n====\n\nIn this example, the flow transitions to `showResults` when `thingTwo` completes successfully.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "Named Actions", "heading_level": 4, "file_order": 0, "section_index": 20, "content_hash": "336734231d1d5e979010561168a70c2464526d2515a408c89b0118ae3697d8c9", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:36b071a5188522fb390c016cc7cb5ec04d570d4398c9e1f40e60994e4e1ad168", "content": "Sometimes, an action needs to stream a custom response back to the client.\nAn example might be a flow that renders a PDF document when handling a print event.\nThis can be achieved by having the action stream the content and then record a status of `Response Complete` status on the `ExternalContext`.\nThe `responseComplete` flag tells the pausing `view-state` not to render the response because another object has taken care of it.\nThe following action shows such an action:\n\n====\n[source,xml]\n----\n\n<view-state id=\"reviewItinerary\">\n\t<transition on=\"print\">\n <evaluate expression=\"printBoardingPassAction\" />\n\t</transition>\n</view-state>\n----\n\n[source,java]\n----\npublic class PrintBoardingPassAction extends AbstractAction {\n\tpublic Event doExecute(RequestContext context) {\n // stream PDF content here...\n // - Access HttpServletResponse by calling context.getExternalContext().getNativeResponse();\n // - Mark response complete by calling context.getExternalContext().recordResponseComplete();\n return success();\n\t}\n}\n----\n====\n\nIn this example, when the print event is raised, the flow calls the `printBoardingPassAction` method.\nThe action renders the PDF and then marks the response as complete.\n\n[[_file_upload]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "Streaming Actions", "heading_level": 4, "file_order": 0, "section_index": 21, "content_hash": "36b071a5188522fb390c016cc7cb5ec04d570d4398c9e1f40e60994e4e1ad168", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:f88f2f9013cdd02586d11e880f9ea8d8a2c0aeb0e695bbf21d450a70651b1113", "content": "Another common task is to use Web Flow to handle multipart file uploads in combination with Spring MVC's `MultipartResolver`.\nOnce the resolver is set up correctly, https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-multipart[as described here], and the submitting HTML form is configured with `enctype=\"multipart/form-data\"`, you can handle the file upload in a transition action.\n\nNOTE: The file upload example shown in the next listing is not relevant when you use Web Flow with JSF.\nSee <<_spring_faces_file_upload>> for details of how to upload files using JSF.\n\nConsider the form in the following listing:\n\n====\n[source,xml]\n----\n<form:form modelAttribute=\"fileUploadHandler\" enctype=\"multipart/form-data\">\n\tSelect file: <input type=\"file\" name=\"file\"/>\n\t<input type=\"submit\" name=\"_eventId_upload\" value=\"Upload\" />\n</form:form>\n----\n====\n\nThen consider the backing object for handling the upload:\n\n====\n[source,java]\n----\npackage org.springframework.webflow.samples.booking;\n\nimport org.springframework.web.multipart.MultipartFile;\n\npublic class FileUploadHandler {\n\n\tprivate transient MultipartFile file;\n\n\tpublic void processFile() {\n //Do something with the MultipartFile here\n\t}\n\n\tpublic void setFile(MultipartFile file) {\n this.file = file;\n\t}\n}\n----\n====\n\nYou can process the upload by using a transition action, as follows:\n\n====\n[source,xml]\n----\n<view-state id=\"uploadFile\" model=\"uploadFileHandler\">\n\t<var name=\"fileUploadHandler\" class=\"org.springframework.webflow.samples.booking.FileUploadHandler\" />\n\t<transition on=\"upload\" to=\"finish\" >\n <evaluate expression=\"fileUploadHandler.processFile()\"/>\n\t</transition>\n\t<transition on=\"cancel\" to=\"finish\" bind=\"false\"/>\n</view-state>\n----\n====\n\nThe `MultipartFile` is bound to the `FileUploadHandler` bean as part of the normal form-binding process so that it is available to process during the execution of the transition action.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/actions.adoc", "title": "actions", "heading": "Handling File Uploads", "heading_level": 4, "file_order": 0, "section_index": 22, "content_hash": "f88f2f9013cdd02586d11e880f9ea8d8a2c0aeb0e695bbf21d450a70651b1113", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/actions.adoc"}}
{"id": "sha256:4157cdcc399bc41e0fcbc4599143c2b09d71de078ad01d9c91274fd3dc59def0", "content": "This chapter begins the Users Section.\nIt shows how to implement flows by using the flow definition language.\nBy the end of this chapter, you should have a good understanding of language constructs and be capable of authoring a flow definition.\n\n[[_flow_overview]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Defining Flows", "heading_level": 2, "file_order": 1, "section_index": 0, "content_hash": "4157cdcc399bc41e0fcbc4599143c2b09d71de078ad01d9c91274fd3dc59def0", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:630f2109b06fff903b7b685e0355c028fe0aaa7cdcf73416cf2ceeaf4a33ba77", "content": "A flow encapsulates a reusable sequence of steps that you can use in different contexts.\nThe following http://www.jjg.net/ia/visvocab/[Garrett Information Architecture] diagram shows a reference to a flow that encapsulates the steps of a hotel booking process:\n\nimage::images/hotels-site.png[]\n\n[[_flow_makeup]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "What Is a Flow?", "heading_level": 2, "file_order": 1, "section_index": 1, "content_hash": "630f2109b06fff903b7b685e0355c028fe0aaa7cdcf73416cf2ceeaf4a33ba77", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:03363a2cd3bbc89978e047bb8b5c722b42d641a822c88c42c356a94a6d3dde31", "content": "In Spring Web Flow, a flow consists of a series of steps called \"`states`\".\nEntering a state typically results in a view being displayed to the user.\nOn that view, user events occur and are handled by the state.\nThese events can trigger transitions to other states that result in view navigations.\n\nThe following image shows the structure of the book hotel flow referenced in the previous diagram:\n\nimage::images/hotels-site-bookhotel-flow.png[]\n\n[[_flow_authoring]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "What Is the Makeup of a Typical Flow?", "heading_level": 2, "file_order": 1, "section_index": 2, "content_hash": "03363a2cd3bbc89978e047bb8b5c722b42d641a822c88c42c356a94a6d3dde31", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:1a82c0041b71a56c7a8346516e23043d330d50a23c54eb2b7d1fa9ccec10b409", "content": "Flows are authored by using a simple XML-based flow definition language.\nThe next steps of this guide walk you through the elements of this language.\n\n[[_essential_flow_elements]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "How Are Flows Authored?", "heading_level": 2, "file_order": 1, "section_index": 3, "content_hash": "1a82c0041b71a56c7a8346516e23043d330d50a23c54eb2b7d1fa9ccec10b409", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:64f1902a84bd2b676bc5251226ba81ecd88c34f63bbedd3267432264d17af437", "content": "There are four essential flow elements:\n\n* <<_flow_element>>\n* <<_view_state_element>>\n* <<_transition_element>>\n* <<_end_state_element>>\n\n[[_flow_element]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Essential Language Elements", "heading_level": 2, "file_order": 1, "section_index": 4, "content_hash": "64f1902a84bd2b676bc5251226ba81ecd88c34f63bbedd3267432264d17af437", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:d3d446e5193347a308f02bdae282fdad52b36529810b894e98b9b94c2f18a431", "content": "Every flow begins with the following root element:\n\n====\n[source,xml]\n----\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<flow xmlns=\"http://www.springframework.org/schema/webflow\"\n xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xsi:schemaLocation=\"http://www.springframework.org/schema/webflow\n https://www.springframework.org/schema/webflow/spring-webflow.xsd\">\n\n</flow>\n----\n====\n\nAll states of the flow are defined within this element.\nThe first state defined becomes the flow's starting point.\n\n[[_view_state_element]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "The `flow` Element", "heading_level": 3, "file_order": 1, "section_index": 5, "content_hash": "d3d446e5193347a308f02bdae282fdad52b36529810b894e98b9b94c2f18a431", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:30d4c0ebe4117d7538f4274d62b49787ec975aa82110d1fc3c1908be4aaa4d59", "content": "The `view-state` element defines a step of the flow that renders a view:\n\n====\n[source,xml]\n----\n\n<view-state id=\"enterBookingDetails\" />\n----\n====\n\nBy convention, a view-state maps its id to a view template in the directory where the flow is located.\nFor example, the preceding state might render `/WEB-INF/hotels/booking/enterBookingDetails.xhtml` if the flow itself was located in the `/WEB-INF/hotels/booking` directory.\n\n[[_transition_element]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "The `view-state` Element", "heading_level": 3, "file_order": 1, "section_index": 6, "content_hash": "30d4c0ebe4117d7538f4274d62b49787ec975aa82110d1fc3c1908be4aaa4d59", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:3f820c1f1d3075c89acae9610eb5078b9607b0d0a773197ed51dbbf49d02383d", "content": "The `transition` element handles events that occur within a state:\n\n====\n[source,xml]\n----\n\n<view-state id=\"enterBookingDetails\">\n <transition on=\"submit\" to=\"reviewBooking\" />\n</view-state>\n----\n====\n\nThese transitions drive view navigations.\n\n[[_end_state_element]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "The `transition` Element", "heading_level": 3, "file_order": 1, "section_index": 7, "content_hash": "3f820c1f1d3075c89acae9610eb5078b9607b0d0a773197ed51dbbf49d02383d", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:ac9ecf0e7bfcc4194246b7203f196f170f8e595ceda77297cc697ffe15300e5d", "content": "The `end-state` element defines a flow outcome:\n\n====\n[source,xml]\n----\n\n<end-state id=\"bookingCancelled\" />\n----\n====\n\nWhen a flow transitions to a end-state, it ends and the outcome is returned.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "The `end-state` Element", "heading_level": 3, "file_order": 1, "section_index": 8, "content_hash": "ac9ecf0e7bfcc4194246b7203f196f170f8e595ceda77297cc697ffe15300e5d", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:dc44a732fd206490ef623ecd06d72bef5fca387ebb36eec50470c573bed65207", "content": "With the three elements, `view-state`, `transition`, and `end-state`, you can quickly express your view navigation logic.\nTeams often do this before adding flow behaviors so that they can focus on developing the user interface of the application with end users first.\nThe following sample flow implements its view navigation logic by using these elements:\n\n====\n[source,xml]\n----\n\n<flow xmlns=\"http://www.springframework.org/schema/webflow\"\n xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xsi:schemaLocation=\"http://www.springframework.org/schema/webflow\n https://www.springframework.org/schema/webflow/spring-webflow.xsd\">\n\n <view-state id=\"enterBookingDetails\">\n <transition on=\"submit\" to=\"reviewBooking\" />\n </view-state>\n\n <view-state id=\"reviewBooking\">\n <transition on=\"confirm\" to=\"bookingConfirmed\" />\n <transition on=\"revise\" to=\"enterBookingDetails\" />\n <transition on=\"cancel\" to=\"bookingCancelled\" />\n </view-state>\n\n <end-state id=\"bookingConfirmed\" />\n\n <end-state id=\"bookingCancelled\" />\n\n</flow>\n----\n====\n\n[[_flow_actions]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Checkpoint: Essential language elements", "heading_level": 3, "file_order": 1, "section_index": 9, "content_hash": "dc44a732fd206490ef623ecd06d72bef5fca387ebb36eec50470c573bed65207", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:4e09b7e7be892a2e4fce4e9ea0ec7dc5af7959b9d28d62574128036f4488896c", "content": "Most flows need to express more than view navigation logic.\nTypically, they also need to invoke business services of the application or other actions.\n\nWithin a flow, there are several points where you can execute actions:\n\n* On flow start\n* On state entry\n* On view render\n* On transition execution\n* On state exit\n* On flow end\n\nActions are defined by using a concise expression language.\nBy default, Spring Web Flow uses the Unified EL.\nThe next few sections cover the essential language elements for defining actions.\n\n[[_evaluate_element]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Actions", "heading_level": 2, "file_order": 1, "section_index": 10, "content_hash": "4e09b7e7be892a2e4fce4e9ea0ec7dc5af7959b9d28d62574128036f4488896c", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:94afb7ed35565427d91012742d63a184279f84656bad7eba9039f13774c1f2c5", "content": "The most often used action element is the `evaluate` element.\nThe `evaluate` element evaluates an expression at a point within your flow.\nWith this single element, you can invoke methods on Spring beans or any other flow variable.\nThe following listing shows an example:\n\n====\n[source,xml]\n----\n\n<evaluate expression=\"entityManager.persist(booking)\" />\n----\n====\n\n[[_evaluate_element_result]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "The `evaluate` Element", "heading_level": 3, "file_order": 1, "section_index": 11, "content_hash": "94afb7ed35565427d91012742d63a184279f84656bad7eba9039f13774c1f2c5", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:62650f16ed2abb88e4543be8da3b49bd245645bdf5e9529a2ab016103dccdeb5", "content": "If the expression returns a value, that value can be saved in the flow's data model, called `flowScope`, as follows:\n\n====\n[source,xml]\n----\n<evaluate expression=\"bookingService.findHotels(searchCriteria)\" result=\"flowScope.hotels\" />\n----\n====\n\n[[_evaluate_element_result_type]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Assigning an `evaluate` Result", "heading_level": 4, "file_order": 1, "section_index": 12, "content_hash": "62650f16ed2abb88e4543be8da3b49bd245645bdf5e9529a2ab016103dccdeb5", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:27f900eb33fe2c0d7115ad5290fcc3ca86f942788e69a9b406e5d8d105dc0a75", "content": "If the expression returns a value that may need to be converted, you can specify the desired type by using the `result-type` attribute, as follows:\n\n====\n[source,xml]\n----\n\n<evaluate expression=\"bookingService.findHotels(searchCriteria)\" result=\"flowScope.hotels\"\n result-type=\"dataModel\"/>\n----\n====\n\n[[_checkpoint_actions]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Converting an `evaluate` Result", "heading_level": 4, "file_order": 1, "section_index": 13, "content_hash": "27f900eb33fe2c0d7115ad5290fcc3ca86f942788e69a9b406e5d8d105dc0a75", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:3b856170ac54656df7dc20bb895e06ac66701c7deda3490a75706efde2dca20a", "content": "You should review the sample booking flow with actions added:\n\n====\n[source,xml]\n----\n<flow xmlns=\"http://www.springframework.org/schema/webflow\"\n xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xsi:schemaLocation=\"http://www.springframework.org/schema/webflow\n https://www.springframework.org/schema/webflow/spring-webflow.xsd\">\n\n <input name=\"hotelId\" />\n\n <on-start>\n <evaluate expression=\"bookingService.createBooking(hotelId, currentUser.name)\"\n result=\"flowScope.booking\" />\n </on-start>\n\n <view-state id=\"enterBookingDetails\">\n <transition on=\"submit\" to=\"reviewBooking\" />\n </view-state>\n\n <view-state id=\"reviewBooking\">\n <transition on=\"confirm\" to=\"bookingConfirmed\" />\n <transition on=\"revise\" to=\"enterBookingDetails\" />\n <transition on=\"cancel\" to=\"bookingCancelled\" />\n </view-state>\n\n <end-state id=\"bookingConfirmed\" />\n\n <end-state id=\"bookingCancelled\" />\n\n</flow>\n----\n====\n\nThis flow now creates a `Booking` object in flow scope when it starts.\nThe ID of the hotel to book is obtained from a flow input attribute.\n\n[[_flow_inputoutput]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Checkpoint: Flow Actions", "heading_level": 3, "file_order": 1, "section_index": 14, "content_hash": "3b856170ac54656df7dc20bb895e06ac66701c7deda3490a75706efde2dca20a", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:d0e96711a074f76d1a57990b6c73a231d5e1f1db63cdae0b39ec7c00a2fa4767", "content": "Each flow has a well-defined input/output contract.\nFlows can be passed input attributes when they start and can return output attributes when they end.\nIn this respect, calling a flow is conceptually similar to calling a method with the following signature:\n\n====\n[source,java]\n----\nFlowOutcome flowId(Map<String, Object> inputAttributes);\n----\n====\n\nWhere a `FlowOutcome` has the following signature:\n\n====\n[source,java]\n----\npublic interface FlowOutcome {\n public String getName();\n public Map<String, Object> getOutputAttributes();\n}\n----\n====\n\n[[_input_element]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Input/Output Mapping", "heading_level": 2, "file_order": 1, "section_index": 15, "content_hash": "d0e96711a074f76d1a57990b6c73a231d5e1f1db63cdae0b39ec7c00a2fa4767", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:414d235aec793524013665cb058b8b29ba4d4b19eb0b1908aec4e7f7ef4dc3f2", "content": "The `input` element declares a flow input attribute, as follows:\n\n====\n[source,xml]\n----\n<input name=\"hotelId\" />\n----\n====\n\nInput values are saved in flow scope under the name of the attribute.\nFor example, the input in the preceding example is saved under a name of `hotelId`.\n\n[[_input_element_type]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "input", "heading_level": 3, "file_order": 1, "section_index": 16, "content_hash": "414d235aec793524013665cb058b8b29ba4d4b19eb0b1908aec4e7f7ef4dc3f2", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:0316277be1069d0a7571978469ae43b9d9678bb2b29d64e882448dd433009acc", "content": "The `type` attribute declares the input attribute's type:\n\n====\n[source,xml]\n----\n<input name=\"hotelId\" type=\"long\" />\n----\n====\n\nIf an input value does not match the declared type, a type conversion is attempted.\n\n[[_input_element_value]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Declaring an Input Type", "heading_level": 4, "file_order": 1, "section_index": 17, "content_hash": "0316277be1069d0a7571978469ae43b9d9678bb2b29d64e882448dd433009acc", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:635c139c74e6f2e6a9414de0b2ac5059490a2391cfd5983ffe570bdc59ece0e5", "content": "The `value` attribute specifies an expression to which to assign the input value, as follows:\n\n====\n[source,xml]\n----\n<input name=\"hotelId\" value=\"flowScope.myParameterObject.hotelId\" />\n----\n====\n\nIf the expression's value type can be determined, that metadata is used for type coercion if no `type` attribute is specified.\n\n[[_input_element_required]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Assigning an Input Value", "heading_level": 4, "file_order": 1, "section_index": 18, "content_hash": "635c139c74e6f2e6a9414de0b2ac5059490a2391cfd5983ffe570bdc59ece0e5", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:ae764bfc7f08162b0b8d7abb9f35f6f70fe73ed483d46196b082e1eaacbcc646", "content": "The `required` attribute enforces that the input is not null or empty, as follows:\n\n====\n[source,xml]\n----\n<input name=\"hotelId\" type=\"long\" value=\"flowScope.hotelId\" required=\"true\" />\n----\n====\n\n[[_output_element]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Marking an input as required", "heading_level": 4, "file_order": 1, "section_index": 19, "content_hash": "ae764bfc7f08162b0b8d7abb9f35f6f70fe73ed483d46196b082e1eaacbcc646", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:69acd2a9a58e4c90e3bea6acd38161025b57ae26e4167c3807b814b53a8f5dc3", "content": "The `output` element declares a flow output attribute.\nOutput attributes are declared within end-states that represent specific flow outcomes.\nThe following listing defines an `output` element:\n\n====\n[source,xml]\n----\n<end-state id=\"bookingConfirmed\">\n <output name=\"bookingId\" />\n</end-state>\n----\n====\n\nOutput values are obtained from flow scope under the name of the attribute.\nFor example, the output in the preceding example would be assigned the value of the `bookingId` variable.\n\n[[_output_element_value]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "The `output` Element", "heading_level": 3, "file_order": 1, "section_index": 20, "content_hash": "69acd2a9a58e4c90e3bea6acd38161025b57ae26e4167c3807b814b53a8f5dc3", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:675526754ee2c03c93e1d4bfce82f29358395a92577ca508caea2a5b557d823a", "content": "The `value` attribute denotes a specific output value expression, as follows:\n\n====\n[source,xml]\n----\n<output name=\"confirmationNumber\" value=\"booking.confirmationNumber\" />\n----\n====\n\n[[_checkpoint_input_output]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Specifying the Source of an `output` Value", "heading_level": 4, "file_order": 1, "section_index": 21, "content_hash": "675526754ee2c03c93e1d4bfce82f29358395a92577ca508caea2a5b557d823a", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:0fc8148e922f189a7cefbb5df7da56c5b21d46f470393aaa4ca620126c5ac741", "content": "You should review the sample booking flow with input/output mapping:\n\n====\n[source,xml]\n----\n<flow xmlns=\"http://www.springframework.org/schema/webflow\"\n xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xsi:schemaLocation=\"http://www.springframework.org/schema/webflow\n https://www.springframework.org/schema/webflow/spring-webflow.xsd\">\n\n <input name=\"hotelId\" />\n\n <on-start>\n <evaluate expression=\"bookingService.createBooking(hotelId, currentUser.name)\"\n result=\"flowScope.booking\" />\n </on-start>\n\n <view-state id=\"enterBookingDetails\">\n <transition on=\"submit\" to=\"reviewBooking\" />\n </view-state>\n\n <view-state id=\"reviewBooking\">\n <transition on=\"confirm\" to=\"bookingConfirmed\" />\n <transition on=\"revise\" to=\"enterBookingDetails\" />\n <transition on=\"cancel\" to=\"bookingCancelled\" />\n </view-state>\n\n <end-state id=\"bookingConfirmed\" >\n <output name=\"bookingId\" value=\"booking.id\"/>\n </end-state>\n\n <end-state id=\"bookingCancelled\" />\n\n</flow>\n----\n====\n\nThe flow now accepts a `hotelId` input attribute and returns a `bookingId` output attribute when a new booking is confirmed.\n\n[[_flow_variables]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Checkpoint: Input/Output Mapping", "heading_level": 3, "file_order": 1, "section_index": 22, "content_hash": "0fc8148e922f189a7cefbb5df7da56c5b21d46f470393aaa4ca620126c5ac741", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:bc5835706a3dd42cac732d3a532ea6e6cdcaca8bab2f2da4c784fdaadc2a21c7", "content": "A flow may declare one or more instance variables.\nThese variables are allocated when the flow starts.\nAny `@Autowired` transient references the variable holds are also rewired when the flow resumes.\n\n[[_var_element]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Variables", "heading_level": 2, "file_order": 1, "section_index": 23, "content_hash": "bc5835706a3dd42cac732d3a532ea6e6cdcaca8bab2f2da4c784fdaadc2a21c7", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:93ceb1813b227a669c2cbe9de3a7eee944af7ec5ab86490e85ea723c3925b3fc", "content": "The `var` element declares a flow variable, as follows:\n\n====\n[source,xml]\n----\n<var name=\"searchCriteria\" class=\"com.mycompany.myapp.hotels.search.SearchCriteria\"/>\n----\n====\n\nMake sure your variable's class implements `java.io.Serializable`, as the instance state is saved between flow requests.\n\n[[_scopes]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "The `var` Element", "heading_level": 3, "file_order": 1, "section_index": 24, "content_hash": "93ceb1813b227a669c2cbe9de3a7eee944af7ec5ab86490e85ea723c3925b3fc", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:0185a6eb86391f1bba3fc628dd9f467a7f902e9fc8cea2ff07bedcb87c462e44", "content": "Web Flow can store variables in one of several scopes:\n\n* <<_scopes_flow_scope>>\n* <<_scopes_view_scope>>\n* <<_scopes_request_scope>>\n* <<_scopes_flash_scope>>\n* <<_scopes_conversation_scope>>\n\n[[_scopes_flow_scope]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Variable Scopes", "heading_level": 2, "file_order": 1, "section_index": 25, "content_hash": "0185a6eb86391f1bba3fc628dd9f467a7f902e9fc8cea2ff07bedcb87c462e44", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:dc669706901e9fe7f495f62c88742f62841f58ee3d28d78618e0516095fbbcfd", "content": "Flow scope gets allocated when a flow starts and destroyed when the flow ends.\nWith the default implementation, any objects stored in flow scope need to be serializable.\n\n[[_scopes_view_scope]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Flow Scope", "heading_level": 3, "file_order": 1, "section_index": 26, "content_hash": "dc669706901e9fe7f495f62c88742f62841f58ee3d28d78618e0516095fbbcfd", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:dfa69fb540ec4829ba8c5c72b1d88e3d1c7179d80cbd02ef3472ed8357059979", "content": "View scope gets allocated when a `view-state` enters and destroyed when the state exits.\nView scope is referenceable _only_ from within a `view-state`.\nWith the default implementation, any objects stored in view scope need to be serializable.\n\n[[_scopes_request_scope]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "View Scope", "heading_level": 3, "file_order": 1, "section_index": 27, "content_hash": "dfa69fb540ec4829ba8c5c72b1d88e3d1c7179d80cbd02ef3472ed8357059979", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:8a06f6fb9e1b66af3eeb2548f0a91772348ff4a6e04c3ab9666503092ee47a85", "content": "Request scope gets allocated when a flow is called and destroyed when the flow returns.\n\n[[_scopes_flash_scope]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Request Scope", "heading_level": 3, "file_order": 1, "section_index": 28, "content_hash": "8a06f6fb9e1b66af3eeb2548f0a91772348ff4a6e04c3ab9666503092ee47a85", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:8a645497b9cac26feef1cfb7c817788910bea726c93fb6520814139f942c121b", "content": "Flash scope gets allocated when a flow starts, cleared after every view render, and destroyed when the flow ends.\nWith the default implementation, any objects stored in flash scope need to be serializable.\n\n[[_scopes_conversation_scope]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Flash Scope", "heading_level": 3, "file_order": 1, "section_index": 29, "content_hash": "8a645497b9cac26feef1cfb7c817788910bea726c93fb6520814139f942c121b", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:3d4527e5281390ecbb6bacb51c3d652c44e88c4b4b494e6e4d2a2789fb62d473", "content": "Conversation scope gets allocated when a top-level flow starts and gets destroyed when the top-level flow ends.\nConversation scope is shared by a top-level flow and all of its sub-flows.\nWith the default implementation, conversation-scoped objects are stored in the HTTP session and should generally be serializable to account for typical session replication.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Conversation Scope", "heading_level": 3, "file_order": 1, "section_index": 30, "content_hash": "3d4527e5281390ecbb6bacb51c3d652c44e88c4b4b494e6e4d2a2789fb62d473", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:045a9c0c1b2881ccb057da7add81f95aba4f2abd9b16e12271d8511bd4d0a7e6", "content": "The scope to use is often determined contextually -- for example, depending on where a variable is defined: at the start of the flow definition (flow scope), inside a a view state (view scope), and so on.\nIn other cases (for example, in EL expressions and Java code), you must specify it explicitly.\nSubsequent sections explain how this is done.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Choosing a Scope", "heading_level": 3, "file_order": 1, "section_index": 31, "content_hash": "045a9c0c1b2881ccb057da7add81f95aba4f2abd9b16e12271d8511bd4d0a7e6", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:68b2599c39c4cb76265e7991a2ca840df14ace9a063800304a6f4200e6cda295", "content": "A flow may call another flow as a sub-flow.\nThe flow waits until the sub-flow returns and responds to the sub-flow outcome.\n\n[[_subflow_state_element]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Calling Sub-flows", "heading_level": 2, "file_order": 1, "section_index": 32, "content_hash": "68b2599c39c4cb76265e7991a2ca840df14ace9a063800304a6f4200e6cda295", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:909afc2d6966b6732d8d3d77566349821ce328c935932f32a436725cf57845ea", "content": "The `subflow-state` element calls another flow as a subflow, as follows:\n\n====\n[source,xml]\n----\n<subflow-state id=\"addGuest\" subflow=\"createGuest\">\n <transition on=\"guestCreated\" to=\"reviewBooking\">\n <evaluate expression=\"booking.guests.add(currentEvent.attributes.guest)\" />\n </transition>\n <transition on=\"creationCancelled\" to=\"reviewBooking\" />\n</subflow-state>\n----\n====\n\nThe preceding example calls the `createGuest` flow and waits for it to return.\nWhen the flow returns with a `guestCreated` outcome, the new guest is added to the booking's guest list.\n\n[[_subflow_state_element_input]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "The `subflow-state` Element", "heading_level": 3, "file_order": 1, "section_index": 33, "content_hash": "909afc2d6966b6732d8d3d77566349821ce328c935932f32a436725cf57845ea", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:fefd736fd71bcc742249014d54e2be8ecf828e3d63eb177a9f3fe1e37459d99e", "content": "The `input` element passes input to the subflow, as follows:\n\n====\n[source,xml]\n----\n<subflow-state id=\"addGuest\" subflow=\"createGuest\">\n <input name=\"booking\" />\n <transition to=\"reviewBooking\" />\n</subflow-state>\n----\n====\n\n[[_subflow_state_element_output]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Passing a Sub-flow Input", "heading_level": 4, "file_order": 1, "section_index": 34, "content_hash": "fefd736fd71bcc742249014d54e2be8ecf828e3d63eb177a9f3fe1e37459d99e", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:f6dc7e4672ab36e97294b31b001c797aaaf77274454479beef464d97ac2bc969", "content": "When a subflow completes, its end-state ID is returned to the calling flow as the event to use to continue navigation.\n\nThe sub-flow can also create output attributes to which the calling flow can refer within an outcome transition, as follows:\n\n====\n[source,xml]\n----\n<transition on=\"guestCreated\" to=\"reviewBooking\">\n <evaluate expression=\"booking.guests.add(currentEvent.attributes.guest)\" />\n</transition>\n----\n====\n\nIn the preceding example, `guest` is the name of an output attribute returned by the `guestCreated` outcome.\n\n[[_checkpoint_subflow]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Mapping Sub-flow Output", "heading_level": 4, "file_order": 1, "section_index": 35, "content_hash": "f6dc7e4672ab36e97294b31b001c797aaaf77274454479beef464d97ac2bc969", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:298b95e97c5cee057715e083a971021ba0e14abfd2127f033af468dbd8f5bf02", "content": "You should review the sample booking flow that calls a subflow:\n\n====\n[source,xml]\n----\n<flow xmlns=\"http://www.springframework.org/schema/webflow\"\n xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xsi:schemaLocation=\"http://www.springframework.org/schema/webflow\n https://www.springframework.org/schema/webflow/spring-webflow.xsd\">\n\n <input name=\"hotelId\" />\n\n <on-start>\n <evaluate expression=\"bookingService.createBooking(hotelId, currentUser.name)\"\n result=\"flowScope.booking\" />\n </on-start>\n\n <view-state id=\"enterBookingDetails\">\n <transition on=\"submit\" to=\"reviewBooking\" />\n </view-state>\n\n <view-state id=\"reviewBooking\">\n <transition on=\"addGuest\" to=\"addGuest\" />\n <transition on=\"confirm\" to=\"bookingConfirmed\" />\n <transition on=\"revise\" to=\"enterBookingDetails\" />\n <transition on=\"cancel\" to=\"bookingCancelled\" />\n </view-state>\n\n <subflow-state id=\"addGuest\" subflow=\"createGuest\">\n <transition on=\"guestCreated\" to=\"reviewBooking\">\n <evaluate expression=\"booking.guests.add(currentEvent.attributes.guest)\" />\n </transition>\n <transition on=\"creationCancelled\" to=\"reviewBooking\" />\n </subflow-state>\n\n <end-state id=\"bookingConfirmed\" >\n <output name=\"bookingId\" value=\"booking.id\" />\n </end-state>\n\n <end-state id=\"bookingCancelled\" />\n\n</flow>\n----\n====\n\nThe flow now calls a `createGuest` sub-flow to add a new guest to the guest list.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/defining-flows.adoc", "title": "defining-flows", "heading": "Checkpoint: Calling Sub-flows", "heading_level": 3, "file_order": 1, "section_index": 36, "content_hash": "298b95e97c5cee057715e083a971021ba0e14abfd2127f033af468dbd8f5bf02", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/defining-flows.adoc"}}
{"id": "sha256:844947aad84ecbd75cf477aeda49378be8d7998f317e85c1c6329582defb3bf1", "content": "[[_el]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "el", "heading_level": 1, "file_order": 2, "section_index": 0, "content_hash": "844947aad84ecbd75cf477aeda49378be8d7998f317e85c1c6329582defb3bf1", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:5268e976f0fe6376465af673b959ee33d310b65bd1ab47a00e38f55f4d4efd54", "content": "Web Flow uses EL to access its data model and to invoke actions.\nThis chapter should familiarize you with EL syntax, configuration, and special EL variables you can reference from your flow definition.\n\nEL is used for many things within a flow, including:\n\n* Accessing client data, such as declaring flow inputs or referencing request parameters.\n* Accessing data in Web Flow's `RequestContext`, such as `flowScope` or `currentEvent`.\n* Invoking methods on Spring-managed objects through actions.\n* Resolving expressions, such as state transition criteria, sub-flow IDs, and view names.\n\nEL is also used to bind form parameters to model objects and, conversely, to render formatted form fields from the properties of a model object.\nThat, however, does not apply when using Web Flow with JSF.\nIn that case, the standard JSF component lifecyle applies.\n\n[[_el_types]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "Expression Language (EL)", "heading_level": 2, "file_order": 2, "section_index": 1, "content_hash": "5268e976f0fe6376465af673b959ee33d310b65bd1ab47a00e38f55f4d4efd54", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:911077cbe1f5eff836a59b1787b23861909d962cadbd81df0f9f4a191f0698e1", "content": "An important concept to understand is there are two types of expressions in Web Flow:\n\n* <<_el_types_eval>>\n* <<_el_types_template>>\n\n[[_el_types_eval]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "Expression Types", "heading_level": 3, "file_order": 2, "section_index": 2, "content_hash": "911077cbe1f5eff836a59b1787b23861909d962cadbd81df0f9f4a191f0698e1", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:0dd2a536b556a44afac4e40c280b60f6cc2f441ce6e93518a8f42f1d3fd93269", "content": "The first and most common type of expression is the _standard expression_.\nSuch expressions are evaluated directly by the EL and need not be enclosed in delimiters, such as `\\#{}`.\nThe following example shows such a standard expression:\n\n====\n[source,xml]\n----\n<evaluate expression=\"searchCriteria.nextPage()\" />\n----\n====\n\nThe preceding expression is a standard expression that invokes the `nextPage` method on the `searchCriteria` variable when evaluated.\nIf you try to enclose this expression in a special delimiter (such as `\\#{}`), you get an `IllegalArgumentException`.\nIn this context, the delimiter is seen as redundant.\nThe only acceptable value for the `expression` attribute is a single expression string.\n\n[[_el_types_template]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "Standard Expressions", "heading_level": 4, "file_order": 2, "section_index": 3, "content_hash": "0dd2a536b556a44afac4e40c280b60f6cc2f441ce6e93518a8f42f1d3fd93269", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:6a0c6d78854cd968d13c6b5ea06e5b02fb3a92957ba6beed7a64528a7eb3c022", "content": "The second type of expression is a _template expression_.\nA template expression allows mixing of literal text with one or more standard expressions.\nEach standard expression block is explicitly surrounded with the `\\#{}` delimiters.\nThe following example shows a template expression:\n\n====\n[source,xml]\n----\n<view-state id=\"error\" view=\"error-#{externalContext.locale}.xhtml\" />\n----\n====\n\nThe preceding expression is a template expression.\nThe result of evaluation is a string that concatenates literal text such as `error-` and `.xhtml` with the result of evaluating `externalContext.locale`.\nYou need explicit delimiters here to demarcate standard expression blocks within the template.\n\nNOTE: See the Web Flow XML schema for a complete listing of those XML attributes that accept standard expressions and those that accept template expressions.\nYou can also use F2 in Eclipse (or equivalent shortcuts in other IDEs) to access available documentation when typing out specific flow definition attributes.\n\n[[_el_language_choices]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "Template Expressions", "heading_level": 4, "file_order": 2, "section_index": 4, "content_hash": "6a0c6d78854cd968d13c6b5ea06e5b02fb3a92957ba6beed7a64528a7eb3c022", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:b0da8154088c3c21fd861e0d2cb4fd6d270e9469e7d1eebc038b5766b5e515f7", "content": "Spring Web Flow supports the following EL (Expression Language) implementations:\n\n* <<_el_spring_el>>\n* <<_el_unified_el>>\n\n[[_el_spring_el]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "EL Implementations", "heading_level": 3, "file_order": 2, "section_index": 5, "content_hash": "b0da8154088c3c21fd861e0d2cb4fd6d270e9469e7d1eebc038b5766b5e515f7", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:cd5ffd457bbdc425022ae7528dbaec5ae0b63cb3be8ec12a41844dba3cdbe8f0", "content": "Web Flow uses the https://docs.spring.io/spring/docs/current/spring-framework-reference/html/expressions.html[Spring Expression Language] (Spring EL). Spring EL was created to provide a single, well-supported expression language for use across all the products in the Spring portfolio.\nIt is distributed as a separate jar (`org.springframework.expression`) in the Spring Framework.\n\n[[_el_unified_el]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "Spring EL", "heading_level": 4, "file_order": 2, "section_index": 6, "content_hash": "cd5ffd457bbdc425022ae7528dbaec5ae0b63cb3be8ec12a41844dba3cdbe8f0", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:7cd86ccaa0e9a233dbc1b3d47cd8370c71bee0d44447d245808c7680d4882199", "content": "Use of the https://en.wikipedia.org/wiki/Unified_Expression_Language[Unified EL] also implies a dependency on `el-api`, although that is typically provided by your web container.\nAlthough Spring EL is the default and recommended expression language to use, you can replace it with Unified EL.\nTo do so, you need the following Spring configuration to plug in the `WebFlowELExpressionParser` to the `flow-builder-services`:\n\n====\n[source,xml]\n----\n<webflow:flow-builder-services expression-parser=\"expressionParser\"/>\n\n<bean id=\"expressionParser\" class=\"org.springframework.webflow.expression.el.WebFlowELExpressionParser\">\n <constructor-arg>\n <bean class=\"org.jboss.el.ExpressionFactoryImpl\" />\n </constructor-arg>\n</bean>\n----\n====\n\nNote that, if your application registers custom converters, it is important to ensure `WebFlowELExpressionParser` is configured with the conversion service that has those custom converters, as follows:\n\n====\n[source,xml]\n----\n<webflow:flow-builder-services expression-parser=\"expressionParser\" conversion-service=\"conversionService\"/>\n\n<bean id=\"expressionParser\" class=\"org.springframework.webflow.expression.el.WebFlowELExpressionParser\">\n <constructor-arg>\n <bean class=\"org.jboss.el.ExpressionFactoryImpl\" />\n </constructor-arg>\n <property name=\"conversionService\" ref=\"conversionService\"/>\n</bean>\n\n<bean id=\"conversionService\" class=\"somepackage.ApplicationConversionService\"/>\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "Unified EL", "heading_level": 4, "file_order": 2, "section_index": 7, "content_hash": "7cd86ccaa0e9a233dbc1b3d47cd8370c71bee0d44447d245808c7680d4882199", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:ca51c64eb78a2bf4510dfefb4c4264de0931015b1909d42b2f9a8f0a111697b6", "content": "In general, you will find Spring EL and Unified EL to have a very similar syntax.\n\nHowever, Spring El has some advantages.\nFor example, Spring EL is closely integrated with the type conversion of Spring 3, and that lets you take full advantage of its features.\nSpecifically, the automatic detection of generic types as well as the use of formatting annotations is currently supported only with Spring EL.\n\nKeep in mind the following minor changes when upgrading to Spring EL from Unified EL:\n\n* Expressions delineated with `${}` in flow definitions must be changed to `\\#{}` (note the leading backspace character).\n* Expressions that test the current event (such as `\\#{currentEvent == 'submit'}`) must be changed to `\\#{currentEvent.id == 'submit'}` (note the addition of the `id`).\n* Resolving properties (such as `\\#{currentUser.name}`) may cause a `NullPointerException` without any checks such as `\\#{currentUser != null ? currentUser.name : null}`. A much better alternative is the safe navigation operator: `\\#{currentUser?.name}`.\n\nFor more information on Spring EL syntax, see the https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#expressions[Language Reference] section in the Spring Documentation.\n\n[[_el_variables]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "EL Portability", "heading_level": 3, "file_order": 2, "section_index": 8, "content_hash": "ca51c64eb78a2bf4510dfefb4c4264de0931015b1909d42b2f9a8f0a111697b6", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:d0d55d224bd6af58b467e33b1479ab95fd08052b38ab2a3f2dee887966baf307", "content": "You can reference several implicit variables from within a flow.\n\nKeep in mind this general rule:\nYou should use variables that refer to data scopes (`flowScope`, `viewScope`, `requestScope`, and so on) only when you assign a new variable to one of the scopes.\n\nFor example, when assigning the result of the call to `bookingService.findHotels(searchCriteria)` to a new variable called `hotels`, you must prefix it with a scope variable to let Web Flow know where you want it stored.\nThe following example shows how to do so:\n\n====\n[source,xml]\n----\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<flow xmlns=\"http://www.springframework.org/schema/webflow\" ... >\n\n\t<var name=\"searchCriteria\" class=\"org.springframework.webflow.samples.booking.SearchCriteria\" />\n\n\t<view-state id=\"reviewHotels\">\n <on-render>\n <evaluate expression=\"bookingService.findHotels(searchCriteria)\" result=\"viewScope.hotels\" />\n </on-render>\n\t</view-state>\n\n</flow>\n----\n====\n\nHowever, when setting an existing variable (such as `searchCriteria` in the following example), you should reference the variable directly without prefixing it with any scope variables, as follows:\n\n====\n[source,xml]\n----\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<flow xmlns=\"http://www.springframework.org/schema/webflow\" ... >\n\n\t<var name=\"searchCriteria\" class=\"org.springframework.webflow.samples.booking.SearchCriteria\" />\n\n\t<view-state id=\"reviewHotels\">\n <transition on=\"sort\">\n <set name=\"searchCriteria.sortBy\" value=\"requestParameters.sortBy\" />\n </transition>\n\t</view-state>\n\n</flow>\n----\n====\n\nThe following is the list of implicit variables you can reference within a flow definition:\n\n* <<_el_variable_flowscope>>\n* <<_el_variable_viewscope>>\n* <<_el_variable_requestscope>>\n* <<_el_variable_flashscope>>\n* <<_el_variable_conversationscope>>\n* <<_el_variable_requestparameters>>\n* <<_el_variable_currentevent>>\n* <<_el_variable_currentuser>>\n* <<_el_variable_messagecontext>>\n* <<_el_variable_resourcebundle>>\n* <<_el_variable_requestcontext>>\n* <<_el_variable_flowexecutioncontext>>\n* <<_el_variable_flowexecutionurl>>\n* <<_el_variable_externalcontext>>\n\n[[_el_variable_flowscope]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "Special EL Variables", "heading_level": 3, "file_order": 2, "section_index": 9, "content_hash": "d0d55d224bd6af58b467e33b1479ab95fd08052b38ab2a3f2dee887966baf307", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:e687120eae728cd6f2dc72437ab88826cde44e073b914152247e284451b25acc", "content": "You can use the `flowScope` to assign a flow variable.\nFlow scope gets allocated when a flow starts and destroyed when the flow ends.\nWith the default implementation, any objects stored in flow scope need to be serializable.\nThe following listing defines a `flowScope` variable:\n\n====\n[source,xml]\n----\n<evaluate expression=\"searchService.findHotel(hotelId)\" result=\"flowScope.hotel\" />\n----\n====\n\n[[_el_variable_viewscope]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "The `flowScope` Variable", "heading_level": 4, "file_order": 2, "section_index": 10, "content_hash": "e687120eae728cd6f2dc72437ab88826cde44e073b914152247e284451b25acc", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:bb1c6eb196cc71afc0c474e42e9f57a90089a525de3fb28c433fc219fbaba96b", "content": "You can use the `viewScope` to assign a view variable.\nView scope gets allocated when a `view-state` is entered and destroyed when the state exits.\nView scope is referenceable _only_ from within a `view-state`.\nWith the default implementation, any objects stored in view scope need to be serializable.\nThe following listing defines a `viewScope` variable:\n\n====\n[source,xml]\n----\n<on-render>\n <evaluate expression=\"searchService.findHotels(searchCriteria)\" result=\"viewScope.hotels\"\n result-type=\"dataModel\" />\n</on-render>\n----\n====\n\n[[_el_variable_requestscope]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "The `viewScope` Variable", "heading_level": 4, "file_order": 2, "section_index": 11, "content_hash": "bb1c6eb196cc71afc0c474e42e9f57a90089a525de3fb28c433fc219fbaba96b", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:140ddbbe6893854b602dca29aaae0ea5a095b81f0168630844192e7604dbb092", "content": "You can use `requestScope` to assign a request variable.\nRequest scope gets allocated when a flow is called and destroyed when the flow returns.\nThe following listing defines a `requestScope` variable:\n\n====\n[source,xml]\n----\n<set name=\"requestScope.hotelId\" value=\"requestParameters.id\" type=\"long\" />\n----\n====\n\n[[_el_variable_flashscope]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "The `requestScope` Variable", "heading_level": 4, "file_order": 2, "section_index": 12, "content_hash": "140ddbbe6893854b602dca29aaae0ea5a095b81f0168630844192e7604dbb092", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:228deb2e63a75705f92cd1a5f3978899a3b6f16f2408ab62cb0f09672a23cc13", "content": "You can use `flashScope` to assign a flash variable.\nFlash scope gets allocated when a flow starts, cleared after every view render, and destroyed when the flow ends.\nWith the default implementation, any objects stored in flash scope need to be serializable.\nThe following listing defines a `flashScope` variable:\n\n====\n[source,xml]\n----\n<set name=\"flashScope.statusMessage\" value=\"'Booking confirmed'\" />\n----\n====\n\n[[_el_variable_conversationscope]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "The `flashScope` Variable", "heading_level": 4, "file_order": 2, "section_index": 13, "content_hash": "228deb2e63a75705f92cd1a5f3978899a3b6f16f2408ab62cb0f09672a23cc13", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:d5d40f1e831ac9c7a9216eff225a1210c35a706c7e24f9137e5927c0b9fcc0bb", "content": "You can use `conversationScope` to assign a conversation variable.\nConversation scope gets allocated when a top-level flow starts and destroyed when the top-level flow ends.\nConversation scope is shared by a top-level flow and all of its sub-flows.\nWith the default implementation, conversation-scoped objects are stored in the HTTP session and should generally be serializable to account for typical session replication.\nThe following listing defines a `conversationScope` variable:\n\n====\n[source,xml]\n----\n<evaluate expression=\"searchService.findHotel(hotelId)\" result=\"conversationScope.hotel\" />\n----\n====\n\n[[_el_variable_requestparameters]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "The `conversationScope` Variable", "heading_level": 4, "file_order": 2, "section_index": 14, "content_hash": "d5d40f1e831ac9c7a9216eff225a1210c35a706c7e24f9137e5927c0b9fcc0bb", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:891a058cf22d4359f618297b4e36293813f697a6ded8b0d06d1e0232ce300d26", "content": "The `requestParameters` variable accesses a client request parameter, as follows:\n\n====\n[source,xml]\n----\n<set name=\"requestScope.hotelId\" value=\"requestParameters.id\" type=\"long\" />\n----\n====\n\n[[_el_variable_currentevent]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "The `requestParameters` Variable", "heading_level": 4, "file_order": 2, "section_index": 15, "content_hash": "891a058cf22d4359f618297b4e36293813f697a6ded8b0d06d1e0232ce300d26", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:471a8c0c6a9fbf8666f9d817b578277aa6123f515bdb00fd7951e9adf65338ed", "content": "The `currentEvent` variable accesses attributes of the current `Event`, as follows:\n\n====\n[source,xml]\n----\n<evaluate expression=\"booking.guests.add(currentEvent.attributes.guest)\" />\n----\n====\n\n[[_el_variable_currentuser]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "The `currentEvent` Variable", "heading_level": 4, "file_order": 2, "section_index": 16, "content_hash": "471a8c0c6a9fbf8666f9d817b578277aa6123f515bdb00fd7951e9adf65338ed", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:68462829abbce19013a7c4cd33366aabfea6d29cd98e760d922d4d472a6018eb", "content": "The `currentUser` variable accesses the authenticated `Principal`, as follows:\n\n====\n[source,xml]\n----\n<evaluate expression=\"bookingService.createBooking(hotelId, currentUser.name)\"\n result=\"flowScope.booking\" />\n----\n====\n\n[[_el_variable_messagecontext]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "The `currentUser` Variable", "heading_level": 4, "file_order": 2, "section_index": 17, "content_hash": "68462829abbce19013a7c4cd33366aabfea6d29cd98e760d922d4d472a6018eb", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:8618929a1a9290c14050e4473023ac5005677fd4d9140efc2bec3f46e1d7ec43", "content": "The `messageContext` variable accesses a context to retrieve and create flow execution messages, including error and success messages.\nSee the `MessageContext` Javadocs for more information.\nThe following example uses the `messageContext` variable:\n\n====\n[source,xml]\n----\n<evaluate expression=\"bookingValidator.validate(booking, messageContext)\" />\n----\n====\n\n[[_el_variable_resourcebundle]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "The `messageContext` Variable", "heading_level": 4, "file_order": 2, "section_index": 18, "content_hash": "8618929a1a9290c14050e4473023ac5005677fd4d9140efc2bec3f46e1d7ec43", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:f166022151d5cc77ac8bcc1aa81049f6c3d5636e07c348453e83feaf9329cf20", "content": "The `resourceBundle` variable accesses a message resource, as follows:\n\n====\n[source,xml]\n----\n<set name=\"flashScope.successMessage\" value=\"resourceBundle.successMessage\" />\n----\n====\n\n[[_el_variable_requestcontext]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "The `resourceBundle` Variable", "heading_level": 4, "file_order": 2, "section_index": 19, "content_hash": "f166022151d5cc77ac8bcc1aa81049f6c3d5636e07c348453e83feaf9329cf20", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:70d89bd9c637806f3a53a2539f2796cdb1868cb2fbc4d58f83935bf8c80c4305", "content": "The `flowRequestContext` variable accesses the `RequestContext` API, which is a representation of the current flow request.\nSee the https://docs.spring.io/spring-webflow/docs/current/api/org/springframework/webflow/execution/RequestContext.html[API Javadocs] for more information.\n\n[[_el_variable_flowexecutioncontext]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "The `flowRequestContext` Variable", "heading_level": 4, "file_order": 2, "section_index": 20, "content_hash": "70d89bd9c637806f3a53a2539f2796cdb1868cb2fbc4d58f83935bf8c80c4305", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:3b2d9407d6ae97ec7dbff771611dc08065eaccfda95ad9c811da9bde808e4969", "content": "The `flowExecutionContext` variable accesses the `FlowExecutionContext` API, which is a representation of the current flow state.\nSee the https://docs.spring.io/spring-webflow/docs/current/api/org/springframework/webflow/execution/FlowExecutionContext.html[API Javadocs] for more information.\n\n[[_el_variable_flowexecutionurl]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "The `flowExecutionContext` Variable", "heading_level": 4, "file_order": 2, "section_index": 21, "content_hash": "3b2d9407d6ae97ec7dbff771611dc08065eaccfda95ad9c811da9bde808e4969", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:bacd3bb21f340cc9513245ca9fe371d1ec6490c91faebb615c45810b13d53b8f", "content": "The `flowExecutionUrl` variable accesses the context-relative URI for the current flow execution view-state.\n\n[[_el_variable_externalcontext]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "The `flowExecutionUrl` Variable", "heading_level": 4, "file_order": 2, "section_index": 22, "content_hash": "bacd3bb21f340cc9513245ca9fe371d1ec6490c91faebb615c45810b13d53b8f", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:6609ffca2875cfb18cc7ab201c9b505dc75fd6a5cf688dfe59eb8ab99d187f2f", "content": "The `externalContext` variable accesses the client environment, including user session attributes.\nSee the `ExternalContext` https://docs.spring.io/spring-webflow/docs/current/api/org/springframework/webflow/context/ExternalContext.html[API JavaDocs] for more information.\nThe following example uses the `externalContext` variable:\n\n====\n[source,xml]\n----\n<evaluate expression=\"searchService.suggestHotels(externalContext.sessionMap.userProfile)\"\n result=\"viewScope.hotels\" />\n----\n====\n\n[[_el_scope_searching]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "The `externalContext` Variable", "heading_level": 4, "file_order": 2, "section_index": 23, "content_hash": "6609ffca2875cfb18cc7ab201c9b505dc75fd6a5cf688dfe59eb8ab99d187f2f", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:2e4335d068bbf5ae23f5913f3ebc18b23c65e75033f4a52687ba23ded093bf49", "content": "As mentioned <<_el_variables,earlier>> in this section, when assigning a variable in one of the flow scopes, referencing that scope is required.\nThe following example shows how to do so:\n\n====\n[source,xml]\n----\n<set name=\"requestScope.hotelId\" value=\"requestParameters.id\" type=\"long\" />\n----\n====\n\nWhen you are merely accessing a variable in one of the scopes, referencing the scope is optional, as follows:\n\n====\n[source,xml]\n----\n<evaluate expression=\"entityManager.persist(booking)\" />\n----\n====\n\nWhen no scope is specified, as in the use of `booking` shown earlier, a scope searching algorithm is used.\nThe algorithm looks in the request, flash, view, flow, and conversation scopes for the variable.\nIf no such variable is found, an `EvaluationException` is thrown.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/el.adoc", "title": "el", "heading": "Scope Searching Algorithm", "heading_level": 3, "file_order": 2, "section_index": 24, "content_hash": "2e4335d068bbf5ae23f5913f3ebc18b23c65e75033f4a52687ba23ded093bf49", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/el.adoc"}}
{"id": "sha256:8daa12113246ee46ea08ebca521eb1b8267c3be13ba26f662773c5c100c7f998", "content": "Flow inheritance lets one flow inherit the configuration of another flow.\nInheritance can occur at both the flow and state levels.\nA common use case is for a parent flow to define global transitions and exception handlers, and then each child flow can inherit those settings.\n\nIn order for a parent flow to be found, it must be added to the `flow-registry`, as any other flow.\n\n[[_flow_inheritance_java_comparison]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-inheritance.adoc", "title": "flow-inheritance", "heading": "Flow Inheritance", "heading_level": 2, "file_order": 3, "section_index": 0, "content_hash": "8daa12113246ee46ea08ebca521eb1b8267c3be13ba26f662773c5c100c7f998", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-inheritance.adoc"}}
{"id": "sha256:7eae62ae62a371fd446654dbe68668d87311445538e72d343225d2055ce01c34", "content": "Flow inheritance is similar to Java inheritance in that elements defined in a parent are exposed through the child.\nHowever, there are key differences.\n\nA child flow cannot override an element from a parent flow.\nSimilar elements between the parent and child flows are merged.\nUnique elements in the parent flow are added to the child.\n\nA child flow can inherit from multiple parent flows.\nJava inheritance is limited to a single class.\n\n[[_flow_inheritance_levels]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-inheritance.adoc", "title": "flow-inheritance", "heading": "Is Flow Inheritance Similar to Java Inheritance?", "heading_level": 3, "file_order": 3, "section_index": 1, "content_hash": "7eae62ae62a371fd446654dbe68668d87311445538e72d343225d2055ce01c34", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-inheritance.adoc"}}
{"id": "sha256:24952521d2acc4c6bf6ba63f8fd4fe36abdff8a672cc4a03258550da9ef39e01", "content": "Spring Web Flow has two types of inheritance:\n\n* <<_flow_inheritance_level_flow>>\n* <<_flow_inheritance_level_state>>\n\n[[_flow_inheritance_level_flow]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-inheritance.adoc", "title": "flow-inheritance", "heading": "Types of Flow Inheritance", "heading_level": 3, "file_order": 3, "section_index": 2, "content_hash": "24952521d2acc4c6bf6ba63f8fd4fe36abdff8a672cc4a03258550da9ef39e01", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-inheritance.adoc"}}
{"id": "sha256:e3ff7b81888ce08cdbfd78a95f58f344dce9d748fcb31a3b9f804356dfeeb853", "content": "Flow level inheritance is defined by the `parent` attribute on the `flow` element.\nThe attribute contains a comma-separated list of flow identifiers from which to inherit.\nThe child flow inherits from each parent in the order it is listed, adding elements and content to the resulting flow.\nThe resulting flow from the first merge is considered the child in the second merge, and so on.\n\n====\n[source,xml]\n----\n<flow parent=\"common-transitions, common-states\">\n----\n====\n\n[[_flow_inheritance_level_state]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-inheritance.adoc", "title": "flow-inheritance", "heading": "Flow-level Inheritance", "heading_level": 4, "file_order": 3, "section_index": 3, "content_hash": "e3ff7b81888ce08cdbfd78a95f58f344dce9d748fcb31a3b9f804356dfeeb853", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-inheritance.adoc"}}
{"id": "sha256:fa703492791d3bb2fac4ba2c00e344a736bf7e99995d0a6ba6de1c0842faa010", "content": "State-level inheritance is similar to flow-level inheritance, except only one state inherits from the parent, instead of the entire flow.\n\nUnlike flow inheritance, only a single parent is allowed.\nAdditionally, the identifier of the flow state to inherit from must also be defined.\nThe identifiers for the flow and the state within that flow are separated by a `#` character.\n\nThe parent and child states must be of the same type.\nFor instance, a view-state cannot inherit from an end-state, only another view-state.\n\n====\n[source,xml]\n----\n<view-state id=\"child-state\" parent=\"parent-flow#parent-view-state\">\n----\n====\n\nNOTE: The intent for flow-level inheritance is to define common states to be added to and shared among multiple flow definitions, while the intent for state-level inheritance is to extend from and merge with a single parent state.\nFlow-level inheritance is a good fit for composition and multiple inheritance, but, at the state level you can still only inherit from a single parent state.\n\n[[_flow_inheritance_abstract]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-inheritance.adoc", "title": "flow-inheritance", "heading": "State-level Inheritance", "heading_level": 3, "file_order": 3, "section_index": 4, "content_hash": "fa703492791d3bb2fac4ba2c00e344a736bf7e99995d0a6ba6de1c0842faa010", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-inheritance.adoc"}}
{"id": "sha256:1df40f4bafde7fd123c8a739886d720660d24ddfae805525a0ee73558280efc6", "content": "Often, parent flows are not designed to be run directly.\nIn order to protect these flows from running, they can be marked as `abstract`.\nIf an abstract flow attempts to run, a `FlowBuilderException` is thrown.\n\n====\n[source,xml]\n----\n<flow abstract=\"true\">\n----\n====\n\n[[_flow_inheritance_algorithm]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-inheritance.adoc", "title": "flow-inheritance", "heading": "Abstract Flows", "heading_level": 3, "file_order": 3, "section_index": 5, "content_hash": "1df40f4bafde7fd123c8a739886d720660d24ddfae805525a0ee73558280efc6", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-inheritance.adoc"}}
{"id": "sha256:41bf9d47e1d4fdd700dc93337f17c63d4e68faf15bbc9c7214f26667b293424d", "content": "When a child flow inherits from its parent, the parent and child are merged together to create a new flow.\nThere are rules for every element in the Web Flow definition language that govern how that particular element is merged.\n\nThere are two types of elements:\n\n* Mergeable: Mergeable elements always attempt to merge together if the elements are similar.\n* Non-mergeable:Non-mergeable elements in a parent or child flow are always contained in the resulting flow intact.\nThey are not modified as part of the merge process.\n\nNOTE: Paths to external resources in the parent flow should be absolute.\nRelative paths break when the two flows are merged unless the parent and child flow are in the same directory.\nOnce merged, all relative paths in the parent flow become relative to the child flow.\n\n[[_flow_inheritance_algorithm_mergeable]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-inheritance.adoc", "title": "flow-inheritance", "heading": "Inheritance Algorithm", "heading_level": 3, "file_order": 3, "section_index": 6, "content_hash": "41bf9d47e1d4fdd700dc93337f17c63d4e68faf15bbc9c7214f26667b293424d", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-inheritance.adoc"}}
{"id": "sha256:90e8a7cba5641f6cf95f5956494bfd5637cd9b488819bfc1617af697dbc8827c", "content": "If the elements are of the same type and their keyed attribute is identical, the content of the parent element is merged with the child element.\nThe merge algorithm continues to merge each sub-element of the merging parent and child.\nOtherwise, the parent element is added as a new element to the child.\n\nIn most cases, the added elements from a parent flow are added after elements in the child flow.\nExceptions to this rule include action elements (`evaluate`, `render`, and `set`) that are added at the beginning.\nThis allows for the results of parent actions to be used by child actions.\n\nThe mergeable elements are:\n\n* `action-state`: Merges on the ID\n* `attribute`: Merges on the name\n* `decision-state`: Merges on the ID\n* `end-state`: Merges on the ID\n* `flow`: Always merges\n* `if`: Test\n* `on-end`: Always merges\n* `on-entry`: Always merges\n* `on-exit`: Always merges\n* `on-render`: Always merges\n* `on-start`: Always merges\n* `input`: Merges on the name\n* `output`: Merges on the name\n* `secured`: Merges on the attributes\n* `subflow-state`: Merges on the ID\n* `transition`: Merges on and on-exception\n* `view-state`: Merges on the id\n\n[[_flow_inheritance_nonmergeable]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-inheritance.adoc", "title": "flow-inheritance", "heading": "Mergeable Elements", "heading_level": 4, "file_order": 3, "section_index": 7, "content_hash": "90e8a7cba5641f6cf95f5956494bfd5637cd9b488819bfc1617af697dbc8827c", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-inheritance.adoc"}}
{"id": "sha256:66f15aff1d7a4e3b306cf8857adc688c22e7ec834b58cce928a9ff87806b9d3b", "content": "The non-mergeable elements are:\n\n* `bean-import`\n* `evaluate`\n* `exception-handler`\n* `persistence-context`\n* `render`\n* `set`\n* `var`", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-inheritance.adoc", "title": "flow-inheritance", "heading": "Non-mergeable Elements", "heading_level": 4, "file_order": 3, "section_index": 8, "content_hash": "66f15aff1d7a4e3b306cf8857adc688c22e7ec834b58cce928a9ff87806b9d3b", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-inheritance.adoc"}}
{"id": "sha256:0bb3373e470f6574b1ec96905f859d007eb80fe906ebadf3256beaae9fcf0b4d", "content": "Most applications access data in some way.\nMany modify data shared by multiple users and, therefore, require transactional data access properties.\nThey often transform relational data sets into domain objects to support application processing.\nWeb Flow offers \"`flow managed persistence`\", where a flow can create, commit, and close an object persistence context for you.\nWeb Flow integrates both Hibernate and JPA object-persistence technologies.\n\nApart from flow-managed persistence, there is the pattern of fully encapsulating `PersistenceContext` management within the service layer of your application.\nIn that case, the web layer does not get involved with persistence.\nInstead, it works entirely with detached objects that are passed to and returned by your service layer.\nThis chapter focuses on flow-managed persistence, exploring how and when to use this feature.\n\n[[_flowscopedpersistencecontext]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-managed-persistence.adoc", "title": "flow-managed-persistence", "heading": "Flow Managed Persistence", "heading_level": 2, "file_order": 4, "section_index": 0, "content_hash": "0bb3373e470f6574b1ec96905f859d007eb80fe906ebadf3256beaae9fcf0b4d", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-managed-persistence.adoc"}}
{"id": "sha256:4b7472347e4fbf4685f656352de3d16542906bb89e371b3c0dcd1536585f9189", "content": "This pattern creates a `PersistenceContext` in `flowScope` on flow startup, uses that context for data access during the course of flow execution, and commits changes made to persistent entities at the end.\nThis pattern provides isolation of intermediate edits by committing changes to the database only at the end of flow execution.\nThis pattern is often used in conjunction with an optimistic locking strategy to protect the integrity of data modified in parallel by multiple users.\nTo support saving and restarting the progress of a flow over an extended period of time, a durable store for flow state must be used.\nIf a save and restart capability is not required, standard HTTP session-based storage of the flow state is sufficient.\nIn that case, a session expiring or ending before commit could potentially result in changes being lost.\n\nTo use the flow-scoped `PersistenceContext` pattern, first mark your flow as a `persistence-context`, as follows:\n\n====\n[source,xml]\n----\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<flow xmlns=\"http://www.springframework.org/schema/webflow\"\n xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xsi:schemaLocation=\"http://www.springframework.org/schema/webflow\n https://www.springframework.org/schema/webflow/spring-webflow.xsd\">\n\n <persistence-context />\n\n</flow>\n----\n====\n\nThen configure the correct `FlowExecutionListener` to apply this pattern to your flow.\nIf you use Hibernate, register the `HibernateFlowExecutionListener`.\nIf you use JPA, register the `JpaFlowExecutionListener`.\nThe following example uses JPA:\n\n====\n[source,xml]\n----\n<webflow:flow-executor id=\"flowExecutor\" flow-registry=\"flowRegistry\">\n <webflow:flow-execution-listeners>\n <webflow:listener ref=\"jpaFlowExecutionListener\" />\n </webflow:flow-execution-listeners>\n</webflow:flow-executor>\n\n<bean id=\"jpaFlowExecutionListener\"\n class=\"org.springframework.webflow.persistence.JpaFlowExecutionListener\">\n <constructor-arg ref=\"entityManagerFactory\" />\n <constructor-arg ref=\"transactionManager\" />\n</bean>\n----\n====\n\nTo trigger a commit at the end, annotate your `end-state` element with the commit attribute, as follows:\n\n====\n[source,xml]\n----\n<end-state id=\"bookingConfirmed\" commit=\"true\" />\n----\n====\n\nThat is it.\nWhen your flow starts, the listener handles allocating a new `EntityManager` in `flowScope`.\nYou can reference this `EntityManager` at anytime from within your flow by using the special `persistenceContext` variable.\nIn addition, any data access that occurs when you use a Spring-managed data access object automatically uses this `EntityManager`.\nSuch data access operations should always run non-transactionally or in read-only transactions to maintain isolation of intermediate edits.\n\n[[_flow_managed_persistence_propagation]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-managed-persistence.adoc", "title": "flow-managed-persistence", "heading": "Flow-scoped `PersistenceContext`", "heading_level": 3, "file_order": 4, "section_index": 1, "content_hash": "4b7472347e4fbf4685f656352de3d16542906bb89e371b3c0dcd1536585f9189", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-managed-persistence.adoc"}}
{"id": "sha256:e9eb82473cde4fc688b230b5a94c48cd02996a8b6ea610ab4179484193e3e9ea", "content": "A flow managed `PersistenceContext` is automatically extended (propagated) to sub-flows, assuming each sub-flow also has the `<perstistence-context/>` variable.\nWhen a sub-flow re-uses the `PersistenceContext` started by its parent, it ignores commit flags when an end state is reached, thereby deferring the final decision (to commit or not) to its parent.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-managed-persistence.adoc", "title": "flow-managed-persistence", "heading": "Flow Managed Persistence And Sub-Flows", "heading_level": 3, "file_order": 4, "section_index": 2, "content_hash": "e9eb82473cde4fc688b230b5a94c48cd02996a8b6ea610ab4179484193e3e9ea", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-managed-persistence.adoc"}}
{"id": "sha256:780be76f9c13bbcd0bea14895159beabf790771cee0df1b6d32a6f507daf6953", "content": "[[_flow_security]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-security.adoc", "title": "flow-security", "heading": "flow-security", "heading_level": 1, "file_order": 5, "section_index": 0, "content_hash": "780be76f9c13bbcd0bea14895159beabf790771cee0df1b6d32a6f507daf6953", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-security.adoc"}}
{"id": "sha256:00feee89d94c96f924dc54a3897ce349e150fce0950a0c1014e2d6e847b996e1", "content": "Security is an important concept for any application.\nEnd users should not be able to access any portion of a site by simply guessing the URL.\nAreas of a site that are sensitive must ensure that only authorized requests are processed.\nSpring Security is a proven security platform that can integrate with your application at multiple levels.\nThis section focuses on securing flow execution.\n\n[[_flow_security_how_to]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-security.adoc", "title": "flow-security", "heading": "Securing Flows", "heading_level": 2, "file_order": 5, "section_index": 1, "content_hash": "00feee89d94c96f924dc54a3897ce349e150fce0950a0c1014e2d6e847b996e1", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-security.adoc"}}
{"id": "sha256:7b4ed2cf32e2439c5e1c0a454782d760edbd9d0d644d34131ce2d6ecdb643f6e", "content": "Securing a flow is a three-step process:\n\n. Configure Spring Security with authentication and authorization rules.\n. Annotate the flow definition with the secured element to define the security rules.\n. Add the `SecurityFlowExecutionListener` to process the security rules.\n\nEach of these steps must be completed, or flow security rules are not applied.\n\n[[_flow_security_secured_element]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-security.adoc", "title": "flow-security", "heading": "How Do I Secure a Flow?", "heading_level": 3, "file_order": 5, "section_index": 2, "content_hash": "7b4ed2cf32e2439c5e1c0a454782d760edbd9d0d644d34131ce2d6ecdb643f6e", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-security.adoc"}}
{"id": "sha256:41161efb099dc760f5f5616e3ef80d5f743a7eb90def209bf69ee5127fb3134b", "content": "The `secured` element designates that its containing element should apply the authorization check before fully entering.\nThis may not occur more than once per stage of the flow execution that is secured.\n\nThree phases of a flow can be secured: flows, states, and transitions.\nIn each case, the syntax for the `secured` element is identical.\nThe `secured` element is located inside the element it secures.\nFor example, to secure a state, the `secured` element occurs directly inside that state, as follows:\n\n====\n[source,xml]\n----\n<view-state id=\"secured-view\">\n <secured attributes=\"ROLE_USER\" />\n ...\n</view-state>\n----\n====\n\n[[_flow_security_secured_element_attributes]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-security.adoc", "title": "flow-security", "heading": "The `secured` Element", "heading_level": 3, "file_order": 5, "section_index": 3, "content_hash": "41161efb099dc760f5f5616e3ef80d5f743a7eb90def209bf69ee5127fb3134b", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-security.adoc"}}
{"id": "sha256:b8fc25b4aa9053de319c82ca3b488e7e49854cfc45cb934231a870985bfe63f3", "content": "The value of `attributes` is a comma separated list of Spring Security authorization attributes.\nOften, these are specific security roles.\nThe attributes are compared against the user's granted attributes by a Spring Security access decision manager.\n\n====\n[source,xml]\n----\n<secured attributes=\"ROLE_USER\" />\n----\n====\n\nBy default, an authority-based `AuthorizationManager` is used to determine if the user is allowed access.\nThis needs to be overridden if your application is not using authorization roles.\n\n[[_flow_security_secured_element_match]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-security.adoc", "title": "flow-security", "heading": "Security Attributes", "heading_level": 4, "file_order": 5, "section_index": 4, "content_hash": "b8fc25b4aa9053de319c82ca3b488e7e49854cfc45cb934231a870985bfe63f3", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-security.adoc"}}
{"id": "sha256:d3438d2d5d4999e1374ca7292d32c046482c476c7185d7aacb27d36a6593bade", "content": "There are two types of matching available: `any` and `all`.\n`any` allows access if at least one of the required security attributes is granted to the user.\n`all` allows access only if each of the required security attributes is granted to the user.\n\n====\n[source,xml]\n----\n<secured attributes=\"ROLE_USER, ROLE_ANONYMOUS\" match=\"any\" />\n----\n====\n\nThis attribute is optional.\nIf not defined, the default value is `any`.\n\nThe `match` attribute is respected only if the default access decision manager is used.\n\n[[_flow_security_listener]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-security.adoc", "title": "flow-security", "heading": "Matching Type", "heading_level": 4, "file_order": 5, "section_index": 5, "content_hash": "d3438d2d5d4999e1374ca7292d32c046482c476c7185d7aacb27d36a6593bade", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-security.adoc"}}
{"id": "sha256:1143ee9303bbf7b1a1f9b07be5158b369ea3f7fb23e7d9ba4d728b3ca49643b5", "content": "Defining security rules in the flow by themselves does not protect the flow.\nYou must also define a `SecurityFlowExecutionListener` in the webflow configuration and apply it to the flow executor, as follows:\n\n====\n[source,xml]\n----\n<webflow:flow-executor id=\"flowExecutor\" flow-registry=\"flowRegistry\">\n <webflow:flow-execution-listeners>\n <webflow:listener ref=\"securityFlowExecutionListener\" />\n </webflow:flow-execution-listeners>\n</webflow:flow-executor>\n\n<bean id=\"securityFlowExecutionListener\"\n class=\"org.springframework.webflow.security.SecurityFlowExecutionListener\" />\n----\n====\n\nIf access is denied to a portion of the application, an `AccessDeniedException` is thrown.\nThis exception is later caught by Spring Security and used to prompt the user to authenticate.\nIt is important that this exception be allowed to travel up the execution stack uninhibited.\nOtherwise, the end user may not be prompted to authenticate.\n\n[[_flow_security_listener_am]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-security.adoc", "title": "flow-security", "heading": "The `SecurityFlowExecutionListener`", "heading_level": 3, "file_order": 5, "section_index": 6, "content_hash": "1143ee9303bbf7b1a1f9b07be5158b369ea3f7fb23e7d9ba4d728b3ca49643b5", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-security.adoc"}}
{"id": "sha256:2325597dc5f4a3766b6217df300bcad14bbce25f0692f70b97f74724594a19f1", "content": "If your application uses authorities that are not role-based, you need to configure a custom `AuthorizaitonManager`.\nYou can override the `AuthorityAuthorizationManager` used by default through\nthe `authorizationManagerInitializer` property on the security listener. For example:\n\n====\n[source,java]\n----\n@Bean\nSecurityFlowExecutionListener securityFlowExecutionListener() {\n\tSecurityFlowExecutionListener listener = new SecurityFlowExecutionListener();\n\tlistener.setAuthorizationManagerInitializer(securityRule -> {\n // ...\n\t});\n\treturn listener;\n}\n----\n====\n\n[[_flow_security_configuration]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-security.adoc", "title": "flow-security", "heading": "Custom Authorization Managers", "heading_level": 4, "file_order": 5, "section_index": 7, "content_hash": "2325597dc5f4a3766b6217df300bcad14bbce25f0692f70b97f74724594a19f1", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-security.adoc"}}
{"id": "sha256:15a1a5f9e0e1afbeaaaa00cdf4873b5b2500b5a4f23828c909146a67e681417a", "content": "Spring Security has robust configuration options available.\nAs every application and environment has its own security requirements, the https://docs.spring.io/spring-security/site/docs/current/reference/html5/[Spring Security reference documentation] is the best place to learn the available options.\n\nBoth the `booking-faces` and `booking-mvc` sample applications are configured to use Spring Security.\nConfiguration is needed at both the Spring and the `web.xml` levels.\n\n[[_flow_security_configuration_spring]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-security.adoc", "title": "flow-security", "heading": "Configuring Spring Security", "heading_level": 3, "file_order": 5, "section_index": 8, "content_hash": "15a1a5f9e0e1afbeaaaa00cdf4873b5b2500b5a4f23828c909146a67e681417a", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-security.adoc"}}
{"id": "sha256:9cb5933b5ae076eecbd7a9b0abf268ace7e451a73e0cbdfb778e15851c282899", "content": "The Spring configuration defines `http` specifics (such as protected URLs and login/logout mechanics) and the `authentication-provider`.\nFor the sample applications, a local authentication provider is configured.\nThe following example configures Spring Security for a web flow:\n\n====\n[source,xml]\n----\n\n<security:http auto-config=\"true\">\n <security:form-login login-page=\"/spring/login\"\n login-processing-url=\"/spring/loginProcess\"\n default-target-url=\"/spring/main\"\n authentication-failure-url=\"/spring/login?login_error=1\" />\n <security:logout logout-url=\"/spring/logout\" logout-success-url=\"/spring/logout-success\" />\n</security:http>\n\n<security:authentication-provider>\n <security:password-encoder hash=\"md5\" />\n <security:user-service>\n <security:user name=\"keith\" password=\"417c7382b16c395bc25b5da1398cf076\"\n authorities=\"ROLE_USER,ROLE_SUPERVISOR\" />\n <security:user name=\"erwin\" password=\"12430911a8af075c6f41c6976af22b09\"\n authorities=\"ROLE_USER,ROLE_SUPERVISOR\" />\n <security:user name=\"jeremy\" password=\"57c6cbff0d421449be820763f03139eb\"\n authorities=\"ROLE_USER\" />\n <security:user name=\"scott\" password=\"942f2339bf50796de535a384f0d1af3e\"\n authorities=\"ROLE_USER\" />\n </security:user-service>\n</security:authentication-provider>\n----\n====\n\n[[_flow_security_configuration_web]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-security.adoc", "title": "flow-security", "heading": "Spring Configuration", "heading_level": 4, "file_order": 5, "section_index": 9, "content_hash": "9cb5933b5ae076eecbd7a9b0abf268ace7e451a73e0cbdfb778e15851c282899", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-security.adoc"}}
{"id": "sha256:b405220a59fb0f2c0199cdd7a10055db54e9f4c4bf10e2dccb52c493bbaad53e", "content": "In the `web.xml` file, a `filter` is defined to intercept all requests.\nThis filter listens for login and logout requests and processes them accordingly.\nIt also catches `AccesDeniedException` instances and redirects the user to the login page.\nThe following example defines such filters:\n\n====\n[source,xml]\n----\n<filter>\n <filter-name>springSecurityFilterChain</filter-name>\n <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>\n</filter>\n\n<filter-mapping>\n <filter-name>springSecurityFilterChain</filter-name>\n <url-pattern>/*</url-pattern>\n</filter-mapping>\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/flow-security.adoc", "title": "flow-security", "heading": "`web.xml` Configuration", "heading_level": 4, "file_order": 5, "section_index": 10, "content_hash": "b405220a59fb0f2c0199cdd7a10055db54e9f4c4bf10e2dccb52c493bbaad53e", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/flow-security.adoc"}}
{"id": "sha256:8304b99a1ee54c1e911d73ad13ccbcd2a1974bb06ba8b9a48649c1260aed19f4", "content": "Keith Donald, Erwin Vervaet, Jeremy Grelle, Scott Andrews, Rossen Stoyanchev, Phillip Webb, Jay Bryant\n\n[preface]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/index.adoc", "title": "Spring Web Flow Reference Guide", "heading": "Spring Web Flow Reference Guide", "heading_level": 1, "file_order": 6, "section_index": 0, "content_hash": "8304b99a1ee54c1e911d73ad13ccbcd2a1974bb06ba8b9a48649c1260aed19f4", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/index.adoc"}}
{"id": "sha256:ef7c8564f301aebb4739b420769203a49b28e11e1298e3290fdc17553a396b98", "content": "Many web applications require the same sequence of steps to execute in different contexts.\nOften, these sequences are merely components of a larger task the user is trying to accomplish.\nSuch a reusable sequence is called a flow.\n\nConsider a typical shopping cart application.\nUser registration, login, and cart checkout are all examples of flows that can be invoked from several places in this type of application.\n\nSpring Web Flow is the module of Spring for implementing flows.\nThe Web Flow engine plugs into the Spring Web MVC platform and enables declarative flow definition.\nThis reference guide shows you how to use and extend Spring Web Flow.\n\ninclude::overview.adoc[]\n\ninclude::defining-flows.adoc[]\n\ninclude::el.adoc[]\n\ninclude::views.adoc[]\n\ninclude::actions.adoc[]\n\ninclude::flow-managed-persistence.adoc[]\n\ninclude::flow-security.adoc[]\n\ninclude::flow-inheritance.adoc[]\n\ninclude::system-setup.adoc[]\n\ninclude::spring-mvc.adoc[]\n\ninclude::spring-js.adoc[]\n\ninclude::spring-faces.adoc[]\n\ninclude::testing.adoc[]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/index.adoc", "title": "Spring Web Flow Reference Guide", "heading": "Preface", "heading_level": 2, "file_order": 6, "section_index": 1, "content_hash": "ef7c8564f301aebb4739b420769203a49b28e11e1298e3290fdc17553a396b98", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/index.adoc"}}
{"id": "sha256:8fe32ff1df22a95e7c57da36782866d1924ea659f89941dc0f853280f7dfbe0c", "content": "[[_manual_overview]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/overview.adoc", "title": "overview", "heading": "overview", "heading_level": 1, "file_order": 7, "section_index": 0, "content_hash": "8fe32ff1df22a95e7c57da36782866d1924ea659f89941dc0f853280f7dfbe0c", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/overview.adoc"}}
{"id": "sha256:e5ff89f685ff4835c698df17289b0855bf799b89b0425287e9da99f9853f0c97", "content": "This guide covers all aspects of Spring Web Flow.\nIt covers implementing flows in end-user applications and working with the feature set.\nIt also covers extending the framework and the overall architectural model.\n\n[[_system_requirements]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/overview.adoc", "title": "overview", "heading": "Overview", "heading_level": 2, "file_order": 7, "section_index": 1, "content_hash": "e5ff89f685ff4835c698df17289b0855bf799b89b0425287e9da99f9853f0c97", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/overview.adoc"}}
{"id": "sha256:adf9083f9d3622beabc0b546b8bb16c14b2d8679d7755bde2b608a31474936fc", "content": "* Java 17 or higher.\n* Spring Framework 7.0 baseline\n* Servlet 6.1", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/overview.adoc", "title": "overview", "heading": "Web Flow 4.0 Baseline", "heading_level": 3, "file_order": 7, "section_index": 2, "content_hash": "adf9083f9d3622beabc0b546b8bb16c14b2d8679d7755bde2b608a31474936fc", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/overview.adoc"}}
{"id": "sha256:cd6fc903e3d924aa699cf52b99765149473efc23a3ef044c023c3e6798c7f3fb", "content": "You can ask questions and interact on StackOverflow by using the designated tags.\nSee https://stackoverflow.com/questions/tagged/spring-webflow[Spring Web Flow at StackOverflow].\n\nYou can report bugs and make requests by using the project https://jira.spring.io/projects/SWF[issue tracker].\n\nYou can submit pull requests and work with the source code.\nSee https://github.com/spring-projects/spring-webflow[spring-webflow on GitHub].\n\n[[_jars_mvn_central]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/overview.adoc", "title": "overview", "heading": "Resources", "heading_level": 3, "file_order": 7, "section_index": 3, "content_hash": "cd6fc903e3d924aa699cf52b99765149473efc23a3ef044c023c3e6798c7f3fb", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/overview.adoc"}}
{"id": "sha256:bd9a5d96a46b1ce7fc22c97edbc29645bb7ace42c00820cd774ff0b07872a738", "content": "Each jar in the Web Flow distribution is available in the https://search.maven.org[Maven Central Repository].\nThis lets you easily integrate Web Flow into your application if you already use Maven as the build system for your web development project.\n\nTo access Web Flow jars from Maven Central, declare the following dependency in your pom:\n\n====\n[source,xml]\n----\n\n<dependency>\n <groupId>org.springframework.webflow</groupId>\n <artifactId>spring-webflow</artifactId>\n <version>x.y.z</version>\n</dependency>\n----\n====\n\nIf you use JavaServer Faces, declare the following dependency in your pom (includes the `spring-binding` and `spring-webflow` transitive dependencies):\n\n====\n[source,xml]\n----\n\n<dependency>\n <groupId>org.springframework.webflow</groupId>\n <artifactId>spring-faces</artifactId>\n <version>x.y.z</version>\n</dependency>\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/overview.adoc", "title": "overview", "heading": "Accessing Web Flow Artifacts from Maven Central", "heading_level": 3, "file_order": 7, "section_index": 4, "content_hash": "bd9a5d96a46b1ce7fc22c97edbc29645bb7ace42c00820cd774ff0b07872a738", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/overview.adoc"}}
{"id": "sha256:d23155c0655fbaf34a9ffd7cb745365051877ec27fb4db62378bce76ae17d3eb", "content": "Nightly snapshots of Web Flow development branches are available by using Maven.\nThese snapshot builds are useful for testing fixes you depend on in advance of the next release and provide a convenient way for you to provide feedback about whether a fix meets your needs.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/overview.adoc", "title": "overview", "heading": "Accessing Nightly Builds and Milestone Releases", "heading_level": 3, "file_order": 7, "section_index": 5, "content_hash": "d23155c0655fbaf34a9ffd7cb745365051877ec27fb4db62378bce76ae17d3eb", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/overview.adoc"}}
{"id": "sha256:22ffe9fd33a3849752ea9358c49dc8a8559a92b6e001e10d21e43b35e97725a6", "content": "For milestones and snapshots, you need to use the Spring Snapshot repository.\nAdd the following repository to your Maven pom.xml:\n\n====\n[source,xml]\n----\n\n<repository>\n <id>spring</id>\n <name>Spring Repository</name>\n <url>https://repo.spring.io/snapshot</url>\n</repository>\n----\n====\n\nThen you need to declare the following dependency:\n\n====\n[source,xml]\n----\n\n<dependency>\n <groupId>org.springframework.webflow</groupId>\n <artifactId>spring-webflow</artifactId>\n <version>x.y.z-SNAPSHOT</version>\n</dependency>\n----\n====\n\nAlso, if you use JSF, you need to add the following dependency:\n\n====\n[source,xml]\n----\n\n<dependency>\n <groupId>org.springframework.webflow</groupId>\n <artifactId>spring-faces</artifactId>\n <version>x.y.z.BUILD-SNAPSHOT</version>\n</dependency>\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/overview.adoc", "title": "overview", "heading": "Accessing Snapshots and Milestones with Maven", "heading_level": 4, "file_order": 7, "section_index": 6, "content_hash": "22ffe9fd33a3849752ea9358c49dc8a8559a92b6e001e10d21e43b35e97725a6", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/overview.adoc"}}
{"id": "sha256:b48914ffa44c8a61c6bcec3ec8727aa68a367cc1140b5d1f71458ebc14eb594b", "content": "[[_spring_faces]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "spring-faces", "heading_level": 1, "file_order": 8, "section_index": 0, "content_hash": "b48914ffa44c8a61c6bcec3ec8727aa68a367cc1140b5d1f71458ebc14eb594b", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:57c82cf58ddf6cedd83e8e6cbfb4bbaf700ef4ce2eadd0596824ec783cc82a52", "content": "Spring Web Flow provides a JavaServer Faces (JSF) integration that lets you use the JSF UI component model with Spring Web Flow controllers.\nWeb Flow also provides a Spring Security tag library for use in JSF environments.\nSee <<_spring_faces_security_taglib>> for more details.\n\nSpring Web Flow 4.0 requires JSF 4.1 or higher.\n\n[[_spring_faces_config_web.xml]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "JSF Integration", "heading_level": 2, "file_order": 8, "section_index": 1, "content_hash": "57c82cf58ddf6cedd83e8e6cbfb4bbaf700ef4ce2eadd0596824ec783cc82a52", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:02a3da4aa9e322a3b4dad409d2794500c150be4aaea88df13c2e7e0a78768e4a", "content": "The first step is to route requests to the `DispatcherServlet` in the `web.xml` file.\nIn the following example, we map all URLs that begin with `/spring/` to the servlet.\nThe servlet needs to be configured.\nAn `init-param` is used in the servlet to pass the `contextConfigLocation`.\nThis is the location of the Spring configuration for your web application.\nThe following listing shows the configuration details:\n\n====\n[source,xml]\n----\n<servlet>\n\t<servlet-name>Spring MVC Dispatcher Servlet</servlet-name>\n\t<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n\t<init-param>\n <param-name>contextConfigLocation</param-name>\n <param-value>/WEB-INF/web-application-config.xml</param-value>\n\t</init-param>\n\t<load-on-startup>1</load-on-startup>\n</servlet>\n\n<servlet-mapping>\n\t<servlet-name>Spring MVC Dispatcher Servlet</servlet-name>\n\t<url-pattern>/spring/*</url-pattern>\n</servlet-mapping>\n----\n====\n\nFor JSF to bootstrap correctly, the `FacesServlet` must be configured in `web.xml` as it normally would be, even though you generally do not need to route requests through it at all when you use JSF with Spring Web Flow.\nThe following listing shows the configuration details:\n\n====\n[source,xml]\n----\n<!-- Just here so the JSF implementation can initialize. *Not* used at runtime. -->\n<servlet>\n\t<servlet-name>Faces Servlet</servlet-name>\n\t<servlet-class>jakarta.faces.webapp.FacesServlet</servlet-class>\n\t<load-on-startup>1</load-on-startup>\n</servlet>\n\n<!-- Just here so the JSF implementation can initialize -->\n<servlet-mapping>\n\t<servlet-name>Faces Servlet</servlet-name>\n\t<url-pattern>*.faces</url-pattern>\n</servlet-mapping>\n----\n====\n\nThe use of Facelets instead of JSP typically requires the following element in `web.xml`:\n\n====\n[source,xml]\n----\n!-- Use JSF view templates saved as *.xhtml, for use with Facelets -->\n<context-param>\n\t<param-name>jakarta.faces.DEFAULT_SUFFIX</param-name>\n\t<param-value>.xhtml</param-value>\n</context-param>\n----\n====\n\n[[_spring_faces_webflow_config]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "Configuring `web.xml`", "heading_level": 3, "file_order": 8, "section_index": 2, "content_hash": "02a3da4aa9e322a3b4dad409d2794500c150be4aaea88df13c2e7e0a78768e4a", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:adf589a45a647685343af2b654bcd9eb955154651e6657f0ef104c29d64d1489", "content": "This section explains how to configure Web Flow with JSF.\nBoth Java and XML configuration are supported.\nThe following sample configuration is for Web Flow and JSF in XML:\n\n====\n[source,xml]\n----\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\txmlns:webflow=\"http://www.springframework.org/schema/webflow-config\"\n\txmlns:faces=\"http://www.springframework.org/schema/faces\"\n\tsi:schemaLocation=\"\n http://www.springframework.org/schema/beans\n https://www.springframework.org/schema/beans/spring-beans.xsd\n http://www.springframework.org/schema/webflow-config\n https://www.springframework.org/schema/webflow-config/spring-webflow-config.xsd\n http://www.springframework.org/schema/faces\n https://www.springframework.org/schema/faces/spring-faces.xsd\">\n\n\t<!-- Executes flows: the central entry point into the Spring Web Flow system -->\n\t<webflow:flow-executor id=\"flowExecutor\">\n <webflow:flow-execution-listeners>\n <webflow:listener ref=\"facesContextListener\"/>\n </webflow:flow-execution-listeners>\n\t</webflow:flow-executor>\n\n\t<!-- The registry of executable flow definitions -->\n\t<webflow:flow-registry id=\"flowRegistry\" flow-builder-services=\"flowBuilderServices\" base-path=\"/WEB-INF\">\n <webflow:flow-location-pattern value=\"**/*-flow.xml\" />\n\t</webflow:flow-registry>\n\n\t<!-- Configures the Spring Web Flow JSF integration -->\n\t<faces:flow-builder-services id=\"flowBuilderServices\" />\n\n\t<!-- A listener maintain one FacesContext instance per Web Flow request. -->\n\t<bean id=\"facesContextListener\"\n class=\"org.springframework.faces.webflow.FlowFacesContextLifecycleListener\" />\n\n</beans>\n----\n====\n\nThe following example does the same in Java configuration:\n\n====\n[source,java]\n----\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.faces.config.*;\n\n@Configuration\npublic class WebFlowConfig extends AbstractFacesFlowConfiguration {\n\n @Bean\n public FlowExecutor flowExecutor() {\n return getFlowExecutorBuilder(flowRegistry())\n .addFlowExecutionListener(new FlowFacesContextLifecycleListener())\n .build();\n }\n\n @Bean\n public FlowDefinitionRegistry flowRegistry() {\n return getFlowDefinitionRegistryBuilder()\n .setBasePath(\"/WEB-INF\")\n .addFlowLocationPattern(\"**/*-flow.xml\").build();\n }\n}\n----\n====\n\nThe main points are the installation of a `FlowFacesContextLifecycleListener` that manages a single `FacesContext` for the duration of a Web Flow request and the use of the `flow-builder-services` element from the `faces` custom namespace to configure rendering for a JSF environment.\n\nIn a JSF environment, you also need the following Spring MVC-related configuration:\n\n====\n[source,xml]\n----\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xmlns:faces=\"http://www.springframework.org/schema/faces\"\n xsi:schemaLocation=\"\n http://www.springframework.org/schema/beans\n https://www.springframework.org/schema/beans/spring-beans.xsd\n http://www.springframework.org/schema/faces\n https://www.springframework.org/schema/faces/spring-faces.xsd\">\n\n\t<faces:resources />\n\n\t<bean class=\"org.springframework.faces.webflow.JsfFlowHandlerAdapter\">\n <property name=\"flowExecutor\" ref=\"flowExecutor\" />\n\t</bean>\n\n</beans>\n----\n====\n\nThe `resources` custom namespace element delegates JSF resource requests to the JSF resource API.\nThe `JsfFlowHandlerAdapter` is a replacement for the `FlowHandlerAdapter` normally used with Web Flow.\nThis adapter initializes itself with a `JsfAjaxHandler` instead of the `SpringJavaScriptAjaxHandler`.\n\nWhen you use Java configuration, the `AbstractFacesFlowConfiguration` base class automatically registers `JsfResourceRequestHandler`, so there is nothing further to do.\n\n[[_spring_faces_managed_beans]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "Configuring Web Flow for Use with JSF", "heading_level": 3, "file_order": 8, "section_index": 3, "content_hash": "adf589a45a647685343af2b654bcd9eb955154651e6657f0ef104c29d64d1489", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:357d99f8484521d4f7f33dba20cda0a292cb1e3c7243ce4f178e457f9c70827f", "content": "When you use JSF with Spring Web Flow, you can completely replace the JSF managed bean facility with a combination of Web Flow managed variables and Spring managed beans.\nIt gives you a good deal more control over the lifecycle of your managed objects with well-defined hooks for initialization and execution of your domain model.\nAdditionally, since you presumably already use Spring for your business layer, it reduces the conceptual overhead of having to maintain two different managed bean models.\n\nIf you do pure JSF development, you may quickly find that request scope is not long-lived enough for storing conversational model objects that drive complex event-driven views.\nIn JSF, the usual option is to begin putting things into session scope, with the extra burden of needing to clean up the objects before progressing to another view or functional area of the application.\nWhat is really needed is a managed scope that is somewhere between request and session scope.\nJSF provides flash and view scopes that can be accessed programmatically through `UIViewRoot.getViewMap()`.\nSpring Web Flow provides access to flash, view, flow, and conversation scopes.\nThese scopes are seamlessly integrated through JSF variable resolvers and work the same in all JSF applications.\n\n[[_spring_faces_flow_variables]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "Replacing the JSF Managed Bean Facility", "heading_level": 3, "file_order": 8, "section_index": 4, "content_hash": "357d99f8484521d4f7f33dba20cda0a292cb1e3c7243ce4f178e457f9c70827f", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:14b6f392d359ea107c2d0e52566ed6d0949d8d48160c8f1d8d6924db5c5dcdb9", "content": "The easiest and most natural way to declare and manage the model is through the use of <<_flow_variables,flow variables>>.\nYou can declare these variables at the beginning of the flow, as follows:\n\n====\n[source,xml]\n----\n<var name=\"searchCriteria\" class=\"com.mycompany.myapp.hotels.search.SearchCriteria\"/>\n----\n====\n\nYou can then reference this variable in one of the flow's JSF view templates through EL, as follows:\n\n====\n[source,xml]\n----\n<h:inputText id=\"searchString\" value=\"#{searchCriteria.searchString}\"/>\n----\n====\n\nNote that you do not need to prefix the variable with its scope when referencing it from the template (though you can do so if you need to be more specific).\nAs with standard JSF beans, all available scopes are searched for a matching variable, so you could change the scope of the variable in your flow definition without having to modify the EL expressions that reference it.\n\nYou can also define view instance variables that are scoped to the current view and that automatically get cleaned up upon transitioning to another view.\nThis is quite useful with JSF, as views are often constructed to handle multiple in-page events across many requests before transitioning to another view.\n\nTo define a view instance variable, you can use the `var` element inside a `view-state` definition, as follows:\n\n====\n[source,xml]\n----\n<view-state id=\"enterSearchCriteria\">\n\t<var name=\"searchCriteria\" class=\"com.mycompany.myapp.hotels.search.SearchCriteria\"/>\n</view-state>\n----\n====\n\n[[_spring_faces_spring_beans]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "Using Flow Variables", "heading_level": 4, "file_order": 8, "section_index": 5, "content_hash": "14b6f392d359ea107c2d0e52566ed6d0949d8d48160c8f1d8d6924db5c5dcdb9", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:d5271bff62c6f05a1d962135eba8ab25fdf6bd3542a8a5f1f67a623abe728cff", "content": "Though defining autowired flow instance variables provides nice modularization and readability, occasions may arise where you want to use the other capabilities of the Spring container, such as Aspect-oriented Programming (AOP).\nIn these cases, you can define a bean in your Spring `ApplicationContext` and give it a specific web flow scope, as follows:\n\n====\n[source,xml]\n----\n<bean id=\"searchCriteria\" class=\"com.mycompany.myapp.hotels.search.SearchCriteria\" scope=\"flow\"/>\n----\n====\n\nThe major difference with this approach is that the bean is not fully initialized until it is first accessed through an EL expression.\nThis sort of lazy instantiation through EL is quite similar to how JSF-managed beans are typically allocated.\n\n[[_faces_manipulating_model]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "Using Scoped Spring Beans", "heading_level": 4, "file_order": 8, "section_index": 6, "content_hash": "d5271bff62c6f05a1d962135eba8ab25fdf6bd3542a8a5f1f67a623abe728cff", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:f09a483f28bd9ef27cef444cb312af7dd590b63f8168fa3fbe7e354a278cceaa", "content": "The need to initialize the model before view rendering (such as by loading persistent entities from a database) is quite common, but JSF itself does not provide any convenient hooks for such initialization.\nThe flow definition language provides a natural facility for this through its <<_flow_actions,actions>> .\nSpring Web Flow provides some extra conveniences for converting the outcome of an action into a JSF-specific data structure.\nThe following example shows how to do so:\n\n====\n[source,xml]\n----\n<on-render>\n\t<evaluate expression=\"bookingService.findBookings(currentUser.name)\"\n result=\"viewScope.bookings\" result-type=\"dataModel\" />\n</on-render>\n----\n====\n\nThe preceding example takes the result of the `bookingService.findBookings` method and wraps it in a custom JSF DataModel so that the list can be used in a standard JSF DataTable component, as follows:\n\n====\n[source,xml]\n----\n<h:dataTable id=\"bookings\" styleClass=\"summary\" value=\"#{bookings}\" var=\"booking\"\n rendered=\"#{bookings.rowCount > 0}\">\n\t<h:column>\n <f:facet name=\"header\">Name</f:facet>\n #{booking.hotel.name}\n\t</h:column>\n\t<h:column>\n\t<f:facet name=\"header\">Confirmation number</f:facet>\n #{booking.id}\n </h:column>\n\t<h:column>\n <f:facet name=\"header\">Action</f:facet>\n <h:commandLink id=\"cancel\" value=\"Cancel\" action=\"cancelBooking\" />\n\t</h:column>\n</h:dataTable>\n----\n====\n\n[[_faces_data_model_implementations]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "Manipulating the Model", "heading_level": 4, "file_order": 8, "section_index": 7, "content_hash": "f09a483f28bd9ef27cef444cb312af7dd590b63f8168fa3fbe7e354a278cceaa", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:0f48e54befb24111cba23a1e835f89ccc951c2688f49509a3288e75020f8a236", "content": "In the example shown in the preceding section, `result-type=\"dataModel\"` results in the wrapping of `List<Booking>` with a custom `DataModel` type.\nThe custom `DataModel` provides extra conveniences, such as being serializable for storage beyond request scope as well as access to the currently selected row in EL expressions.\nFor example, on postback from a view where the action event was fired by a component within a `DataTable`, you can take action on the selected row's model instance, as follows:\n\n====\n[source,xml]\n----\n<transition on=\"cancelBooking\">\n\t<evaluate expression=\"bookingService.cancelBooking(bookings.selectedRow)\" />\n</transition>\n----\n====\n\nSpring Web Flow provides two custom DataModel types: `OneSelectionTrackingListDataModel` and `ManySelectionTrackingListDataModel`.\nAs the names indicate, they keep track of one or multiple selected rows.\nThis is done with the help of a `SelectionTrackingActionListener` listener, which responds to JSF action events and invokes the appropriate methods on the `SelectionAware` data models to record the currently clicked row.\n\nTo understand how this is configured, keep in mind that the `FacesConversionService` registers a `DataModelConverter` against the alias `dataModel` on startup.\nWhen `result-type=\"dataModel\"` is used in a flow definition, it causes the `DataModelConverter` to be used.\nThe converter then wraps the given `List` with an instance of `OneSelectionTrackingListDataModel`.\nTo use the `ManySelectionTrackingListDataModel`, you need to register your own custom converter.\n\n[[_spring_faces_event_handling]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "Data Model Implementations", "heading_level": 4, "file_order": 8, "section_index": 8, "content_hash": "0f48e54befb24111cba23a1e835f89ccc951c2688f49509a3288e75020f8a236", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:0436e66ae942af7dcf83fd32521b67216e0ee75df87c84a292cf8a7aff681b28", "content": "Spring Web Flow lets you handle JSF action events in a decoupled way, requiring no direct dependencies in your Java code on JSF APIs.\nIn fact, these events can often be handled completely in the flow definition language without requiring any custom Java action code at all.\nThis allows for a more agile development process, since the artifacts being manipulated in wiring up events (JSF view templates and SWF flow definitions) are instantly refreshable without requiring a build and re-deploy of the whole application.\n\n[[_spring_faces_in_page_events]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "Handling JSF Events With Spring Web Flow", "heading_level": 3, "file_order": 8, "section_index": 9, "content_hash": "0436e66ae942af7dcf83fd32521b67216e0ee75df87c84a292cf8a7aff681b28", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:0b824bc9c0569e5aa569d7dba108ddb524e8838f4d450f9dcc59124d466ae404", "content": "A simple but common case in JSF is the need to signal an event that causes manipulation of the model in some way and then redisplays the same view to reflect the changed state of the model.\nThe flow definition language has special support for this in the `transition` element.\n\nA good example of this is a table of paged list results.\nSuppose you want to be able to load and display only a portion of a large result list and let the user page through the results.\nThe initial `view-state` definition to load and display the list would be as follows:\n\n====\n[source,xml]\n----\n\n<view-state id=\"reviewHotels\">\n\t<on-render>\n <evaluate expression=\"bookingService.findHotels(searchCriteria)\"\n result=\"viewScope.hotels\" result-type=\"dataModel\" />\n\t</on-render>\n</view-state>\n----\n====\n\nYou can construct a JSF DataTable that displays the current `hotels` list and then place a `More Results` link below the table, as follows:\n\n====\n[source,xml]\n----\n<h:commandLink id=\"nextPageLink\" value=\"More Results\" action=\"next\"/>\n----\n====\n\nThis `commandLink` signals a `next` event from its `action` attribute.\nYou can then handle the event by adding to the `view-state` definition, as follows:\n\n====\n[source,xml]\n----\n<view-state id=\"reviewHotels\">\n\t<on-render>\n <evaluate expression=\"bookingService.findHotels(searchCriteria)\"\n result=\"viewScope.hotels\" result-type=\"dataModel\" />\n\t</on-render>\n\t<transition on=\"next\">\n <evaluate expression=\"searchCriteria.nextPage()\" />\n\t</transition>\n</view-state>\n----\n====\n\nHere, you handle the `next` event by incrementing the page count on the `searchCriteria` instance.\nThe `on-render` action is then called again with the updated criteria, which causes the next page of results to be loaded into the `DataModel`.\nThe same view is re-rendered, since there was no `to` attribute on the `transition` element, and the changes in the model are reflected in the view.\n\n[[_spring_faces_action_events]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "Handling JSF In-page Action Events", "heading_level": 4, "file_order": 8, "section_index": 10, "content_hash": "0b824bc9c0569e5aa569d7dba108ddb524e8838f4d450f9dcc59124d466ae404", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:4db4fd923129e72ca94536e372140cfa7d865d63e35a4d011d6ea25a7ddeff2b", "content": "The next logical level beyond in-page events are events that require navigation to another view, with some manipulation of the model along the way.\nAchieving this with pure JSF would require adding a navigation rule to `faces-config.xml` and likely some intermediary Java code in a JSF managed bean (both tasks requiring a re-deploy). With the flow definition language, you can handle such a case concisely in one place in a way similar to how in-page events are handled.\n\nContinuing with our use case of manipulating a paged list of results, suppose we want each row in the displayed `DataTable` to contain a link to a detail page for that row instance.\nYou can add a column to the table containing the following `commandLink` component, as follows:\n\n====\n[source,xml]\n----\n<h:commandLink id=\"viewHotelLink\" value=\"View Hotel\" action=\"select\"/>\n----\n====\n\nThis raises the `select` event, which you can then handle by adding another `transition` element to the existing `view-state`, as follows:\n\n====\n[source,xml]\n----\n<view-state id=\"reviewHotels\">\n\t<on-render>\n <evaluate expression=\"bookingService.findHotels(searchCriteria)\"\n result=\"viewScope.hotels\" result-type=\"dataModel\" />\n\t</on-render>\n\t<transition on=\"next\">\n <evaluate expression=\"searchCriteria.nextPage()\" />\n\t</transition>\n\t<transition on=\"select\" to=\"reviewHotel\">\n <set name=\"flowScope.hotel\" value=\"hotels.selectedRow\" />\n\t</transition>\n</view-state>\n----\n====\n\nHere, the `select` event is handled by pushing the currently selected hotel instance from the `DataTable` into flow scope so that it may be referenced by the `reviewHotel` `view-state` .\n\n[[_spring_faces_model_validation]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "Handling JSF Action Events", "heading_level": 4, "file_order": 8, "section_index": 11, "content_hash": "4db4fd923129e72ca94536e372140cfa7d865d63e35a4d011d6ea25a7ddeff2b", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:a2b44f619bfe5cad5db803243e03564367eb7284a59281d2681922de55feced4", "content": "JSF provides useful facilities for validating input at field-level before changes are applied to the model.\nHowever, when you need to then perform more complex validation at the model-level after the updates have been applied, you are generally left with having to add more custom code to your JSF action methods in the managed bean.\nValidation of this sort is something that is generally a responsibility of the domain model itself, but it is difficult to get any error messages propagated back to the view without introducing an undesirable dependency on the JSF API in your domain layer.\n\nWith Web Flow, you can use the generic and low-level `MessageContext` in your business code, and any messages added there are then available to the `FacesContext` at render time.\n\nFor example, suppose you have a view where the user enters the necessary details to complete a hotel booking, and you need to ensure the `Check In` and `Check Out` dates adhere to a given set of business rules.\nYou can invoke such model-level validation from a `transition` element, as follows:\n\n====\n[source,xml]\n----\n<view-state id=\"enterBookingDetails\">\n\t<transition on=\"proceed\" to=\"reviewBooking\">\n <evaluate expression=\"booking.validateEnterBookingDetails(messageContext)\" />\n\t</transition>\n</view-state>\n----\n====\n\nHere, the `proceed` event is handled by invoking a model-level validation method on the booking instance, passing the generic `MessageContext` instance so that messages may be recorded.\nThe messages can then be displayed along with any other JSF messages in the `h:messages` component.\n\n[[_spring_faces_ajax_events_jsf2]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "Performing Model Validation", "heading_level": 4, "file_order": 8, "section_index": 12, "content_hash": "a2b44f619bfe5cad5db803243e03564367eb7284a59281d2681922de55feced4", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:0e204b238eb5debce05b808249e43822f2171e8e7a30d8cf1517aed5ed39a6c2", "content": "JSF provides built-in support for sending Ajax requests and performing partial processing and rendering on the server-side.\nYou can specify a list of IDs for partial rendering through the `<f:ajax>` facelets tag.\n\nIn Spring Web Flow, you also have the option to specify the IDs to use for partial rendering on the server side with the render action, as follows:\n\n====\n[source,xml]\n----\n<view-state id=\"reviewHotels\">\n\t<on-render>\n <evaluate expression=\"bookingService.findHotels(searchCriteria)\"\n result=\"viewScope.hotels\" result-type=\"dataModel\" />\n\t</on-render>\n\t<transition on=\"next\">\n <evaluate expression=\"searchCriteria.nextPage()\" />\n <render fragments=\"hotels:searchResultsFragment\" />\n\t</transition>\n</view-state>\n----\n====\n\n[[_spring_faces_embedded_mode]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "Handling Ajax Events In JSF", "heading_level": 4, "file_order": 8, "section_index": 13, "content_hash": "0e204b238eb5debce05b808249e43822f2171e8e7a30d8cf1517aed5ed39a6c2", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:86ed711d072fd715257cbdc735d76685fd4a036ba828596d1650c1ca05d55b96", "content": "By default, when a flow enters a view state, it runs a client-side redirect before rendering the view.\nThis approach is known as \"`POST-REDIRECT-GET`\".\nIt has the advantage of separating the form processing for one view from the rendering of the next view.\nAs a result, the browser Back and Refresh buttons work seamlessly without causing any browser warnings.\n\nNormally, the client-side redirect is transparent from a user's perspective.\nHowever, there are situations where \"`POST-REDIRECT-GET`\" may not bring the same benefits.\nFor example, it may sometimes be useful to embed a flow on a page and drive it with Ajax requests, to refresh only the area of the page where the flow is rendered.\nNot only is it unnecessary to use client-side redirects in this case, it is also not the desired behavior with regards to keeping the surrounding content of the page intact.\n\nTo indicate a flow should execute in \"`page embedded`\" mode, you can pass an extra flow input attribute called `mode` with a value of `embedded`. The following example shows a top-level container flow invoking a sub-flow in an embedded mode:\n\n====\n[source,xml]\n----\n<subflow-state id=\"bookHotel\" subflow=\"booking\">\n\t<input name=\"mode\" value=\"'embedded'\"/>\n</subflow-state>\n----\n====\n\nWhen launched in \"`page embedded`\" mode, the sub-flow does not issue flow execution redirects during Ajax requests.\n\nFor examples of an embedded flow, see the `webflow-primefaces-showcase` project.\nYou can check out the source code locally, build it as you would a Maven project, and import it into Eclipse or another IDE, as follows:\n\n====\n[source,xml]\n----\ncd some-directory\ngit clone https://github.com/spring-projects/spring-webflow-samples.git\ncd primefaces-showcase\nmvn package\n# import into Eclipse\n----\n====\n\nThe specific example you need to look at is under the \"`Advanced Ajax`\" tab and is called \"`Top Flow with Embedded Sub-Flow`\".\n\n[[_spring_faces_redirect_in_same_state]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "Embedding a Flow On a Page", "heading_level": 3, "file_order": 8, "section_index": 14, "content_hash": "86ed711d072fd715257cbdc735d76685fd4a036ba828596d1650c1ca05d55b96", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:61eda2d5c2c6975196f66c9f40204e5cfa8585d414f3fb0fbafa804a1e92d8ae", "content": "By default, Web Flow does a client-side redirect even it it remains in the same view state, as long as the current request is not an Ajax request.\nThis is quite useful after form validation failures (for example).\nIf the user hits Refresh or Back, they do not see any browser warnings.\nThey would if the Web Flow did not do a redirect.\n\nThis can lead to a problem specific to JSF environments where a specific Sun Mojarra listener component caches the `FacesContext`, assuming the same instance is available throughout the JSF lifecycle.\nIn Web Flow, however, the render phase is temporarily put on hold and a client-side redirect is executed.\n\nThe default behavior of Web Flow is desirable and JSF applications are unlikely to experience the issue.\nThis is because Ajax is often enabled as the default in JSF component libraries and Web Flow does not redirect during Ajax requests.\nHowever, if you experience this issue, you can disable client-side redirects within the same view, as follows:\n\n====\n[source,xml]\n----\n<webflow:flow-executor id=\"flowExecutor\">\n\t<webflow:flow-execution-attributes>\n <webflow:redirect-in-same-state value=\"false\"/>\n\t</webflow:flow-execution-attributes>\n</webflow:flow-executor>\n----\n====\n\n[[_spring_faces_file_upload]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "Redirect In the Same State", "heading_level": 3, "file_order": 8, "section_index": 15, "content_hash": "61eda2d5c2c6975196f66c9f40204e5cfa8585d414f3fb0fbafa804a1e92d8ae", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:32be6db2dd865526a5b514e162585c5ca2215ccb6e49f2d6679a63fe5c7d73a4", "content": "Most JSF component providers include some form of file upload component.\nGenerally, when working with these components, JSF must take complete control of parsing multi-part requests and Spring MVC's `MultipartResolver` cannot be used.\n\nSpring Web Flow has been tested with file upload components from PrimeFaces.\nCheck the documentation of your JSF component library for other providers to see how to configure file upload.\n\nGenerally, you'll need to enable multipart support in the Servlet container,\neither by adding a \"multipart-config\" element to the the `DispatcherServlet` declaration in web.xml,\nor by using a `jakarta.servlet.MultipartConfigElement` in programmatic servlet registration\n\n[[_spring_faces_security_taglib]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "Handling File Uploads with JSF", "heading_level": 3, "file_order": 8, "section_index": 16, "content_hash": "32be6db2dd865526a5b514e162585c5ca2215ccb6e49f2d6679a63fe5c7d73a4", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:3bbf2253e7d2e8e82ebdec5807b23dfe89afbd5d69a9a890b5ba64ec76781f94", "content": "To use the library, you need to create a `taglib.xml` file and register it in `web.xml`.\n\nYou need to create a file called `/WEB-INF/springsecurity.taglib.xml` with the following content:\n\n====\n[source,xml]\n----\n<?xml version=\"1.0\"?>\n<!DOCTYPE facelet-taglib PUBLIC\n\"-//Sun Microsystems, Inc.//DTD Facelet Taglib 1.0//EN\"\n\"https://java.sun.com/dtd/facelet-taglib_1_0.dtd\">\n<facelet-taglib>\n\t<namespace>http://www.springframework.org/security/tags</namespace>\n\t<tag>\n <tag-name>authorize</tag-name>\n <handler-class>org.springframework.faces.security.FaceletsAuthorizeTagHandler</handler-class>\n\t</tag>\n\t<function>\n <function-name>areAllGranted</function-name>\n <function-class>org.springframework.faces.security.FaceletsAuthorizeTagUtils</function-class>\n <function-signature>boolean areAllGranted(java.lang.String)</function-signature>\n\t</function>\n\t<function>\n <function-name>areAnyGranted</function-name>\n <function-class>org.springframework.faces.security.FaceletsAuthorizeTagUtils</function-class>\n <function-signature>boolean areAnyGranted(java.lang.String)</function-signature>\n\t</function>\n\t<function>\n <function-name>areNotGranted</function-name>\n <function-class>org.springframework.faces.security.FaceletsAuthorizeTagUtils</function-class>\n <function-signature>boolean areNotGranted(java.lang.String)</function-signature>\n\t</function>\n\t<function>\n <function-name>isAllowed</function-name>\n <function-class>org.springframework.faces.security.FaceletsAuthorizeTagUtils</function-class>\n <function-signature>boolean isAllowed(java.lang.String, java.lang.String)</function-signature>\n\t</function>\n</facelet-taglib>\n----\n====\n\nNext, you need to register the taglib file (in the preceding listing) in `web.xml`, as follows:\n\n====\n[source,xml]\n----\n<context-param>\n\t<param-name>jakarta.faces.FACELETS_LIBRARIES</param-name>\n\t<param-value>/WEB-INF/springsecurity.taglib.xml</param-value>\n</context-param>\n----\n====\n\nNow you are ready to use the tag library in your views.\nYou can use the authorize tag to conditionally include nested content, as follows:\n\n====\n[source,xml]\n----\n<!DOCTYPE composition PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<ui:composition xmlns=\"http://www.w3.org/1999/xhtml\"\n\txmlns:ui=\"http://java.sun.com/jsf/facelets\"\n\txmlns:h=\"http://java.sun.com/jsf/html\"\n\txmlns:sec=\"http://www.springframework.org/security/tags\">\n\n\t<sec:authorize ifAllGranted=\"ROLE_FOO, ROLE_BAR\">\n Lorem ipsum dolor sit amet\n\t</sec:authorize>\n\n\t<sec:authorize ifNotGranted=\"ROLE_FOO, ROLE_BAR\">\n Lorem ipsum dolor sit amet\n\t</sec:authorize>\n\n\t<sec:authorize ifAnyGranted=\"ROLE_FOO, ROLE_BAR\">\n Lorem ipsum dolor sit amet\n\t</sec:authorize>\n\n</ui:composition>\n----\n====\n\nYou can also use one of several EL functions in the rendered or other attribute of any JSF component, as follows:\n\n====\n[source,xml]\n----\n<!DOCTYPE composition PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n<ui:composition xmlns=\"http://www.w3.org/1999/xhtml\"\n\txmlns:ui=\"http://java.sun.com/jsf/facelets\"\n\txmlns:h=\"http://java.sun.com/jsf/html\"\n\txmlns:sec=\"http://www.springframework.org/security/tags\">\n\n\t<!-- Rendered only if user has all of the listed roles -->\n\t<h:outputText value=\"Lorem ipsum dolor sit amet\" rendered=\"#{sec:areAllGranted('ROLE_FOO, ROLE_BAR')}\"/>\n\n\t<!-- Rendered only if user does not have any of the listed roles -->\n\t<h:outputText value=\"Lorem ipsum dolor sit amet\" rendered=\"#{sec:areNotGranted('ROLE_FOO, ROLE_BAR')}\"/>\n\n\t<!-- Rendered only if user has any of the listed roles -->\n\t<h:outputText value=\"Lorem ipsum dolor sit amet\" rendered=\"#{sec:areAnyGranted('ROLE_FOO, ROLE_BAR')}\"/>\n\n\t<!-- Rendered only if user has access to given HTTP method/URL as defined in Spring Security configuration -->\n\t<h:outputText value=\"Lorem ipsum dolor sit amet\" rendered=\"#{sec:isAllowed('/secured/foo', 'POST')}\"/>\n\n</ui:composition>\n----\n====\n\n[[_spring_faces_component_libraries]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "Using the Spring Security Facelets Tag Library", "heading_level": 3, "file_order": 8, "section_index": 17, "content_hash": "3bbf2253e7d2e8e82ebdec5807b23dfe89afbd5d69a9a890b5ba64ec76781f94", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:fdfb5e21aa49c025373549bda2f23c4dc50cb2a469d78550588d644cd5ca15d8", "content": "The Spring Web Flow JSF integration strives to be compatible with any third-party JSF component library.\nBy honoring all of the standard semantics of the JSF specification within the SWF-driven JSF lifecycle, third-party libraries in general should \"`just work`\". The main thing to remember is that configuration in `web.xml` changes slightly, since Web Flow requests are not routed through the standard `FacesServlet`.\nTypically, anything that is traditionally mapped to the `FacesServlet` should be mapped to the Spring `DispatcherServlet` instead.\n(You can also map to both if, for example, you need to migrate a legacy JSF application page-by-page.)", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-faces.adoc", "title": "spring-faces", "heading": "Third-Party Component Library Integration", "heading_level": 3, "file_order": 8, "section_index": 18, "content_hash": "fdfb5e21aa49c025373549bda2f23c4dc50cb2a469d78550588d644cd5ca15d8", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-faces.adoc"}}
{"id": "sha256:8a8bd55955a42e1918f8b25260c46c89803aa3840d32e99ff008abfeee6859de", "content": "[[_spring_js]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-js.adoc", "title": "spring-js", "heading": "spring-js", "heading_level": 1, "file_order": 9, "section_index": 0, "content_hash": "8a8bd55955a42e1918f8b25260c46c89803aa3840d32e99ff008abfeee6859de", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-js.adoc"}}
{"id": "sha256:ebab66e97b8fd22ed70a8382d84e459f937f82a9fa2b1638d61c09a2b2970fe9", "content": "The `spring-js-resources` module is a legacy module that is no longer recommended for use but is provided still as an optional module for backwards compatibility.\nIts original aim was to provide a client-side programming model for progressively enhancing a web page with behavior and Ajax remoting.\n\nUse of the Spring JS API is demonstrated in the https://github.com/spring-projects/spring-webflow-samples[samples repository].\n\n[[_spring_js_resource_servlet]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-js.adoc", "title": "spring-js", "heading": "Spring JavaScript Quick Reference", "heading_level": 2, "file_order": 9, "section_index": 1, "content_hash": "ebab66e97b8fd22ed70a8382d84e459f937f82a9fa2b1638d61c09a2b2970fe9", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-js.adoc"}}
{"id": "sha256:801a4a815881a6fb9a4f472469c8f445fea3484974eaeaa3c55bc912d108abb2", "content": "The Spring Framework provides a mechanism for serving static resources.\nSee the https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-config-static-resources[Spring Framework documentation]).\nWith the new `<mvc:resources>` element, resource requests (`.js`, `.css`, and others) are handled by the `DispatcherSevlet`.\nThe following example shows how to configure the module in XML (Java configuration is also available):\n\n====\n[source,xml]\n----\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\txmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n\txsi:schemaLocation=\"http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd\n http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd\">\n\n\t<mvc:annotation-driven/>\n\n\t<mvc:resources mapping=\"/resources/**\" location=\"/, classpath:/META-INF/web-resources/\" />\n\n\t...\n\n</beans>\n----\n====\n\nThis maps incoming requests for `/resources` to resources found under `/META-INF/web-resources` on the classpath.\nThat is where Spring JavaScript resources are bundled.\nHowever, you can modify the location attribute in the preceding configuration to serve resources from any location relative to the classpath or web application.\n\nNote that the full resource URL depends on how your `DispatcherServlet` is mapped.\nIn the `mvc-booking` sample, we have chosen to map it with the default servlet mapping (`/`), as follows:\n\n====\n[source,xml]\n----\n<servlet>\n\t<servlet-name>DispatcherServlet</servlet-name>\n\t<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n</servlet>\n\n<servlet-mapping>\n\t<servlet-name>DispatcherServlet</servlet-name>\n\t<url-pattern>/</url-pattern>\n</servlet-mapping>\n----\n====\n\nThat means the full URL to load `Spring.js` is `/myapp/resources/spring/Spring.js`.\nIf your `DispatcherServlet` is instead mapped to `/main/*`, the full URL is `/myapp/main/resources/spring/Spring.js`.\n\nWhen you use the default servlet mapping, you should also add the following configuration to your Spring MVC configuration, which ensures that any resource requests not handled by your Spring MVC mappings are delegated back to the servlet container:\n\n====\n[source,xml]\n----\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\txmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n\txsi:schemaLocation=\"http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd\n http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd\">\n\n\t...\n\n\t<mvc:default-servlet-handler />\n\n</beans>\n----\n====\n\n[[_spring_js_includes]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-js.adoc", "title": "spring-js", "heading": "Serving Javascript Resources", "heading_level": 3, "file_order": 9, "section_index": 2, "content_hash": "801a4a815881a6fb9a4f472469c8f445fea3484974eaeaa3c55bc912d108abb2", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-js.adoc"}}
{"id": "sha256:e08fc2b6094fb83f318faf113a1e6a208358b713edee3b6988921ba2ac4cafde", "content": "Spring JS is designed such that an implementation of its API can be built for any of the popular Javascript toolkits.\nThe initial implementation of Spring.js builds on the Dojo toolkit.\n\nUsing Spring Javascript in a page requires including the underlying toolkit as normal, the `Spring.js` base interface file, and the `Spring-(library implementation).js` file for the underlying toolkit.\nAs an example, the following includes obtain the Dojo implementation of Spring.js by using the `ResourceServlet`:\n\n====\n[source,xml]\n----\n<script type=\"text/javascript\" src=\"<c:url value=\"/resources/dojo/dojo.js\" />\"> </script>\n<script type=\"text/javascript\" src=\"<c:url value=\"/resources/spring/Spring.js\" />\"> </script>\n<script type=\"text/javascript\" src=\"<c:url value=\"/resources/spring/Spring-Dojo.js\" />\"> </script>\n----\n====\n\nWhen using the widget system of an underlying library, you must also (typically) include some CSS resources to obtain the desired look and feel.\nFor the `booking-mvc` reference application, Dojo's `tundra.css` is included:\n\n====\n[source,xml]\n----\n<link type=\"text/css\" rel=\"stylesheet\" href=\"<c:url value=\"/resources/dijit/themes/tundra/tundra.css\" />\" />\n----\n====\n\n[[_spring_js_decorations]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-js.adoc", "title": "spring-js", "heading": "Including Spring Javascript in a Page", "heading_level": 3, "file_order": 9, "section_index": 3, "content_hash": "e08fc2b6094fb83f318faf113a1e6a208358b713edee3b6988921ba2ac4cafde", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-js.adoc"}}
{"id": "sha256:919f045a670c91720c91d06e607f6d337b1a56b2b0f0977ddcb49b282b3587f3", "content": "A central concept in Spring Javascript is the notion of applying decorations to existing DOM nodes.\nThis technique is used to progressively enhance a web page such that the page is still functional in a less-capable browser.\nThe `addDecoration` method is used to apply decorations.\n\nThe following example enhances a Spring MVC `<form:input>` tag with rich suggestion behavior:\n\n====\n[source,xml]\n----\n<form:input id=\"searchString\" path=\"searchString\"/>\n<script type=\"text/javascript\">\n\tSpring.addDecoration(new Spring.ElementDecoration({\n elementId: \"searchString\",\n widgetType: \"dijit.form.ValidationTextBox\",\n widgetAttrs: { promptMessage : \"Search hotels by name, address, city, or zip.\" }}));\n</script>\n----\n====\n\nThe `ElementDecoration` call is used to apply rich widget behavior to an existing DOM node.\nThis decoration type does not aim to completely hide the underlying toolkit, so the toolkit's native widget type and attributes are used directly.\nThis approach lets you use a common decoration model to integrate any widget from the underlying toolkit in a consistent manner.\nSee the `booking-mvc` reference application for more examples of applying decorations to do things from suggestions to client-side validation.\n\nWhen using the `ElementDecoration` to apply widgets that have rich validation behavior, a common need is to prevent the form from being submitted to the server until validation passes.\nThis can be done with `ValidateAllDecoration`, as follows:\n\n====\n[source,xml]\n----\n<input type=\"submit\" id=\"proceed\" name=\"_eventId_proceed\" value=\"Proceed\" />\n<script type=\"text/javascript\">\n\tSpring.addDecoration(new Spring.ValidateAllDecoration({ elementId:'proceed', event:'onclick' }));\n</script>\n----\n====\n\nThis decorates the \"`Proceed`\" button with a special `onclick` event handler that fires the client side validators and does not let the form be submitted until they pass successfully.\n\n`AjaxEventDecoration` applies a client-side event listener that fires a remote Ajax request to the server.\nIt also auto-registers a callback function to link in the response.\nThe following example uses `AjaxEventDecoration`:\n\n====\n[source,xml]\n----\n<a id=\"prevLink\" href=\"search?searchString=${criteria.searchString}&page=${criteria.page - 1}\">Previous</a>\n<script type=\"text/javascript\">\n\tSpring.addDecoration(new Spring.AjaxEventDecoration({\n elementId: \"prevLink\",\n event: \"onclick\",\n params: { fragments: \"body\" }\n\t}));\n</script>\n----\n====\n\nThe preceding listing decorates the `onclick` event of the \"`Previous Results`\" link with an Ajax call, passing along a special parameter that specifies the fragment to be re-rendered in the response.\nNote that this link is fully functional if Javascript is unavailable in the client.\n(See <<_spring_js_ajax>> for details on how this request is handled on the server.)\n\nYou can also apply more than one decoration to an element.\nThe following example shows a button being decorated with Ajax and validate-all submit suppression:\n\n====\n[source,xml]\n----\n<input type=\"submit\" id=\"proceed\" name=\"_eventId_proceed\" value=\"Proceed\" />\n<script type=\"text/javascript\">\n\tSpring.addDecoration(new Spring.ValidateAllDecoration({elementId:'proceed', event:'onclick'}));\n\tSpring.addDecoration(new Spring.AjaxEventDecoration({elementId:'proceed', event:'onclick',formId:'booking', params:{fragments:'messages'}}));\n</script>\n----\n====\n\nIt is also possible to apply a decoration to multiple elements in a single statement by using Dojo's query API.\nThe following example decorates a set of checkbox elements as Dojo Checkbox widgets:\n\n====\n[source,xml]\n----\n<div id=\"amenities\">\n<form:checkbox path=\"amenities\" value=\"OCEAN_VIEW\" label=\"Ocean View\" /></li>\n<form:checkbox path=\"amenities\" value=\"LATE_CHECKOUT\" label=\"Late Checkout\" /></li>\n<form:checkbox path=\"amenities\" value=\"MINIBAR\" label=\"Minibar\" /></li>\n<script type=\"text/javascript\">\n\tdojo.query(\"#amenities input[type='checkbox']\").forEach(function(element) {\n Spring.addDecoration(new Spring.ElementDecoration({\n elementId: element.id,\n widgetType : \"dijit.form.CheckBox\",\n widgetAttrs : { checked : element.checked }\n }));\n\t});\n</script>\n</div>\n----\n====\n\n[[_spring_js_ajax]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-js.adoc", "title": "spring-js", "heading": "Spring Javascript Decorations", "heading_level": 3, "file_order": 9, "section_index": 4, "content_hash": "919f045a670c91720c91d06e607f6d337b1a56b2b0f0977ddcb49b282b3587f3", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-js.adoc"}}
{"id": "sha256:1ad22ce9133be58b37f9830a797a65135b476cbdb74152e77bb029b5bc8cdd08", "content": "Spring Javascript's client-side Ajax response handling is built upon the notion of receiving \"`fragments`\" back from the server.\nThese fragments are standard HTML that is meant to replace portions of the existing page.\nThe key piece needed on the server is a way to determine which pieces of a full response need to be pulled out for partial rendering.\n\nTo be able to render partial fragments of a full response, the full response must be built by using a templating technology that allows the use of composition for constructing the response and for the member parts of the composition to be referenced and rendered individually.\nSpring Javascript provides some simple Spring MVC extensions that make use of tiles to achieve this.\nThe same technique could theoretically be used with any templating system that supports composition.\n\nSpring Javascript's Ajax remoting functionality is built on the notion that the core handling code for an Ajax request should not differ from a standard browser request.\nThus, no special knowledge of an Ajax request is needed directly in the code, and you can use the same handler for both styles of request.\n\n[[_custom_ajax_handler]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-js.adoc", "title": "spring-js", "heading": "Handling Ajax Requests", "heading_level": 3, "file_order": 9, "section_index": 5, "content_hash": "1ad22ce9133be58b37f9830a797a65135b476cbdb74152e77bb029b5bc8cdd08", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-js.adoc"}}
{"id": "sha256:9a67b9d89ae6b41af8f43984d0d59f3286f3157cbac961a6e01f1ca2aac99445", "content": "The key interface for integrating various Ajax libraries with the Ajax-aware behavior of Web Flow (such as not redirecting for a partial page update) is `org.springframework.js.AjaxHandler`.\nBy default, a `SpringJavascriptAjaxHandler` is configured. It can detect an Ajax request submitted through the Spring JS client-side API and can respond appropriately when a redirect is required.\nTo integrate a different Ajax library (be it a pure JavaScript library or a higher-level abstraction, such as an Ajax-capable JSF component library), you can inject a custom `AjaxHandler` into the `FlowHandlerAdapter` or `FlowController`.\n\n[[_spring_js_ajax_mvc]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-js.adoc", "title": "spring-js", "heading": "Providing a Library-Specific `AjaxHandler`", "heading_level": 4, "file_order": 9, "section_index": 6, "content_hash": "9a67b9d89ae6b41af8f43984d0d59f3286f3157cbac961a6e01f1ca2aac99445", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-js.adoc"}}
{"id": "sha256:a88747c896c48bc75094cf58b8114a73d22c4f83497b20049774e9b08da515ff", "content": "To handle Ajax requests with Spring MVC controllers, you need to configure the provided Spring MVC extensions in your Spring application context for rendering the partial response (note that these extensions require the use of tiles for templating), as follows:\n\n====\n[source,xml]\n----\n<bean id=\"tilesViewResolver\" class=\"org.springframework.webflow.mvc.view.AjaxUrlBasedViewResolver\">\n\t<property name=\"viewClass\" value=\"org.springframework.webflow.mvc.view.FlowAjaxTiles3View\"/>\n</bean>\n----\n====\n\nThis configures the `AjaxUrlBasedViewResolver`, which, in turn, interprets Ajax requests and creates `FlowAjaxTilesView` objects to handle rendering of the appropriate fragments.\nNote that `FlowAjaxTilesView` is capable of handling the rendering for both Web Flow and pure Spring MVC requests.\nThe fragments correspond to individual attributes of a tiles view definition.\nFor example, consider the following tiles view definition:\n\n====\n[source,xml]\n----\n<definition name=\"hotels/index\" extends=\"standardLayout\">\n\t<put-attribute name=\"body\" value=\"index.body\" />\n</definition>\n\n<definition name=\"index.body\" template=\"/WEB-INF/hotels/index.jsp\">\n\t<put-attribute name=\"hotelSearchForm\" value=\"/WEB-INF/hotels/hotelSearchForm.jsp\" />\n\t<put-attribute name=\"bookingsTable\" value=\"/WEB-INF/hotels/bookingsTable.jsp\" />\n</definition>\n----\n====\n\nAn Ajax request could specify the `body`, `hotelSearchForm` or `bookingsTable` to be rendered as fragments in the request.\n\n[[_spring_js_ajax_mvc_webflow]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-js.adoc", "title": "spring-js", "heading": "Handling Ajax Requests with Spring MVC Controllers", "heading_level": 4, "file_order": 9, "section_index": 7, "content_hash": "a88747c896c48bc75094cf58b8114a73d22c4f83497b20049774e9b08da515ff", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-js.adoc"}}
{"id": "sha256:c3116b0fd8c519b0cf2aca9d40fe0aa4e39c3ae1ce3c9fde998e665e484d0258", "content": "Spring Web Flow handles the optional rendering of fragments directly in the flow definition language through the use of the `render` element.\nThe benefit of this approach is that the selection of fragments is completely decoupled from client-side code, such that no special parameters need to be passed with the request the way they currently must be with the pure Spring MVC controller approach.\nFor example, if you wanted to render the `hotelSearchForm` fragment from the previous example tiles view into a rich Javascript popup, you could define the following `view-state`:\n\n====\n[source,xml]\n----\n\n<view-state id=\"changeSearchCriteria\" view=\"enterSearchCriteria.xhtml\" popup=\"true\">\n\t<on-entry>\n <render fragments=\"hotelSearchForm\" />\n\t</on-entry>\n\t<transition on=\"search\" to=\"reviewHotels\">\n <evaluate expression=\"searchCriteria.resetPage()\"/>\n\t</transition>\n</view-state>\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-js.adoc", "title": "spring-js", "heading": "Handling Ajax Requests with Spring MVC and Spring Web Flow", "heading_level": 4, "file_order": 9, "section_index": 8, "content_hash": "c3116b0fd8c519b0cf2aca9d40fe0aa4e39c3ae1ce3c9fde998e665e484d0258", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-js.adoc"}}
{"id": "sha256:e7e549b97eb85cdc45194d11ec5a39eb6cca50a8650d1f9091e7779532beef98", "content": "[[_spring_mvc]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "spring-mvc", "heading_level": 1, "file_order": 10, "section_index": 0, "content_hash": "e7e549b97eb85cdc45194d11ec5a39eb6cca50a8650d1f9091e7779532beef98", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:36a4a745f7c092de2bcbd116b853ca6d6d37cc301e0686c7fc14f811294b31b9", "content": "This chapter shows how to integrate Web Flow into a Spring MVC web application.\nThe `booking-mvc` sample application is a good reference for Spring MVC with Web Flow.\nThis application is a simplified travel site that lets users search for and book hotel rooms.\n\n[[_spring_mvc_config_web.xml]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "Spring MVC Integration", "heading_level": 2, "file_order": 10, "section_index": 1, "content_hash": "36a4a745f7c092de2bcbd116b853ca6d6d37cc301e0686c7fc14f811294b31b9", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:1d3eb57e0db2395620612fab30cd25cb309398943af11593a2c7c0701e28c5bb", "content": "The first step to using Spring MVC is to configure the `DispatcherServlet` in `web.xml`.\nYou typically do this once per web application.\n\nThe following example maps all requests that begin with `/spring/` to `DispatcherServlet`.\nAn `init-param`\tis used to provide the `contextConfigLocation`.\nThis is the configuration file for the web application.\n\n====\n[source,xml]\n----\n<servlet>\n\t<servlet-name>Spring MVC Dispatcher Servlet</servlet-name>\n\t<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n\t<init-param>\n <param-name>contextConfigLocation</param-name>\n <param-value>/WEB-INF/web-application-config.xml</param-value>\n\t</init-param>\n</servlet>\n\n<servlet-mapping>\n\t<servlet-name>Spring MVC Dispatcher Servlet</servlet-name>\n\t<url-pattern>/spring/*</url-pattern>\n</servlet-mapping>\n----\n====\n\n[[_spring_mvc_config_spring_url_mapping]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "Configuring `web.xml`", "heading_level": 3, "file_order": 10, "section_index": 2, "content_hash": "1d3eb57e0db2395620612fab30cd25cb309398943af11593a2c7c0701e28c5bb", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:e039ea27db2ce9a7f4dffbdaf70b4a8604df61d1dbd30eecbafda38f2f6ad19b", "content": "`DispatcherServlet` maps requests for application resources to handlers.\nA flow is one type of handler.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "Dispatching to Flows", "heading_level": 3, "file_order": 10, "section_index": 3, "content_hash": "e039ea27db2ce9a7f4dffbdaf70b4a8604df61d1dbd30eecbafda38f2f6ad19b", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:61c6e143ec95f4a593dba1b76638cae4b5cb13d951479cda9c7a3a60a9ea2971", "content": "The first step to dispatching requests to flows is to enable flow handling within Spring MVC.\nTo do so, install the `FlowHandlerAdapter`, as follows:\n\n====\n[source,xml]\n----\n<!-- Enables FlowHandler URL mapping -->\n<bean class=\"org.springframework.webflow.mvc.servlet.FlowHandlerAdapter\">\n\t<property name=\"flowExecutor\" ref=\"flowExecutor\" />\n</bean>\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "Registering `FlowHandlerAdapter`", "heading_level": 4, "file_order": 10, "section_index": 4, "content_hash": "61c6e143ec95f4a593dba1b76638cae4b5cb13d951479cda9c7a3a60a9ea2971", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:c0e0f5b2d99cee6db4fabe5d3efd0375d89c8a35b9fbd4087b78efe5873f9368", "content": "Once flow handling is enabled, the next step is to map specific application resources to your flows.\nThe simplest way to do this is to define a `FlowHandlerMapping`, as follows:\n\n====\n[source,xml]\n----\n<!-- Maps request paths to flows in the flowRegistry;\n\te.g. a path of /hotels/booking looks for a flow with id \"hotels/booking\" -->\n<bean class=\"org.springframework.webflow.mvc.servlet.FlowHandlerMapping\">\n\t<property name=\"flowRegistry\" ref=\"flowRegistry\"/>\n\t<property name=\"order\" value=\"0\"/>\n</bean>\n----\n====\n\nConfiguring this mapping lets the `Dispatcher` map application resource paths to flows in a flow registry.\nFor example, accessing the `/hotels/booking` resource path would result in a registry query for the flow with an ID of `hotels/booking`.\nIf a flow with that ID is found, that flow handles the request.\nIf no flow is found, the next handler mapping in the dispatcher's ordered chain is queried or a `noHandlerFound` response is returned.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "Defining Flow Mappings", "heading_level": 4, "file_order": 10, "section_index": 5, "content_hash": "c0e0f5b2d99cee6db4fabe5d3efd0375d89c8a35b9fbd4087b78efe5873f9368", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:83c8fd34740e8732de78216c325c574db8123694695ad7b5c319826eefe91fbf", "content": "When a valid flow mapping is found, the `FlowHandlerAdapter` figures out whether to start a new execution of that flow or resume an existing execution based on information present the HTTP request.\nThe adapter employs a number of defaults related to starting and resuming flow executions:\n\n* HTTP request parameters are made available in the input map of all starting flow executions.\n* When a flow execution ends without sending a final response, the default handler tries to start a new execution in the same request.\n* Unhandled exceptions are propagated to the `Dispatcher`, unless the exception is a `NoSuchFlowExecutionException`. The default handler tries to recover from a `NoSuchFlowExecutionException` by starting over with a new execution.\n\nSee the https://docs.spring.io/spring-webflow/docs/current/api/org/springframework/webflow/mvc/servlet/FlowHandlerAdapter.html[API documentation for `FlowHandlerAdapter`] for more information.\nYou may override these defaults by subclassing or by implementing your own `FlowHandler`, as discussed in the next section.\n\n[[_spring_mvc_config_flow_handlers]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "Flow-handling Workflow", "heading_level": 4, "file_order": 10, "section_index": 6, "content_hash": "83c8fd34740e8732de78216c325c574db8123694695ad7b5c319826eefe91fbf", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:593051c3ab5ff549f5c1bc70a23658e4350f40b687ecd6ed6a6a36288fabc412", "content": "`FlowHandler` is the extension point that can be used to customize how flows are used in a HTTP servlet environment.\nA `FlowHandler` is used by the `FlowHandlerAdapter`\tand is responsible for:\n\n* Returning the `id` of a flow definition to invoke\n* Creating the input to pass new invocations of that flow as they are started\n* Handling outcomes returned by invocations of that flow as they end\n* Handling any exceptions thrown by invocations of that flow as they occur\n\nThese responsibilities are illustrated in the definition of the `org.springframework.mvc.servlet.FlowHandler` interface:\n\n====\n[source,java]\n----\npublic interface FlowHandler {\n\n\tpublic String getFlowId();\n\n\tpublic MutableAttributeMap createExecutionInputMap(HttpServletRequest request);\n\n\tpublic String handleExecutionOutcome(FlowExecutionOutcome outcome,\n HttpServletRequest request, HttpServletResponse response);\n\n\tpublic String handleException(FlowException e,\n HttpServletRequest request, HttpServletResponse response);\n}\n----\n====\n\nTo implement a `FlowHandler`, subclass ``AbstractFlowHandler``.\nAll these operations are optional. If you do not implement them, the defaults apply.\nYou need only override the methods that you need.\nSpecifically, you should:\n\n* Override `getFlowId(HttpServletRequest)` when the ID of your flow cannot be directly derived from the HTTP request. By default, the ID of the flow to invoke is derived from the `pathInfo` portion of the request URI. For example, `http://localhost/app/hotels/booking?hotelId=1` results in a flow ID of `hotels/booking` by default.\n* Override `createExecutionInputMap(HttpServletRequest)` when you need fine-grained control over extracting flow input parameters from the `HttpServletRequest`. By default, all request parameters are treated as flow input parameters.\n* Override `handleExecutionOutcome` when you need to handle specific flow execution outcomes in a custom manner. The default behavior sends a redirect to the ended flow's URL to restart a new execution of the flow.\n* Override `handleException` when you need fine-grained control over unhandled flow exceptions. The default behavior attempts to restart the flow when a client attempts to access an ended or expired flow execution. Any other exception is re-thrown to the Spring MVC `ExceptionResolver` infrastructure by default.\n\n[[_spring_mvc_flow_handler_example]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "Implementing Custom Flow Handlers", "heading_level": 3, "file_order": 10, "section_index": 7, "content_hash": "593051c3ab5ff549f5c1bc70a23658e4350f40b687ecd6ed6a6a36288fabc412", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:b9f208d069a26ff75718e3ed7efd2def6a40160369437a64a07e1db85d26208f", "content": "A common interaction pattern between Spring MVC and Web Flow is for a flow to redirect to a `@Controller` when it ends.\n`FlowHandler` instances let this be done without coupling the flow definition itself with a specific controller URL.\nThe following example `FlowHandler` redirects to a Spring MVC Controller:\n\n====\n[source,java]\n----\npublic class BookingFlowHandler extends AbstractFlowHandler {\n\tpublic String handleExecutionOutcome(FlowExecutionOutcome outcome,\n HttpServletRequest request, HttpServletResponse response) {\n if (outcome.getId().equals(\"bookingConfirmed\")) {\n return \"/booking/show?bookingId=\" + outcome.getOutput().get(\"bookingId\");\n } else {\n return \"/hotels/index\";\n }\n\t}\n}\n----\n====\n\nSince this handler needs only to handle flow invocation outcomes in a custom manner, nothing else is overridden.\nThe `bookingConfirmed` outcome results in a redirect to show the new booking.\nAny other outcome redirects back to the hotel's index page.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "Example `FlowHandler`", "heading_level": 4, "file_order": 10, "section_index": 8, "content_hash": "b9f208d069a26ff75718e3ed7efd2def6a40160369437a64a07e1db85d26208f", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:2aa1ebec9fab046f4920f7d8554b57f5a48cdf10f7d89221231a50a395033d94", "content": "To install a custom `FlowHandler`, you need to deploy it as a bean.\nThe bean name must match the ID of the flow to which the handler should apply.\nThe following example creates a bean that matches the `hotels/booking` flow:\n\n====\n[source,xml]\n----\n<bean name=\"hotels/booking\" class=\"org.springframework.webflow.samples.booking.BookingFlowHandler\" />\n----\n====\n\nWith this configuration, accessing the resource `/hotels/booking` launches the `hotels/booking` flow by using the custom `BookingFlowHandler`.\nWhen the booking flow ends, the `FlowHandler` processes the flow execution outcome and redirects to the appropriate controller.\n\n[[_spring_mvc_flow_handler_redirects]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "Deploying a Custom `FlowHandler`", "heading_level": 4, "file_order": 10, "section_index": 9, "content_hash": "2aa1ebec9fab046f4920f7d8554b57f5a48cdf10f7d89221231a50a395033d94", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:93d8011710c60b4f69a5ca7ef78cf115ee8ca815bfd475d52a8a0ea2b8cda473", "content": "A `FlowHandler` that handles a `FlowExecutionOutcome` or `FlowException` returns a `String` to indicate the resource to which to redirect after handling.\nIn the example shown in the previous section, the `BookingFlowHandler` redirects to the `booking/show` resource URI for `bookingConfirmed` outcomes and to the `hotels/index` resource URI for all other outcomes.\n\nBy default, returned resource locations are relative to the current servlet mapping.\nThis allows for a flow handler to redirect to other controllers in the application by using relative paths.\nIn addition, explicit redirect prefixes are supported for cases where more control is needed.\n\nThe explicit redirect prefixes supported are:\n\n* `servletRelative:`: Redirect to a resource relative to the current servlet\n* `contextRelative:`: Redirect to a resource relative to the current web application context path\n* `serverRelative:`: Redirect to a resource relative to the server root\n* `http://` or `https://`: Redirect to a fully qualified resource URI\n\nThese same redirect prefixes are also supported within a flow definition when you use the `externalRedirect:` directive in conjunction with a `view-state` or an `end-state` -- for example, `view=\"externalRedirect:https://springframework.org\"`.\n\n[[_spring_mvc_config_spring_view_resolution]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "`FlowHandler` Redirects", "heading_level": 4, "file_order": 10, "section_index": 10, "content_hash": "93d8011710c60b4f69a5ca7ef78cf115ee8ca815bfd475d52a8a0ea2b8cda473", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:eb144759c6edfad85566ade2d372de0b8b3682993ccda9f0e5d137c8d9ff2fe0", "content": "Unless otherwise specified, Web Flow maps selected view identifiers to files located within the flow's working directory.\nFor existing Spring MVC and Web Flow applications, an external `ViewResolver` is likely already handling this mapping for you.\nTherefore, to continue using that resolver and to avoid having to change how your existing flow views are packaged, you can configure Web Flow as follows:\n\n====\n[source,xml]\n----\n<webflow:flow-registry id=\"flowRegistry\" flow-builder-services=\"flowBuilderServices\">\n\t<webflow:location path=\"/WEB-INF/hotels/booking/booking.xml\" />\n</webflow:flow-registry>\n\n<webflow:flow-builder-services id=\"flowBuilderServices\" view-factory-creator=\"mvcViewFactoryCreator\"/>\n\n<bean id=\"mvcViewFactoryCreator\" class=\"org.springframework.webflow.mvc.builder.MvcViewFactoryCreator\">\n\t<property name=\"viewResolvers\" ref=\"myExistingViewResolverToUseForFlows\"/>\n</bean>\n----\n====\n\n`MvcViewFactoryCreator` is the factory that lets you configure how the Spring MVC view system is used inside Spring Web Flow.\nYou can use it to configure existing `ViewResolver` instances as well as other services, such as a custom `MessageCodesResolver`.\nYou may also let data binding use Spring MVC's native `BeanWrapper` by setting the `useSpringBinding` flag to `true`.\nThis is an alternative to using the Unified EL for view-to-model data binding.\nSee the https://docs.spring.io/spring-webflow/docs/current/api/org/springframework/webflow/mvc/builder/MvcViewFactoryCreator.html[JavaDoc API of this class] for more information.\n\n[[_spring_mvc_resuming_on_event]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "View Resolution", "heading_level": 3, "file_order": 10, "section_index": 11, "content_hash": "eb144759c6edfad85566ade2d372de0b8b3682993ccda9f0e5d137c8d9ff2fe0", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:303e1d056dcfeae26fb6e4cebd8621cec4f436ec393297efecd38277c7dad09a", "content": "When a flow enters a `view-state`, it pauses, redirects the user to its execution URL, and waits for a user event to resume.\nEvents are generally signaled by activating buttons, links, or other user interface commands.\nHow events are decoded server-side is specific to the view technology in use.\nThis section shows how to trigger events from HTML-based views generated by templating engines such as JSP, Velocity, or Freemarker.\n\n[[_webflow_event_named_html_button]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "Signaling an Event from a View", "heading_level": 3, "file_order": 10, "section_index": 12, "content_hash": "303e1d056dcfeae26fb6e4cebd8621cec4f436ec393297efecd38277c7dad09a", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:2d32988e55b93ccf72c10a57e9d37426225644be2892919f4b413d1b1dddba00", "content": "The following example shows two buttons on the same form that signal `proceed` and `cancel` events when clicked, respectively:\n\n====\n[source,xml]\n----\n<input type=\"submit\" name=\"_eventId_proceed\" value=\"Proceed\" />\n<input type=\"submit\" name=\"_eventId_cancel\" value=\"Cancel\" />\n----\n====\n\nWhen a button is pressed, Web Flow finds a request parameter name beginning with `\\_eventId_` and treats the remaining substring as the event ID.\nSo in this example, submitting `\\_eventId_proceed` becomes `proceed`.\nThis style should be considered when there are several different events that can be signaled from the same form.\n\n[[_webflow_event_hidden_parameter]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "Using a Named HTML Button to Signal an Event", "heading_level": 4, "file_order": 10, "section_index": 13, "content_hash": "2d32988e55b93ccf72c10a57e9d37426225644be2892919f4b413d1b1dddba00", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:32c33e3715895954d43f80b7746b5f1bc971f68c814d9a6b63da1460d1dbc823", "content": "The following example shows a form that signals the `proceed` event when submitted:\n\n====\n[source,xml]\n----\n<input type=\"submit\" value=\"Proceed\" />\n<input type=\"hidden\" name=\"_eventId\" value=\"proceed\" />\n----\n====\n\nHere, Web Flow detects the special `\\_eventId` parameter and uses its value as the event ID.\nThis style should be considered only when there is one event that can be signaled on the form.\n\n[[_webflow_event_link]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "Using a Hidden HTML Form Parameter to Signal an Event", "heading_level": 4, "file_order": 10, "section_index": 14, "content_hash": "32c33e3715895954d43f80b7746b5f1bc971f68c814d9a6b63da1460d1dbc823", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:f575cf2e69c96a509041a1b6efc44fed309f3a8daa08034999a1321fa0fbf446", "content": "The following example shows a link that signals the `cancel` event when activated:\n\n====\n[source,xml]\n----\n<a href=\"${flowExecutionUrl}&_eventId=cancel\">Cancel</a>\n----\n====\n\nFiring an event results in an HTTP request being sent back to the server.\nOn the server-side, the flow handles decoding the event from within its current `view-state`.\nHow this decoding process works is specific to the view implementation.\nRecall that a Spring MVC view implementation looks for a request parameter named ``\\_eventId``.\nIf no `\\_eventId` parameter is found, the view looks for a parameter that starts with `\\_eventId_` and uses the remaining substring as the event ID.\nIf neither case exists, no flow event is triggered.\n\n[[_spring_mvc_embedded_flow]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "Using a HTML Link to Signal an Event", "heading_level": 4, "file_order": 10, "section_index": 15, "content_hash": "f575cf2e69c96a509041a1b6efc44fed309f3a8daa08034999a1321fa0fbf446", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:51a82afa542e5884a8baf7bcf4fc7e3e60b794256b6ebb175013bcb1aec43ecb", "content": "By default, when a flow enters a view state, it performs a client-side redirect before rendering the view.\nThis approach is known as `POST-REDIRECT-GET`.\nIt has the advantage of separating the form processing for one view from the rendering of the next view.\nAs a result, the browser Back and Refresh buttons work seamlessly without causing any browser warnings.\n\nNormally, the client-side redirect is transparent from a user's perspective.\nHowever, there are situations where `POST-REDIRECT-GET` may not bring the same benefits.\nFor example, a flow may be embedded on a page and driven by Ajax requests refreshing only the area of the page that belongs to the flow.\nNot only is it unnecessary to use client-side redirects in this case, it is also not the desired behavior with regards to keeping the surrounding content of the page intact.\n\nThe <<_spring_js_ajax>> section explains how to do partial rendering during Ajax requests.\nThe focus of this section is to explain how to control flow execution redirect behavior during Ajax requests.\nTo indicate that a flow should run in \"`page embedded`\" mode, append an extra parameter when launching the flow, as follows:\n\n====\n[source,xml]\n----\n/hotels/booking?mode=embedded\n----\n====\n\nWhen launched in \"`page embedded`\" mode, a flow does not issue flow execution redirects during Ajax requests.\nThe `mode=embedded` parameter needs to be passed only when launching the flow.\nYour only other concern is to use Ajax requests and to render only the content required to update the portion of the page displaying the flow.\n\n[[_spring_mvc_embedded_flow_alternatives]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "Embedding a Flow on a Page", "heading_level": 3, "file_order": 10, "section_index": 16, "content_hash": "51a82afa542e5884a8baf7bcf4fc7e3e60b794256b6ebb175013bcb1aec43ecb", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:26cb94ecc8ecc1a587aa053347626cf0220b0552309087ab2ac971bdefbed913", "content": "By default, Web Flow does a client-side redirect upon entering every view state.\nHowever, if you remain in the same view state (for example, a transition without a `to` attribute) during an Ajax request, there is no client-side redirect.\nIt is appropriate for a top-level flow that supports the browser back button while still taking advantage of Ajax and partial rendering for use cases where you remain in the same view such as form validation, paging trough search results, and others.\nHowever, transitions to a new view state are always followed with a client-side redirect.\nThat makes it impossible to embed a flow on a page or within a modal dialog and execute more than one view state without causing a full-page refresh.\nHence, if your use case requires embedding a flow, you can launch it in \"`embedded`\" mode.\n\n[[_spring_mvc_embedded_flow_examples]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "Embedded Mode Versus Default Redirect Behavior", "heading_level": 4, "file_order": 10, "section_index": 17, "content_hash": "26cb94ecc8ecc1a587aa053347626cf0220b0552309087ab2ac971bdefbed913", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:eec14b16c0487169a8487d9d86445476d82b170b4a3812f842cc5361da6065a8", "content": "For examples of a flow embedded on a page and within a modal dialog, see the `webflow-showcase` project.\nYou can check out the source code locally, build it as you would a Maven project, and import it into Eclipse, as follows:\n\n====\n[source,xml]\n----\ncd some-directory\ngit clone https://github.com/spring-projects/spring-webflow-samples.git\ncd spring-webflow-samples/webflow-showcase\nmvn package\n# import into Eclipse\n----\n====\n\n[[_spring_mvc_flash_output]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "Embedded Flow Examples", "heading_level": 4, "file_order": 10, "section_index": 18, "content_hash": "eec14b16c0487169a8487d9d86445476d82b170b4a3812f842cc5361da6065a8", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:18d9140c4ca908416984ba54791c0a46942a650f10e1fecb4849f11e9d2c680d", "content": "You can automatically save flow output to MVC flash scope when an `end-state` performs an internal redirect.\nThis is particularly useful when displaying a summary screen at the end of a flow.\nFor backwards compatibility, this feature is disabled by default.\nTo enable it, set `saveOutputToFlashScopeOnRedirect` on your `FlowHandlerAdapter` to `true`, as follows:\n\n====\n[source,xml]\n----\n<!-- Enables FlowHandler URL mapping -->\n<bean class=\"org.springframework.webflow.mvc.servlet.FlowHandlerAdapter\">\n\t<property name=\"flowExecutor\" ref=\"flowExecutor\" />\n\t<property name=\"saveOutputToFlashScopeOnRedirect\" value=\"true\" />\n</bean>\n----\n====\n\nThe following example adds `confirmationNumber` to the MVC flash scope before redirecting to the `summary` screen.\n\n====\n[source,xml]\n----\n<end-state id=\"finish\" view=\"externalRedirect:summary\">\n\t<output name=\"confirmationNumber\" value=\"booking.confirmationNumber\" />\n</end-state>\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/spring-mvc.adoc", "title": "spring-mvc", "heading": "Saving Flow Output to MVC Flash Scope", "heading_level": 3, "file_order": 10, "section_index": 19, "content_hash": "18d9140c4ca908416984ba54791c0a46942a650f10e1fecb4849f11e9d2c680d", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/spring-mvc.adoc"}}
{"id": "sha256:d134c246e43860810aca0493f30957115b2e3e5af674f510183858041bfb98d9", "content": "[[_system_setup]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "system-setup", "heading_level": 1, "file_order": 11, "section_index": 0, "content_hash": "d134c246e43860810aca0493f30957115b2e3e5af674f510183858041bfb98d9", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:0b842e743c3fbe1c829ab43ea26e91ebca84f17cf6e29cc7dc89269bd4995e9f", "content": "This chapter shows you how to set up the Web Flow system for use in any web environment.\n\n[[_system_config_options]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "System Setup", "heading_level": 2, "file_order": 11, "section_index": 1, "content_hash": "0b842e743c3fbe1c829ab43ea26e91ebca84f17cf6e29cc7dc89269bd4995e9f", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:4b6f84e243a04a26f77431a74bda1f4d77130b268a9a83d11ecc8a1bdc14eb89", "content": "Web Flow provides dedicated configuration support for both Java- and XML-based configuration.\n\nTo get started with XML based configuration, declare the `webflow` config XML namespace, as follows:\n\n====\n[source,xml]\n----\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xmlns:webflow=\"http://www.springframework.org/schema/webflow-config\"\n xsi:schemaLocation=\"\n http://www.springframework.org/schema/beans\n https://www.springframework.org/schema/beans/spring-beans.xsd\n http://www.springframework.org/schema/webflow-config\n https://www.springframework.org/schema/webflow-config/spring-webflow-config.xsd\">\n\n <!-- Setup Web Flow here -->\n\n</beans>\n----\n====\n\nTo get started with Java configuration extend `AbstractFlowConfiguration` in an `@Configuration` class, as follows:\n\n====\n[source,java]\n----\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.webflow.config.AbstractFlowConfiguration;\n\n@Configuration\npublic class WebFlowConfig extends AbstractFlowConfiguration {\n\n}\n----\n====\n\n[[_system_config_basic]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Java Configuration and the XML Namespace", "heading_level": 3, "file_order": 11, "section_index": 2, "content_hash": "4b6f84e243a04a26f77431a74bda1f4d77130b268a9a83d11ecc8a1bdc14eb89", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:70c4fa677a607ea0144dfccd3bd33dc1297543733e5b7c9d2e93a0d1a4665353", "content": "The next two sections show the minimal configuration required to set up the Web Flow system in your application:\n\n* <<_basic_setup_flow_registry>>\n* <<_basic_setup_flow_executor>>\n\n[[_basic_setup_flow_registry]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Basic System Configuration", "heading_level": 3, "file_order": 11, "section_index": 3, "content_hash": "70c4fa677a607ea0144dfccd3bd33dc1297543733e5b7c9d2e93a0d1a4665353", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:025540e626bb84b3549302a5bf35b8c776a0b7e60807020ea31f09b9131c4438", "content": "You can register your flows in a `FlowRegistry` in XML, as follows:\n\n====\n[source,xml]\n----\n<webflow:flow-registry id=\"flowRegistry\">\n <webflow:flow-location path=\"/WEB-INF/flows/booking/booking.xml\" />\n</webflow:flow-registry>\n----\n====\n\nYou can register your flows in a `FlowRegistry` in Java, as follows:\n\n====\n[source,java]\n----\n@Bean\npublic FlowDefinitionRegistry flowRegistry() {\n return getFlowDefinitionRegistryBuilder()\n .addFlowLocation(\"/WEB-INF/flows/booking/booking.xml\")\n .build();\n}\n----\n====\n\n[[_basic_setup_flow_executor]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Registering a `FlowRegistry`", "heading_level": 4, "file_order": 11, "section_index": 4, "content_hash": "025540e626bb84b3549302a5bf35b8c776a0b7e60807020ea31f09b9131c4438", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:30339d1a8ee8d6749305c7ba476ab2741522786fa40269b2254a32d7c7f75660", "content": "You can deploy a `FlowExecutor`, the central service for executing flows in XML, as follows:\n\n====\n[source,xml]\n----\n\n<webflow:flow-executor id=\"flowExecutor\" />\n----\n====\n\nYou can deploy a `FlowExecutor`, the central service for executing flows in Java:\n\n====\n[source,java]\n----\n\n@Bean\npublic FlowExecutor flowExecutor() {\n return getFlowExecutorBuilder(flowRegistry()).build();\n}\n----\n====\n\nSee the <<_spring_mvc>> and <<_spring_faces>> sections of this guide on how to integrate the Web Flow system with the MVC and JSF environment, respectively.\n\n[[_flow_registry]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Deploying a `FlowExecutor`", "heading_level": 4, "file_order": 11, "section_index": 5, "content_hash": "30339d1a8ee8d6749305c7ba476ab2741522786fa40269b2254a32d7c7f75660", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:d08cffd7622234b969b7252be1af62d5321b0c04cf8e4bd04184b1e8a4742497", "content": "This section explores flow-registry configuration options.\n\n[[_flow_registry_location]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "`flow-registry` options", "heading_level": 3, "file_order": 11, "section_index": 6, "content_hash": "d08cffd7622234b969b7252be1af62d5321b0c04cf8e4bd04184b1e8a4742497", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:15324b89da5fc77599f3e4cbc06a320e457131ed0521e36b682ae18d485f4920", "content": "You can use the `location` element to specify paths to flow definitions that you want to register.\nBy default, flows are assigned registry identifiers equal to their filenames minus the file extension, unless a registry base path is defined (see <<_flow_registry_base_path>>).\n\nThe following example specifies a flow location in XML:\n\n====\n[source,xml]\n----\n<webflow:flow-location path=\"/WEB-INF/flows/booking/booking.xml\" />\n----\n====\n\nThe following example specifies a flow location in Java:\n\n====\n[source,java]\n----\nreturn getFlowDefinitionRegistryBuilder()\n .addFlowLocation(\"/WEB-INF/flows/booking/booking.xml\")\n .build();\n----\n====\n\n[[_flow_registry_location_id]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Specifying Flow Locations", "heading_level": 4, "file_order": 11, "section_index": 7, "content_hash": "15324b89da5fc77599f3e4cbc06a320e457131ed0521e36b682ae18d485f4920", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:a618711c488d7647c299d5dcedb146c3bcc36bd39a6bf15ebb61a39f42995a5a", "content": "You can specify an ID to assign a custom registry identifier to a flow.\n\nThe following example shows how to assign custom flow identifiers in XML:\n\n====\n[source,xml]\n----\n<webflow:flow-location path=\"/WEB-INF/flows/booking/booking.xml\" id=\"bookHotel\" />\n----\n====\n\nThe following example shows how to assign custom flow identifiers in Java:\n\n====\n[source,java]\n----\nreturn getFlowDefinitionRegistryBuilder()\n .addFlowLocation(\"/WEB-INF/flows/booking/booking.xml\", \"bookHotel\")\n .build();\n----\n====\n\n[[_flow_registry_location_attributes]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Assigning Custom Flow Identifiers", "heading_level": 4, "file_order": 11, "section_index": 8, "content_hash": "a618711c488d7647c299d5dcedb146c3bcc36bd39a6bf15ebb61a39f42995a5a", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:a9b90b3e3a77f64d39350bf8dea63fa5e9362c4ee2dd5085350560c9e7c500a4", "content": "You can use the `flow-definition-attributes` element to assign custom meta-attributes to a registered flow.\n\nThe following example shows how to assign flow meta-attributes in XML:\n\n====\n[source,xml]\n----\n<webflow:flow-location path=\"/WEB-INF/flows/booking/booking.xml\">\n <webflow:flow-definition-attributes>\n <webflow:attribute name=\"caption\" value=\"Books a hotel\" />\n </webflow:flow-definition-attributes>\n</webflow:flow-location>\n----\n====\n\nThe following example shows how to assign flow meta-attributes in Java:\n\n====\n[source,java]\n----\nMap<String, Object> attrs = ... ;\n\nreturn getFlowDefinitionRegistryBuilder()\n .addFlowLocation(\"/WEB-INF/flows/booking/booking.xml\", null, attrs)\n .build();\n----\n====\n\n[[_flow_registry_patterns]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Assigning Flow Meta-attributes", "heading_level": 4, "file_order": 11, "section_index": 9, "content_hash": "a9b90b3e3a77f64d39350bf8dea63fa5e9362c4ee2dd5085350560c9e7c500a4", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:bde251fddbec46be652ea607811a5fd07151bb3bd7e0340e0e9ec96343c5858c", "content": "You can use the `flow-location-patterns` element to register flows that match a specific resource location pattern.\n\nThe following example shows how to register a flow in XML:\n\n====\n[source,xml]\n----\n<webflow:flow-location-pattern value=\"/WEB-INF/flows/**/*-flow.xml\" />\n----\n====\n\nThe following example shows how to register a flow in Java:\n\n====\n[source,java]\n----\nreturn getFlowDefinitionRegistryBuilder()\n .addFlowLocationPattern(\"/WEB-INF/flows/**/*-flow.xml\")\n .build();\n----\n====\n\n[[_flow_registry_base_path]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Registering Flows by Using a Location Pattern", "heading_level": 4, "file_order": 11, "section_index": 10, "content_hash": "bde251fddbec46be652ea607811a5fd07151bb3bd7e0340e0e9ec96343c5858c", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:5490a3e128c48f1452135515660dec84b2c0027a73d4c3a303ed24f6d76f1b89", "content": "You can use the `base-path` attribute to define a base location for all flows in the application.\nAll flow locations are then relative to the base path.\nThe base path can be a resource path (such as `/WEB-INF`) or a location on the classpath (such as `classpath:org/springframework/webflow/samples`).\n\nThe following example shows how to set the base path in XML:\n\n====\n[source,xml]\n----\n<webflow:flow-registry id=\"flowRegistry\" base-path=\"/WEB-INF\">\n <webflow:flow-location path=\"/hotels/booking/booking.xml\" />\n</webflow:flow-registry>\n----\n====\n\nThe following example shows how to set the base path in Java:\n\n====\n[source,java]\n----\nreturn getFlowDefinitionRegistryBuilder()\n .setBasePath(\"/WEB-INF\")\n .addFlowLocationPattern(\"/hotels/booking/booking.xml\")\n .build();\n----\n====\n\nWith a base path defined, the algorithm that assigns flow identifiers changes slightly.\nFlows are now assigned registry identifiers equal to the the path segment between their base path and their file name.\nFor example, if a flow definition is located at `/WEB-INF/hotels/booking/booking-flow.xml` and the base path is `/WEB-INF`, the remaining path to this flow is `hotels/booking`, which becomes the flow ID.\n\n.A directory for each flow definition\nTIP: It is a best practice to package each flow definition in a unique directory.\nThis improves modularity, letting dependent resources be packaged with the flow definition.\nIt also prevents two flows from having the same identifiers when using the convention.\n\nIf no base path is not specified or if the flow definition is directly on the base path, flow ID assignment from the filename (minus the extension) is used.\nFor example, if a flow definition file is `booking.xml`, the flow identifier is simply `booking`.\n\nLocation patterns are particularly powerful when combined with a registry base path.\nInstead of the flow identifiers becoming `*-flow`, they are based on the directory path.\nThe following example combines a base path with a flow location pattern in XML:\n\n====\n[source,xml]\n----\n<webflow:flow-registry id=\"flowRegistry\" base-path=\"/WEB-INF\">\n <webflow:flow-location-pattern value=\"/**/*-flow.xml\" />\n</webflow:flow-registry>\n----\n====\n\nThe following example combines a base path with a flow location pattern in Java:\n\n====\n[source,java]\n----\nreturn getFlowDefinitionRegistryBuilder()\n .setBasePath(\"/WEB-INF\")\n .addFlowLocationPattern(\"/**/*-flow.xml\")\n .build();\n----\n====\n\nIn the preceding example, suppose you had flows located in the `/user/login`, `/user/registration`, `/hotels/booking`, and `/flights/booking` directories within `WEB-INF`.\nYou would end up with flow IDs of `user/login`, `user/registration`, `hotels/booking`, and `flights/booking`, respectively.\n\n[[_flow_registry_parent]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Flow Location Base Path", "heading_level": 4, "file_order": 11, "section_index": 11, "content_hash": "5490a3e128c48f1452135515660dec84b2c0027a73d4c3a303ed24f6d76f1b89", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:13a4bddc261f7bcb8b2b62fadcf9c5ca2ce5c5b64cf1108f71405f7cca67b33c", "content": "You can use the `parent` attribute to link two flow registries together in a hierarchy.\nWhen the child registry is queried, if it cannot find the requested flow, it delegates to its parent.\n\nThe following example establishes a parent relationship for two flow registries in XML:\n\n====\n[source,xml]\n----\n<!-- my-system-config.xml -->\n<webflow:flow-registry id=\"flowRegistry\" parent=\"sharedFlowRegistry\">\n <webflow:flow-location path=\"/WEB-INF/flows/booking/booking.xml\" />\n</webflow:flow-registry>\n\n<!-- shared-config.xml -->\n<webflow:flow-registry id=\"sharedFlowRegistry\">\n <!-- Global flows shared by several applications -->\n</webflow:flow-registry>\n----\n====\n\nThe following example establishes a parent relationship for two flow registries in Java:\n\n====\n[source,java]\n----\n@Configuration\npublic class WebFlowConfig extends AbstractFlowConfiguration {\n\n @Autowired\n private SharedConfig sharedConfig;\n\n @Bean\n public FlowDefinitionRegistry flowRegistry() {\n return getFlowDefinitionRegistryBuilder()\n .setParent(this.sharedConfig.sharedFlowRegistry())\n .addFlowLocation(\"/WEB-INF/flows/booking/booking.xml\")\n .build();\n }\n}\n\n@Configuration\npublic class SharedConfig extends AbstractFlowConfiguration {\n\n @Bean\n public FlowDefinitionRegistry sharedFlowRegistry() {\n return getFlowDefinitionRegistryBuilder()\n .addFlowLocation(\"/WEB-INF/flows/shared.xml\")\n .build();\n }\n}\n----\n====\n\n[[_flow_registry_builder_services]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Configuring `FlowRegistry` Hierarchies", "heading_level": 4, "file_order": 11, "section_index": 12, "content_hash": "13a4bddc261f7bcb8b2b62fadcf9c5ca2ce5c5b64cf1108f71405f7cca67b33c", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:57638e4fec03e6bab0c2bf2623d351d0207657d2d7353bfb1ccaeca15f4996fe", "content": "You can use the `flow-builder-services` attribute (in XML) or the `FlowBuilderServices` object (in Java) to customize the services and settings used to build flows in a flow-registry.\nIf no `flow-builder-services` element is specified, the default service implementations are used.\nWhen the element is specified, you need only reference the services you want to customize.\n\nThe following example shows how to create a custom flow builder service in XML:\n\n====\n[source,xml]\n----\n<webflow:flow-registry id=\"flowRegistry\" flow-builder-services=\"flowBuilderServices\">\n <webflow:flow-location path=\"/WEB-INF/flows/booking/booking.xml\" />\n</webflow:flow-registry>\n\n<webflow:flow-builder-services id=\"flowBuilderServices\" />\n----\n====\n\nThe following example shows how to create a custom flow builder service in Java:\n\n====\n[source,java]\n----\n@Bean\npublic FlowDefinitionRegistry flowRegistry() {\n\treturn getFlowDefinitionRegistryBuilder(flowBuilderServices())\n .addFlowLocation(\"/WEB-INF/flows/booking/booking.xml\")\n .build();\n}\n\n@Bean\npublic FlowBuilderServices flowBuilderServices() {\n return getFlowBuilderServicesBuilder().build();\n}\n----\n====\n\nThe configurable services are the `conversion-service`, `expression-parser`, and `view-factory-creator` elements (in XML) and the `ConversionService`, `ExpressionParser`, and `ViewFactoryCreator` interfaces (in Java).\nThese services are configured by referencing custom beans that you must define.\n\nThe following example shows how to define the configurable services in XML:\n\n====\n[source,xml]\n----\n<webflow:flow-builder-services id=\"flowBuilderServices\"\n conversion-service=\"conversionService\"\n expression-parser=\"expressionParser\"\n view-factory-creator=\"viewFactoryCreator\" />\n\n<bean id=\"conversionService\" class=\"...\" />\n<bean id=\"expressionParser\" class=\"...\" />\n<bean id=\"viewFactoryCreator\" class=\"...\" />\n----\n====\n\nThe following example shows how to define the configurable services in Java:\n\n====\n[source,java]\n----\n@Bean\npublic FlowBuilderServices flowBuilderServices() {\n return getFlowBuilderServicesBuilder()\n .setConversionService(conversionService())\n .setExpressionParser(expressionParser)\n .setViewFactoryCreator(mvcViewFactoryCreator())\n .build();\n}\n\n@Bean\npublic ConversionService conversionService() {\n // ...\n}\n\n@Bean\npublic ExpressionParser expressionParser() {\n // ...\n}\n\n@Bean\npublic ViewFactoryCreator viewFactoryCreator() {\n // ...\n}\n----\n====\n\n[[_builder_service_conversion]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Configuring Custom `FlowBuilder` Services", "heading_level": 4, "file_order": 11, "section_index": 13, "content_hash": "57638e4fec03e6bab0c2bf2623d351d0207657d2d7353bfb1ccaeca15f4996fe", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:66ed3f4309134af302f972c8658c16260b28a52867d0120afb295e8d3499b9f4", "content": "You can use the `conversion-service` attribute (in XML) or the `ConversionService` interface (in Java) to customize the `ConversionService` used by the Web Flow system.\nType conversion is used to convert from one type to another when required during flow execution, such as when processing request parameters, invoking actions, and so on.\nMany common object types (such as numbers, classes, and enums) are supported.\nHowever, you probably need to provide your own type conversion and formatting logic for custom data types.\nSee <<_view_type_conversion>> for important information on how to provide custom type conversion logic.\n\n[[_builder_service_expression_parser]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Using the Conversion Service", "heading_level": 5, "file_order": 11, "section_index": 14, "content_hash": "66ed3f4309134af302f972c8658c16260b28a52867d0120afb295e8d3499b9f4", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:b3efbbe83e501f1e9a0de40bc2730dc14333b657439ed5ff2bac0ca72e81440d", "content": "You can use the `expression-parser` attribute (in XML) or the `ExpressionParser` interface (in Java) to customize the `ExpressionParser` used by the Web Flow system.\nThe default `ExpressionParser` uses the Unified Expression Language if available on the classpath.\nOtherwise, it uses the Spring Expression Language.\n\n[[_builder_service_view_factory_creator]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Using the Expression Parser", "heading_level": 5, "file_order": 11, "section_index": 15, "content_hash": "b3efbbe83e501f1e9a0de40bc2730dc14333b657439ed5ff2bac0ca72e81440d", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:c5d317fedddf65737aaf4bf37b0c638eb2ec479f38d8d520580d8d9e66f0c12a", "content": "You can use the `view-factory-creator` attribute (in XML) or the `ViewFactoryCreator` interface (in Java) to customize the `ViewFactoryCreator` used by the Web Flow system.\nThe default `ViewFactoryCreator` produces Spring MVC view factories capable of rendering JSP, Velocity, and Freemarker views.\n\nThe configurable settings are `development`.\nThese settings are global configuration attributes that you can apply during the flow construction process.\n\n[[_builder_development]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Using the View Factory Creator", "heading_level": 5, "file_order": 11, "section_index": 16, "content_hash": "c5d317fedddf65737aaf4bf37b0c638eb2ec479f38d8d520580d8d9e66f0c12a", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:2587ffb30914f8da0dfd746d282a84c3a1b32e9b49b775a537b2e6705b4dc9e5", "content": "When you create a flow builder services object, you can turn on development mode.\nDevelopment mode switches on hot-reloading of flow definition changes, including changes to dependent flow resources such as message bundles.\n\nTo turn on development mode in XML, set the `development` attribute on the `flow-builder-services` element to `true`.\nTo turn on development mode in Java, use `setDevelopment(true)` on the `FlowBuilderServices` object.\n\n[[_flow_executor]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Enabling Development Mode", "heading_level": 5, "file_order": 11, "section_index": 17, "content_hash": "2587ffb30914f8da0dfd746d282a84c3a1b32e9b49b775a537b2e6705b4dc9e5", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:e461e0d64a9e8f0a1195edfdb8fb4429a83fe51f302d95fc65c62da3afddbf2f", "content": "This section explores Flow Executor configuration options.\n\n[[_flow_executor_execution_listeners]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Setting Flow Executor options", "heading_level": 3, "file_order": 11, "section_index": 18, "content_hash": "e461e0d64a9e8f0a1195edfdb8fb4429a83fe51f302d95fc65c62da3afddbf2f", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:f5508dc684e60786e1a5aae4c22a151b88590c4f9b5edc93ce28f06d6b5a1f70", "content": "You can use the `flow-execution-listeners` element (in XML) or the `addFlowExecutionListener` method (in Java) to register listeners that observe the lifecycle of flow executions.\n\nThe following example shows how to create flow execution listeners in XML:\n\n====\n[source,xml]\n----\n<webflow:flow-execution-listeners>\n <webflow:listener ref=\"securityListener\"/>\n <webflow:listener ref=\"persistenceListener\"/>\n</webflow:flow-execution-listeners>\n----\n====\n\nThe folloiwng example shows how to create flow execution listeners in Java:\n\n====\n[source,java]\n----\n@Bean\npublic FlowExecutor flowExecutor() {\n return getFlowExecutorBuilder(flowRegistry())\n .addFlowExecutionListener(securityListener())\n .addFlowExecutionListener(persistenceListener())\n .build();\n}\n----\n====\n\nYou can also configure a listener to observe only certain flows.\n\nThe following example shows how to configure a listener to monitor only two flows in XML:\n\n====\n[source,xml]\n----\n<webflow:listener ref=\"securityListener\" criteria=\"securedFlow1,securedFlow2\"/>\n----\n====\n\nThe following example shows how to configure a listener to monitor only two flows in Java:\n\n====\n[source,java]\n----\n@Bean\npublic FlowExecutor flowExecutor() {\n return getFlowExecutorBuilder(flowRegistry())\n .addFlowExecutionListener(securityListener(), \"securedFlow1,securedFlow2\")\n .build();\n}\n----\n====\n\n[[_tuning_flow_execution_repository]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Attaching Flow Execution Listeners", "heading_level": 4, "file_order": 11, "section_index": 19, "content_hash": "f5508dc684e60786e1a5aae4c22a151b88590c4f9b5edc93ce28f06d6b5a1f70", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:f18273d11c76959c628caccf58348791d936f0dbb73c5cda16c31a05d5575d70", "content": "You can use the `flow-execution-repository` element (in XML) or the `FlowExecutor` interface (in Java) to tune flow execution persistence settings.\n\nThe following example tunes flow execution in XML:\n\n====\n[source,xml]\n----\n<webflow:flow-executor id=\"flowExecutor\" flow-registry=\"flowRegistry\">\n <webflow:flow-execution-repository max-executions=\"5\" max-execution-snapshots=\"30\" />\n</webflow:flow-executor>\n----\n====\n\nThe following example tunes flow execution in Java:\n\n====\n[source,java]\n----\n@Bean\npublic FlowExecutor flowExecutor() {\n return getFlowExecutorBuilder(flowRegistry())\n .setMaxFlowExecutions(5)\n .setMaxFlowExecutionSnapshots(30)\n .build();\n}\n----\n====\n\n[[_repository_max_executions]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Tuning Flow Execution Persistence", "heading_level": 4, "file_order": 11, "section_index": 20, "content_hash": "f18273d11c76959c628caccf58348791d936f0dbb73c5cda16c31a05d5575d70", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:f98eac685e22be9d6d329e9f56c86dbd383f2d728857427a0eec7db7926a521a", "content": "You can tune the `max-executions` attribute (in XML) to place a cap on the number of flow executions that can be created per user session.\nWhen the maximum number of executions is exceeded, the oldest execution is removed.\n\nNOTE: The `max-executions` attribute is per user session.\nThat is, it works across instances of any flow definition.\n\n[[_repository_max_snapshots]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Tuning `max-executions`", "heading_level": 5, "file_order": 11, "section_index": 21, "content_hash": "f98eac685e22be9d6d329e9f56c86dbd383f2d728857427a0eec7db7926a521a", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:f3fa1e73e58b69a0f2b158fdee141eb6546edba2114f89ce79b24a0d775a5c8d", "content": "You can tune the `max-execution-snapshots` attribute to place a cap on the number of history snapshots that can be taken per flow execution.\nTo disable snapshotting, set this value to 0.\nTo enable an unlimited number of snapshots, set this value to -1.\n\nNOTE: History snapshots enable browser back button support.\nWhen snapshotting is disabled, pressing the browser back button does not work.\nDoing so results in using an execution key that points to a snapshot that has not been recorded.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/system-setup.adoc", "title": "system-setup", "heading": "Tuning `max-execution-snapshots`", "heading_level": 5, "file_order": 11, "section_index": 22, "content_hash": "f3fa1e73e58b69a0f2b158fdee141eb6546edba2114f89ce79b24a0d775a5c8d", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/system-setup.adoc"}}
{"id": "sha256:e7ccc5d8dad045a5b7b376b7771b252ee8ce206bb5ac9be2d01e57efc9668fe3", "content": "[[_testing]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/testing.adoc", "title": "testing", "heading": "testing", "heading_level": 1, "file_order": 12, "section_index": 0, "content_hash": "e7ccc5d8dad045a5b7b376b7771b252ee8ce206bb5ac9be2d01e57efc9668fe3", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/testing.adoc"}}
{"id": "sha256:08adc6cd63cdebdf55dec70a86aa506f1fd549c3d0302f8fe9527f2c6ab5e565", "content": "This chapter shows you how to test flows.\n\n[[_extending_abstractflowexecutiontest]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/testing.adoc", "title": "testing", "heading": "Testing Flows", "heading_level": 2, "file_order": 12, "section_index": 1, "content_hash": "08adc6cd63cdebdf55dec70a86aa506f1fd549c3d0302f8fe9527f2c6ab5e565", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/testing.adoc"}}
{"id": "sha256:7034efa0027705d466665fd471a84a5ae03e6b45a7be0132bfa9c81f8da89746", "content": "To test the execution of a XML-based flow definition, you must extend `AbstractXmlFlowExecutionTests`, as follows:\n\n====\n[source,java]\n----\npublic class BookingFlowExecutionTests extends AbstractXmlFlowExecutionTests {\n\n}\n----\n====\n\n[[_override_getresource]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/testing.adoc", "title": "testing", "heading": "Extending `AbstractXmlFlowExecutionTests`", "heading_level": 3, "file_order": 12, "section_index": 2, "content_hash": "7034efa0027705d466665fd471a84a5ae03e6b45a7be0132bfa9c81f8da89746", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/testing.adoc"}}
{"id": "sha256:a4b10684dd1b01f3a6ed26bd017fa298b8dfcbc6b97413c4a4d04d96f1c75c04", "content": "At a minimum, you must override `getResource(FlowDefinitionResourceFactory)` to return the path to the flow you wish to test, as follows:\n\n====\n[source,java]\n----\n@Override\nprotected FlowDefinitionResource getResource(FlowDefinitionResourceFactory resourceFactory) {\n\treturn resourceFactory.createFileResource(\"src/main/webapp/WEB-INF/hotels/booking/booking.xml\");\n}\n----\n====\n\n[[_override_configureflowbuildercontext]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/testing.adoc", "title": "testing", "heading": "Specifying the Path to the Flow to Test", "heading_level": 3, "file_order": 12, "section_index": 3, "content_hash": "a4b10684dd1b01f3a6ed26bd017fa298b8dfcbc6b97413c4a4d04d96f1c75c04", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/testing.adoc"}}
{"id": "sha256:f18e87b7d21a128b3b108778309a7bd2c7c1786dfa0c45b0e511f853e74ad412", "content": "If your flow has dependencies on externally managed services, you must also override `configureFlowBuilderContext(MockFlowBuilderContext)` to register stubs or mocks of those services, as follows:\n\n====\n[source,java]\n----\n@Override\nprotected void configureFlowBuilderContext(MockFlowBuilderContext builderContext) {\n\tbuilderContext.registerBean(\"bookingService\", new StubBookingService());\n}\n----\n====\n\nIf your flow extends from another flow or has states that extend other states, you must also override `getModelResources(FlowDefinitionResourceFactory)` to return the path to the parent flows, as follows:\n\n====\n[source,java]\n----\n@Override\nprotected FlowDefinitionResource[] getModelResources(FlowDefinitionResourceFactory resourceFactory) {\n\treturn new FlowDefinitionResource[] {\n resourceFactory.createFileResource(\"src/main/webapp/WEB-INF/common/common.xml\")\n\t};\n}\n----\n====\n\n[[_testing_flowstartup]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/testing.adoc", "title": "testing", "heading": "Registering Flow Dependencies", "heading_level": 3, "file_order": 12, "section_index": 4, "content_hash": "f18e87b7d21a128b3b108778309a7bd2c7c1786dfa0c45b0e511f853e74ad412", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/testing.adoc"}}
{"id": "sha256:8a728a05d7ca07a5b85f44a6a8c301ff589633f34a5a9526f224f779dcdfef51", "content": "The following example shows how to have your first test exercise the startup of your flow:\n\n====\n[source,java]\n----\npublic void testStartBookingFlow() {\n\n\tBooking booking = createTestBooking();\n\n\tMutableAttributeMap input = new LocalAttributeMap();\n\tinput.put(\"hotelId\", \"1\");\n\tMockExternalContext context = new MockExternalContext();\n\tcontext.setCurrentUser(\"keith\");\n\tstartFlow(input, context);\n\n\tassertCurrentStateEquals(\"enterBookingDetails\");\n\tassertTrue(getRequiredFlowAttribute(\"booking\") instanceof Booking);\n}\n----\n====\n\nAssertions generally verify that the flow is in the state you expect.\n\n[[_testing_flowevents]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/testing.adoc", "title": "testing", "heading": "Testing Flow Startup", "heading_level": 3, "file_order": 12, "section_index": 5, "content_hash": "8a728a05d7ca07a5b85f44a6a8c301ff589633f34a5a9526f224f779dcdfef51", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/testing.adoc"}}
{"id": "sha256:2cd0572c226bfb73f0bce3a18e5731af657df5671c5ae33aaa8b263473de866d", "content": "You can define additional tests to exercise flow event-handling behavior.\nYour goal should be to exercise all paths through the flow.\nYou can use the convenient `setCurrentState(String)` method to jump to the flow state where you wish to begin your test, as follows:\n\n====\n[source,java]\n----\npublic void testEnterBookingDetails_Proceed() {\n\n\tsetCurrentState(\"enterBookingDetails\");\n\n\tgetFlowScope().put(\"booking\", createTestBooking());\n\n\tMockExternalContext context = new MockExternalContext();\n\tcontext.setEventId(\"proceed\");\n\tresumeFlow(context);\n\n\tassertCurrentStateEquals(\"reviewBooking\");\n}\n----\n====\n\n[[_testing_mockingsubflows]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/testing.adoc", "title": "testing", "heading": "Testing Flow Event Handling", "heading_level": 3, "file_order": 12, "section_index": 6, "content_hash": "2cd0572c226bfb73f0bce3a18e5731af657df5671c5ae33aaa8b263473de866d", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/testing.adoc"}}
{"id": "sha256:d7e2b6c82d8017904a4b7c4e5396c463db010de70e226c3a33f0fda27ede2d77", "content": "To test calling a sub-flow, you can register a mock implementation of the sub-flow that asserts input was passed in correctly and returns the correct outcome for your test scenario, as follows:\n\n====\n[source,java]\n----\npublic void testBookHotel() {\n\n\tsetCurrentState(\"reviewHotel\");\n\n\tHotel hotel = new Hotel();\n\thotel.setId(1L);\n\thotel.setName(\"Jameson Inn\");\n\tgetFlowScope().put(\"hotel\", hotel);\n\n\tgetFlowDefinitionRegistry().registerFlowDefinition(createMockBookingSubflow());\n\n\tMockExternalContext context = new MockExternalContext();\n\tcontext.setEventId(\"book\");\n\tresumeFlow(context);\n\n\t// verify flow ends on 'bookingConfirmed'\n\tassertFlowExecutionEnded();\n\tassertFlowExecutionOutcomeEquals(\"finish\");\n}\n\npublic Flow createMockBookingSubflow() {\n\tFlow mockBookingFlow = new Flow(\"booking\");\n\tmockBookingFlow.setInputMapper(new Mapper() {\n public MappingResults map(Object source, Object target) {\n // assert that 1L was passed in as input\n assertEquals(1L, ((AttributeMap) source).get(\"hotelId\"));\n return null;\n }\n\t});\n\t// immediately return the bookingConfirmed outcome so the caller can respond\n\tnew EndState(mockBookingFlow, \"bookingConfirmed\");\n\treturn mockBookingFlow;\n}\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/testing.adoc", "title": "testing", "heading": "Mocking a Sub-flow", "heading_level": 3, "file_order": 12, "section_index": 7, "content_hash": "d7e2b6c82d8017904a4b7c4e5396c463db010de70e226c3a33f0fda27ede2d77", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/testing.adoc"}}
{"id": "sha256:518e2fbc75cf36102a0cb7da452ee6a3c24498c4a8bed359e3453b31f380945a", "content": "[[_views]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "views", "heading_level": 1, "file_order": 13, "section_index": 0, "content_hash": "518e2fbc75cf36102a0cb7da452ee6a3c24498c4a8bed359e3453b31f380945a", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:d45a028bfdf7b942be24d04bb69c92a90659626ec1e2f3fd7fc8c4b623575865", "content": "This chapter shows you how to use the `view-state` element to render views within a flow.\n\n[[_view_convention]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Rendering Views", "heading_level": 2, "file_order": 13, "section_index": 1, "content_hash": "d45a028bfdf7b942be24d04bb69c92a90659626ec1e2f3fd7fc8c4b623575865", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:6dc390ddd4403f3359ee66e521a8ecb911f02e5a4473667dfb6e1cba8f665f7b", "content": "The `view-state` element defines a step of the flow that renders a view and waits for a user event to resume, as follows:\n\n====\n[source,xml]\n----\n<view-state id=\"enterBookingDetails\">\n <transition on=\"submit\" to=\"reviewBooking\" />\n</view-state>\n----\n====\n\nBy convention, a `view-state` maps its ID to a view template in the directory where the flow is located.\nFor example, the state in the preceding example might render `/WEB-INF/hotels/booking/enterBookingDetails.xhtml` if the flow itself was located in the `/WEB-INF/hotels/booking` directory.\n\nThe following image shows a sample directory structure with views and other resources, such as message bundles co-located with their flow definition:\n\nimage::images/flow-view-packaging.png[]\n\n[[_view_explicit]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Defining View States", "heading_level": 3, "file_order": 13, "section_index": 2, "content_hash": "6dc390ddd4403f3359ee66e521a8ecb911f02e5a4473667dfb6e1cba8f665f7b", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:9538e6949af5195c297390438e9827aca0972f31ddbe78f72062825d357d2ee0", "content": "You can use the `view` attribute to explicitly specify the ID of the view to render.\n\n[[_view_explicit_flowrelative]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Specifying View Identifiers", "heading_level": 3, "file_order": 13, "section_index": 3, "content_hash": "9538e6949af5195c297390438e9827aca0972f31ddbe78f72062825d357d2ee0", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:c197fb6989979b95fa63e1da8354265204d843e042c795c596141ec05c262e16", "content": "The view ID may be a relative path to view resource in the flow's working directory, as follows:\n\n====\n[source,xml]\n----\n<view-state id=\"enterBookingDetails\" view=\"bookingDetails.xhtml\">\n----\n====\n\n[[_view_explicit_absolute]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Flow Relative View IDs", "heading_level": 4, "file_order": 13, "section_index": 4, "content_hash": "c197fb6989979b95fa63e1da8354265204d843e042c795c596141ec05c262e16", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:9043b3cf8ff896b0758f639b6cd1047cc976fed8dc1112ffadda77699ba34ede", "content": "The view ID may be a absolute path to a view resource in the webapp root directory, as follows:\n\n====\n[source,xml]\n----\n<view-state id=\"enterBookingDetails\" view=\"/WEB-INF/hotels/booking/bookingDetails.xhtml\">\n----\n====\n\n[[_view_explicit_logical]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Absolute View IDs", "heading_level": 4, "file_order": 13, "section_index": 5, "content_hash": "9043b3cf8ff896b0758f639b6cd1047cc976fed8dc1112ffadda77699ba34ede", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:044bcd2b24a610556d3c1af82cf05d8164e9bb6daad142f73140a2340189ec32", "content": "With some view frameworks, such as Spring MVC's view framework, the view ID may also be a logical identifier resolved by the framework, as follows:\n\n====\n[source,xml]\n----\n<view-state id=\"enterBookingDetails\" view=\"bookingDetails\">\n----\n====\n\nSee the Spring MVC integration section for more information on how to integrate with the MVC `ViewResolver` infrastructure.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Logical View IDs", "heading_level": 4, "file_order": 13, "section_index": 6, "content_hash": "044bcd2b24a610556d3c1af82cf05d8164e9bb6daad142f73140a2340189ec32", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:8eb18e970d67f9b313261a046b3a2a939cad04801cce2066900335e1ae666bfb", "content": "A `view-state` allocates a new `viewScope` when it enters.\nYou can reference this scope within the `view-state` to assign variables that should live for the duration of the state.\nThis scope is useful for manipulating objects over a series of requests from the same view -- often Ajax requests.\nA `view-state` destroys its `viewScope` when it exits.\n\n[[_view_scope_var]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "View scope", "heading_level": 3, "file_order": 13, "section_index": 7, "content_hash": "8eb18e970d67f9b313261a046b3a2a939cad04801cce2066900335e1ae666bfb", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:22ec1cd3d61e8a7a4f1d0660a55bb493250c0f0e4c7c8fc8dcf45ebded178174", "content": "You can use the `var` tag to declare a view variable.\nAs with a flow variable, any `@Autowired` references are automatically restored when the view state resumes.\nThe following listing declares a view variable:\n\n====\n[source,xml]\n----\n<var name=\"searchCriteria\" class=\"com.mycompany.myapp.hotels.SearchCriteria\" />\n----\n====\n\n[[_view_scope_actions]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Allocating View Variables", "heading_level": 4, "file_order": 13, "section_index": 8, "content_hash": "22ec1cd3d61e8a7a4f1d0660a55bb493250c0f0e4c7c8fc8dcf45ebded178174", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:fbcf95e2acfcd46c278144f987d36828750ba647ecb6958c4ac98d4acab7ea28", "content": "You can use the `on-render` tag to assign a variable from an action result before the view renders, as follows:\n\n====\n[source,xml]\n----\n<on-render>\n <evaluate expression=\"bookingService.findHotels(searchCriteria)\" result=\"viewScope.hotels\" />\n</on-render>\n----\n====\n\n[[_view_scope_ajax]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Assigning a `viewScope` Variable", "heading_level": 4, "file_order": 13, "section_index": 9, "content_hash": "fbcf95e2acfcd46c278144f987d36828750ba647ecb6958c4ac98d4acab7ea28", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:fc08379d78a351cdaa05453e1927eea4cafa942201e7c8c5363db9beafbd1eb1", "content": "Objects in view scope are often manipulated over a series of requests from the same view.\nThe list is updated in view scope before each rendering.\nAsynchronous event handlers modify the current data page and then request re-rendering of the search results fragment.\nThe following example pages through a search results list:\n\n====\n[source,xml]\n----\n<view-state id=\"searchResults\">\n <on-render>\n <evaluate expression=\"bookingService.findHotels(searchCriteria)\"\n result=\"viewScope.hotels\" />\n </on-render>\n <transition on=\"next\">\n <evaluate expression=\"searchCriteria.nextPage()\" />\n <render fragments=\"searchResultsFragment\" />\n </transition>\n <transition on=\"previous\">\n <evaluate expression=\"searchCriteria.previousPage()\" />\n <render fragments=\"searchResultsFragment\" />\n </transition>\n</view-state>\n----\n====\n\n[[_view_on_render]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Manipulating Objects in View Scope", "heading_level": 4, "file_order": 13, "section_index": 10, "content_hash": "fc08379d78a351cdaa05453e1927eea4cafa942201e7c8c5363db9beafbd1eb1", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:6bd0e1e3e6217c3ff493edff2960d2cc5080c9aba96e2a072ce5361466d58263", "content": "The `on-render` element runs one or more actions before view rendering.\nRender actions are run on the initial render as well as on any subsequent refreshes, including any partial re-renderings of the view.\nThe following listing defines an `on-render` element:\n\n====\n[source,xml]\n----\n<on-render>\n <evaluate expression=\"bookingService.findHotels(searchCriteria)\" result=\"viewScope.hotels\" />\n</on-render>\n----\n====\n\n[[_view_model]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Running Render Actions", "heading_level": 3, "file_order": 13, "section_index": 11, "content_hash": "6bd0e1e3e6217c3ff493edff2960d2cc5080c9aba96e2a072ce5361466d58263", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:a3b92eebb1ff19c409cbd9ee8ab282114238d0ba1fa439dbe964af2f155e39eb", "content": "You can use the `model` attribute to declare a model to which object the view binds.\nThis attribute is typically used in conjunction with views that render data controls, such as forms.\nIt lets form data binding and validation behaviors to be driven from metadata on your model object.\n\nThe following example declares an `enterBookingDetails` state that manipulates the `booking` model:\n\n====\n[source,xml]\n----\n<view-state id=\"enterBookingDetails\" model=\"booking\">\n----\n====\n\nThe model may be an object in any accessible scope, such as `flowScope` or `viewScope`.\nSpecifying a `model` triggers the following behavior when a view event occurs:\n\n. View-to-model binding. On view postback, user input values are bound to model object properties for you.\n. Model validation. After binding, if the model object requires validation, that validation logic is invoked.\n\nFor a flow event that can drive a view state transition to be generated, model binding must successfully complete.\nIf model binding fails, the view is re-rendered to let the user revise their edits.\n\n[[_view_type_conversion]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Binding to a Model", "heading_level": 3, "file_order": 13, "section_index": 12, "content_hash": "a3b92eebb1ff19c409cbd9ee8ab282114238d0ba1fa439dbe964af2f155e39eb", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:63ae64eaa2b9e2597506cd30032c747d779254920e1e541f50104f54bd5b8f69", "content": "When request parameters are used to populate the model (commonly referred to as data binding), type conversion is required to parse string-based request parameter values before setting target model properties.\nDefault type conversion is available for many common Java types such as numbers, primitives, enums, and Dates.\nUsers can also register their own type conversion logic for user-defined types and to override the default converters.\n\n[[_converter_options]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Performing Type Conversion", "heading_level": 3, "file_order": 13, "section_index": 13, "content_hash": "63ae64eaa2b9e2597506cd30032c747d779254920e1e541f50104f54bd5b8f69", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:e7566bbc0b770a0dffd858a7b0c5f3e2869f37dedc43a5a3a27fd7470f309c6b", "content": "Starting with version 2.1, Spring Web Flow uses the https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#validation[type conversion] and https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#format[formatting] system for nearly all type conversion needs.\nPreviously, Web Flow applications used a type conversion mechanism that was different from the one in Spring MVC, which relied on the `java.beans.PropertyEditor` abstraction.\nSpring's type conversion was actually influenced by Web Flow's own type conversion system.\nHence, Web Flow users should find it natural to work with Spring type conversion.\nAnother obvious and important benefit of this change is that you can now use a single type conversion mechanism across Spring MVC And Spring Web Flow.\n\n[[_converter_upgrade_to_spring_3]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Type Conversion Options", "heading_level": 4, "file_order": 13, "section_index": 14, "content_hash": "e7566bbc0b770a0dffd858a7b0c5f3e2869f37dedc43a5a3a27fd7470f309c6b", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:aea00a288faa65fd97d51da97d889d83a7181c24bcd5106a29f00261f5f9f24e", "content": "What does this mean, in practical terms, for existing applications? Existing applications are likely registering their own converters of type `org.springframework.binding.convert.converters.Converter` through a sub-class of `DefaultConversionService` available in Spring Binding.\nThose converters can continue to be registered as before.\nThey have been adapted as the Spring `GenericConverter` types and registered with a Spring `org.springframework.core.convert.ConversionService` instance.\nIn other words, existing converters are invoked through Spring's type conversion service.\n\nThe only exception to this rule are named converters, which you can reference from a `binding` element in a `view-state`, as follows:\n\n====\n[source,java]\n----\npublic class ApplicationConversionService extends DefaultConversionService {\n public ApplicationConversionService() {\n addDefaultConverters();\n addDefaultAliases();\n addConverter(\"customConverter\", new CustomConverter());\n }\n}\n----\n[source,xml]\n----\n<view-state id=\"enterBookingDetails\" model=\"booking\">\n <binder>\n <binding property=\"checkinDate\" required=\"true\" converter=\"customConverter\" />\n </binder>\n</view-state>\n----\n====\n\nNamed converters are not supported and cannot be used with the type conversion service available in Spring.\nTherefore, such converters are not adapted and continue to work as before.\nThat is, they do not involve the Spring type conversion.\nHowever, this mechanism is deprecated, and applications are encouraged to favor Spring type conversion and formatting features.\n\nAlso note that the existing Spring Binding `DefaultConversionService` no longer registers any default converters.\nInstead, Web Flow now relies on the default type converters and formatters in Spring.\n\nIn summary, Spring type conversion and formatting is now used almost exclusively in Web Flow.\nAlthough existing applications should work without any changes, we encourage moving towards unifying the type conversion needs of Spring MVC and Spring Web Flow parts of applications.\n\n[[_converter_configuration]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Upgrading to Spring 3 Type Conversion And Formatting", "heading_level": 4, "file_order": 13, "section_index": 15, "content_hash": "aea00a288faa65fd97d51da97d889d83a7181c24bcd5106a29f00261f5f9f24e", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:c60ce87c94f1573f1e9a50136a283bb51c8933e660226a91448ae0f0f19e5096", "content": "In Spring MVC, an instance of a `FormattingConversionService` is created automatically through the custom MVC namespace, as follows:\n\n====\n[source,xml]\n----\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n xsi:schemaLocation=\"\n http://www.springframework.org/schema/mvc\n https://www.springframework.org/schema/mvc/spring-mvc.xsd\n http://www.springframework.org/schema/beans\n https://www.springframework.org/schema/beans/spring-beans.xsd\">\n\n\t<mvc:annotation-driven/>\n----\n====\n\nInternally, that is done with the help of ``FormattingConversionServiceFactoryBean``, which registers a default set of converters and formatters.\nYou can customize the conversion service instance used in Spring MVC through the `conversion-service` attribute, as follows:\n\n====\n[source,xml]\n----\n<mvc:annotation-driven conversion-service=\"applicationConversionService\" />\n----\n====\n\nIn Web Flow, an instance of a Spring Binding `DefaultConversionService`, which does not register any converters, is automatically created.\nInstead, it delegates to a `FormattingConversionService` instance for all type conversion needs.\nBy default, this is not the same `FormattingConversionService` instance as the one used in Spring.\nHowever, that does not make a practical difference until you start registering your own formatters.\n\nYou can customize the `DefaultConversionService` used in Web Flow through the flow-builder-services element, as follows:\n\n====\n[source,xml]\n----\n<webflow:flow-builder-services id=\"flowBuilderServices\" conversion-service=\"defaultConversionService\" />\n----\n====\n\nYou can do the following to register your own formatters for use in both Spring MVC and in Spring Web Flow :\n\n. Create a class to register your custom formatters:\n+\n====\n[source,java]\n----\npublic class ApplicationConversionServiceFactoryBean extends FormattingConversionServiceFactoryBean {\n\n @Override\n protected void installFormatters(FormatterRegistry registry) {\n // ...\n }\n\n}\n----\n====\n. Configure the class for use in Spring MVC:\n+\n====\n[source,xml]\n----\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n xsi:schemaLocation=\"\n http://www.springframework.org/schema/mvc\n https://www.springframework.org/schema/mvc/spring-mvc.xsd\n http://www.springframework.org/schema/beans\n https://www.springframework.org/schema/beans/spring-beans.xsd\">\n\n <mvc:annotation-driven conversion-service=\"applicationConversionService\" />\n\n <!--\n Alternatively if you prefer annotations for DI:\n 1. Add @Component to the factory bean.\n 2. Add a component-scan element (from the context custom namespace) here.\n 3. Remove XML bean declaration below.\n -->\n\n <bean id=\"applicationConversionService\" class=\"somepackage.ApplicationConversionServiceFactoryBean\">\n----\n====\n. Connect the Web Flow `DefaultConversionService` to the same `applicationConversionService` bean used in Spring MVC:\n+\n====\n[source,xml]\n----\n <webflow:flow-registry id=\"flowRegistry\" flow-builder-services=\"flowBuilderServices\" ... />\n\n <webflow:flow-builder-services id=\"flowBuilderServices\" conversion-service=\"defaultConversionService\" ... />\n\n <bean id=\"defaultConversionService\" class=\"org.springframework.binding.convert.service.DefaultConversionService\">\n <constructor-arg ref=\"applicationConversionSevice\"/>\n </bean>\n----\n====\n\nYou can also mix and match.\nYou can register new Spring `Formatter` types through the `applicationConversionService`.\nYou can register existing Spring Binding `Converter` types through the `defaultConversionService`.\n\n[[_converter_working_with]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Configuring Type Conversion and Formatting", "heading_level": 4, "file_order": 13, "section_index": 16, "content_hash": "c60ce87c94f1573f1e9a50136a283bb51c8933e660226a91448ae0f0f19e5096", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:389f6fec7422af64023d4d25387fc8e4059651c0f64a96d50e5291a2e4329126", "content": "``\nAn important concept to understand is the difference between type converters and formatters.\n\nType converters in Spring, provided in ``org.springframework.core``, are for general-purpose type conversion between any two object types.\nIn addition to the most simple `Converter` type, two other interfaces are `ConverterFactory` and `GenericConverter`.\n\nFormatters in Spring, provided in `org.springframework.context`, have the more specialized purpose of representing `Object` instances as `String` instances.\nThe `Formatter` interface extends the `Printer` and `Parser` interfaces for converting an `Object` to a `String` and turning a `String` into an `Object`.\n\nWeb developers may find the `Formatter` interface to be most relevant, because it fits the needs of web applications for type conversion.\n\nNOTE: Object-to-Object conversion is a generalization of the more specific Object-to-String conversion.\nIn fact, `Formatters` are registered as `GenericConverter` types with Spring's `GenericConversionService`, making them equal to any other converter.\n\n[[_converter_formatting_annotations]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Working With Spring Type Conversion And Formatting", "heading_level": 4, "file_order": 13, "section_index": 17, "content_hash": "389f6fec7422af64023d4d25387fc8e4059651c0f64a96d50e5291a2e4329126", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:53acf7582d883d138f0208da1f28323fd45d5c1dd68ceb8124e65bf60b640d65", "content": "One of the best features of the type conversion is the ability to use annotations for better control over formatting in a concise manner.\nYou can place annotations on model attributes and on the arguments of `@Controller` methods that are mapped to requests.\nSpring provides two annotations (`@NumberFormat` and `@DateTimeFormat`), but you can create your own and have them be registered, along with the associated formatting logic.\n\n[[_converter_dates]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Formatting Annotations", "heading_level": 4, "file_order": 13, "section_index": 18, "content_hash": "53acf7582d883d138f0208da1f28323fd45d5c1dd68ceb8124e65bf60b640d65", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:95e12fc3dc5c90dbc61a29a116aa91a0902ea951887ff9a542b44cd84fdb976a", "content": "The `@DateTimeFormat` annotation implies use of http://joda-time.sourceforge.net/[Joda Time].\nIf that is present on the classpath, the use of this annotation is enabled automatically.\nBy default, neither Spring MVC nor Web Flow register any other date formatters or converters.\nTherefore, it is important for applications to register a custom formatter to specify the default way for printing and parsing dates.\nThe `@DateTimeFormat` annotation, on the other hand, provides more fine-grained control where it is necessary to deviate from the default.\n\nFor more information on working with Spring type conversion and formatting, see the relevant sections of the https://docs.spring.io/spring/docs/current/spring-framework-reference/[Spring documentation].\n\n[[_view_bind]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Working With Dates", "heading_level": 4, "file_order": 13, "section_index": 19, "content_hash": "95e12fc3dc5c90dbc61a29a116aa91a0902ea951887ff9a542b44cd84fdb976a", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:8532dcea59e728e7404baf755d6eb12554527712da38d61ab5ca1b33adff1b2c", "content": "You can use the `bind` attribute to suppress model binding and validation for particular view events.\nThe following example suppresses binding when the `cancel` event occurs:\n\n====\n[source,xml]\n----\n<view-state id=\"enterBookingDetails\" model=\"booking\">\n <transition on=\"proceed\" to=\"reviewBooking\">\n <transition on=\"cancel\" to=\"bookingCancelled\" bind=\"false\" />\n</view-state>\n----\n====\n\n[[_view_binder]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Suppressing Binding", "heading_level": 3, "file_order": 13, "section_index": 20, "content_hash": "8532dcea59e728e7404baf755d6eb12554527712da38d61ab5ca1b33adff1b2c", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:29df380784f73878d760320d7b0f5a216e7ffb0c555a2b62945a0c1c07d087bc", "content": "You can use the `binder` element to configure the exact set of model properties to which to apply data binding.\nThis lets you restrict the set of \"`allowed fields`\" per view.\nNot using this could lead to a security issue, depending on the application domain and actual users, since, by default, if the binder element is not specified, all public properties of the model are eligible for data binding by the view.\nBy contrast, when the `binder` element is specified, only the explicitly configured bindings are allowed.\nThe following example uses a `binder` element:\n\n====\n[source,xml]\n----\n<view-state id=\"enterBookingDetails\" model=\"booking\">\n <binder>\n <binding property=\"creditCard\" />\n <binding property=\"creditCardName\" />\n <binding property=\"creditCardExpiryMonth\" />\n <binding property=\"creditCardExpiryYear\" />\n </binder>\n <transition on=\"proceed\" to=\"reviewBooking\" />\n <transition on=\"cancel\" to=\"cancel\" bind=\"false\" />\n</view-state>\n----\n====\n\nEach binding may also apply a converter to format the model property value for display in a custom manner.\nIf no converter is specified, the default converter for the model property's type is used.\nThe following example shows two `binding` elements with `converter` attributes:\n\n====\n[source,xml]\n----\n<view-state id=\"enterBookingDetails\" model=\"booking\">\n <binder>\n <binding property=\"checkinDate\" converter=\"shortDate\" />\n <binding property=\"checkoutDate\" converter=\"shortDate\" />\n <binding property=\"creditCard\" />\n <binding property=\"creditCardName\" />\n <binding property=\"creditCardExpiryMonth\" />\n <binding property=\"creditCardExpiryYear\" />\n </binder>\n <transition on=\"proceed\" to=\"reviewBooking\" />\n <transition on=\"cancel\" to=\"cancel\" bind=\"false\" />\n</view-state>\n----\n====\n\nIn the preceding example, the `shortDate` converter is bound to the `checkinDate` and `checkoutDate` properties.\nYou can register custom converters with the application's `ConversionService`.\n\nEach binding may also apply a required check to generate a validation error if the user-provided value is null on form postback, as follows:\n\n====\n[source,xml]\n----\n\n<view-state id=\"enterBookingDetails\" model=\"booking\">\n <binder>\n <binding property=\"checkinDate\" converter=\"shortDate\" required=\"true\" />\n <binding property=\"checkoutDate\" converter=\"shortDate\" required=\"true\" />\n <binding property=\"creditCard\" required=\"true\" />\n <binding property=\"creditCardName\" required=\"true\" />\n <binding property=\"creditCardExpiryMonth\" required=\"true\" />\n <binding property=\"creditCardExpiryYear\" required=\"true\" />\n </binder>\n <transition on=\"proceed\" to=\"reviewBooking\">\n <transition on=\"cancel\" to=\"bookingCancelled\" bind=\"false\" />\n</view-state>\n----\n====\n\nIn the preceding example, all of the bindings are required.\nIf one or more blank input values are bound, validation errors are generated and the view re-renders with those errors.\n\n[[_view_validate]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Specifying Bindings Explicitly", "heading_level": 3, "file_order": 13, "section_index": 21, "content_hash": "29df380784f73878d760320d7b0f5a216e7ffb0c555a2b62945a0c1c07d087bc", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:7a59739a282160fd1b08455047d486ac593a791ad6ae69ff05d4db2dfad3131c", "content": "Model validation is driven by constraints specified against a model object.\nWeb Flow supports enforcing such constraints programmatically as well as declaratively with JSR-303 Bean Validation annotations.\n\n[[_view_validation_jsr303]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Validating a Model", "heading_level": 3, "file_order": 13, "section_index": 22, "content_hash": "7a59739a282160fd1b08455047d486ac593a791ad6ae69ff05d4db2dfad3131c", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:ae4cc58e490c48ddce489808438112bd7ad0dba20e79f3880f76ff370cd55c4b", "content": "Web Flow provides built-in support for the JSR-303 Bean Validation API, building on the equivalent support available in Spring MVC.\nTo enable JSR-303 validation, configure the flow-builder-services with Spring MVC's `LocalValidatorFactoryBean`, as follows:\n\n====\n[source,xml]\n----\n<webflow:flow-registry flow-builder-services=\"flowBuilderServices\" />\n\n<webflow:flow-builder-services id=\"flowBuilderServices\" validator=\"validator\" />\n\n<bean id=\"validator\" class=\"org.springframework.validation.beanvalidation.LocalValidatorFactoryBean\" />\n----\n====\n\nWith the preceding example in place, the configured validator is applied to all model attributes after data binding.\n\nNote that JSR-303 bean validation and validation by convention (explained in the next section) are not mutually exclusive.\nIn other words, Web Flow applies all available validation mechanisms.\n\n[[_view_validation_jsr303_partial]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "JSR-303 Bean Validation", "heading_level": 4, "file_order": 13, "section_index": 23, "content_hash": "ae4cc58e490c48ddce489808438112bd7ad0dba20e79f3880f76ff370cd55c4b", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:9eefe87b900227cd098beca53d94395a8914b5308f6a2854b381265d1305c802", "content": "JSR-303 Bean Validation supports partial validation through validation groups.\nThe following example defines partial validation:\n\n====\n[source,java]\n----\n@NotNull\n@Size(min = 2, max = 30, groups = State1.class)\nprivate String name;\n----\n====\n\nIn a flow definition, you can specify validation hints on a view state or on a transition, and those are resolved to validation groups.\nThe following example defines validation hints:\n\n====\n[source,xml]\n----\n<view-state id=\"state1\" model=\"myModel\" validation-hints=\"'group1,group2'\">\n----\n====\n\nThe `validation-hints` attribute is an expression that, in the preceding example, resolves to a comma-delimited `String` consisting of two hints: `group1` and `group2`. A `ValidationHintResolver` is used to resolve these hints.\nThe `BeanValidationHintResolver` used by default tries to resolve these strings to class-based bean validation groups.\nTo do that, it looks for matching inner types in the model or its parent.\n\nFor example, given `org.example.MyModel` with inner types `Group1` and `Group2`, it is sufficient to supply the simple type names -- that is, `group1` and `group2`.\nYou can also provide fully qualified type names.\n\nA hint with a value of `default` has a special meaning and is translated to the default validation group in Bean Validation: `jakarta.validation.groups.Default`.\n\nYou can configure a custom `ValidationHintResolver`, if necessary, through the `validationHintResolver` property of the `flow-builder-services` element, as follows:\n\n====\n[source,xml]\n----\n<webflow:flow-registry flow-builder-services=\"flowBuilderServices\" />\n\n<webflow:flow-builder-services id=\"flowBuilderServices\" validator=\"..\" validation-hint-resolver=\"..\" />\n----\n====\n\n[[_view_validation_programmatic]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Partial Validation", "heading_level": 5, "file_order": 13, "section_index": 24, "content_hash": "9eefe87b900227cd098beca53d94395a8914b5308f6a2854b381265d1305c802", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:5bfc2cfdf73cf082c03f0326d39686765e1bdca1e62873128c071a3dc1d6f96a", "content": "There are two ways to perform model validation programatically.\nThe first is to implement validation logic in your model object.\nThe second is to implement an external `Validator`.\nBoth ways provide you with a `ValidationContext` to record error messages and access information about the current user.\n\n[[_view_validation_programmatic_validate_method]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Programmatic Validation", "heading_level": 4, "file_order": 13, "section_index": 25, "content_hash": "5bfc2cfdf73cf082c03f0326d39686765e1bdca1e62873128c071a3dc1d6f96a", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:1ba08800f1cf6432263087bc16390a3c180a1f46bbae4288ecabc58965f94088", "content": "Defining validation logic in your model object is the simplest way to validate its state.\nOnce such logic is structured according to Web Flow conventions, Web Flow automatically invokes that logic during the `view-state` postback lifecycle.\nWeb Flow conventions have you structure model validation logic by `view-state`, letting you validate the subset of model properties that are editable on that view.\nTo do this, create a public method with a name of `validate${state}`, where `${state}` is the ID of your `view-state` for which you want validation to run.\nThe following example performs model validation:\n\n====\n[source,java]\n----\npublic class Booking {\n private Date checkinDate;\n private Date checkoutDate;\n ...\n\n public void validateEnterBookingDetails(ValidationContext context) {\n MessageContext messages = context.getMessageContext();\n if (checkinDate.before(today())) {\n messages.addMessage(new MessageBuilder().error().source(\"checkinDate\").\n defaultText(\"Check in date must be a future date\").build());\n } else if (!checkinDate.before(checkoutDate)) {\n messages.addMessage(new MessageBuilder().error().source(\"checkoutDate\").\n defaultText(\"Check out date must be later than check in date\").build());\n }\n }\n}\n----\n====\n\nIn the preceding example, when a transition is triggered in a `enterBookingDetails` `view-state` that is editing a `Booking` model, Web Flow automatically invokes the `validateEnterBookingDetails(ValidationContext)` method, unless validation has been suppressed for that transition.\nThe following example shows such a `view-state`:\n\n====\n[source,xml]\n----\n<view-state id=\"enterBookingDetails\" model=\"booking\">\n <transition on=\"proceed\" to=\"reviewBooking\">\n</view-state>\n----\n====\n\nYou can define any number of validation methods.\nGenerally, a flow edits a model over a series of views.\nIn that case, you would define a validate method for each `view-state` for which validation needs to run.\n\n[[_view_validation_programmatic_validator]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Implementing a Model Validate Method", "heading_level": 5, "file_order": 13, "section_index": 26, "content_hash": "1ba08800f1cf6432263087bc16390a3c180a1f46bbae4288ecabc58965f94088", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:e26de75b3835930334e9d67439db2c4b6baca187ca9dfcacf1eef1d714aba7fd", "content": "The second way to perform programmatic validation is to define a separate object, called a _validator_, which validates your model object.\nTo do this, first create a class whose name has the pattern `${model}Validator`, where `${model}` is the capitalized form of the model expression, such as `Booking`.\nThen define a public method with a name of `validate${state}`, where `${state}` is the ID of your `view-state`, such as `enterBookingDetails`.\nThe class should then be deployed as a Spring bean.\nAny number of validation methods can be defined.\nThe following example defines such a validator:\n\n====\n[source,java]\n----\n@Component\npublic class BookingValidator {\n public void validateEnterBookingDetails(Booking booking, ValidationContext context) {\n MessageContext messages = context.getMessageContext();\n if (booking.getCheckinDate().before(today())) {\n messages.addMessage(new MessageBuilder().error().source(\"checkinDate\").\n defaultText(\"Check in date must be a future date\").build());\n } else if (!booking.getCheckinDate().before(booking.getCheckoutDate())) {\n messages.addMessage(new MessageBuilder().error().source(\"checkoutDate\").\n defaultText(\"Check out date must be later than check in date\").build());\n }\n }\n}\n----\n====\n\nIn the preceding example, when a transition is triggered in a `enterBookingDetails` `view-state` that is editing a `Booking` model, Web Flow automatically invokes the `validateEnterBookingDetails(Booking, ValidationContext)` method, unless validation has been suppressed for that transition.\n\nA validator can also accept a Spring MVC `Errors` object, which is required for invoking existing Spring validators.\n\nValidators must be registered as Spring beans, employing the `${model}Validator` naming convention, to be automatically detected and invoked.\nIn the preceding example, Spring classpath scanning would detect the `@Component` and automatically register it as a bean with a name of `bookingValidator`.\nThen, any time the `booking` model needs to be validated, this `bookingValidator` instance would be invoked for you.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Implementing a Validator", "heading_level": 5, "file_order": 13, "section_index": 27, "content_hash": "e26de75b3835930334e9d67439db2c4b6baca187ca9dfcacf1eef1d714aba7fd", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:0a743d554df2e09cf2c683ab3cf9fc25f76f7df58a100c03647c93a2f9bcd191", "content": "A _validator_ class can also define a method called `validate` that is not associated (by convention) with any specific `view-state`.\nThe following example defines such a method:\n\n====\n[source,java]\n----\n@Component\npublic class BookingValidator {\n public void validate(Booking booking, ValidationContext context) {\n //...\n }\n}\n----\n====\n\nIn the preceding code sample, the `validate` method is called every time a model of type `Booking` is validated (unless validation has been suppressed for that transition). If needed, the default method can also be called in addition to an existing state-specific method.\nConsider the following example:\n\n====\n[source,java]\n----\n@Component\npublic class BookingValidator {\n public void validate(Booking booking, ValidationContext context) {\n //...\n }\n public void validateEnterBookingDetails(Booking booking, ValidationContext context) {\n //...\n }\n}\n----\n====\n\nIn the preceding code sample, the `validateEnterBookingDetails` method is called first.\nThe default `validate` method is called next.\n\n[[_view_validation_context]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Default Validate Method", "heading_level": 5, "file_order": 13, "section_index": 28, "content_hash": "0a743d554df2e09cf2c683ab3cf9fc25f76f7df58a100c03647c93a2f9bcd191", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:90dfaaa62615cce6ea5e9a74dd06f40855ab1318cbfa262ade3870dda2b7ad3b", "content": "A `ValidationContext` lets you obtain a `MessageContext` to record messages during validation.\nIt also exposes information about the current user, such as the signaled `userEvent` and the current user's `Principal` identity.\nYou can use this information to customize validation logic based on what button or link was activated in the UI or who is authenticated.\nSee the API Javadoc for https://docs.spring.io/spring-webflow/docs/current/api/org/springframework/binding/validation/ValidationContext.html[`ValidationContext`] for more information.\n\n[[_view_validation_suppression]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "The `ValidationContext` Interface", "heading_level": 4, "file_order": 13, "section_index": 29, "content_hash": "90dfaaa62615cce6ea5e9a74dd06f40855ab1318cbfa262ade3870dda2b7ad3b", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:21a7d0c3bd39e4062f31a5ce3d204e820227d3dd19f78b0cacd67547459b767b", "content": "You can use the `validate` attribute to suppress model validation for particular view events, as follows:\n\n====\n[source,xml]\n----\n<view-state id=\"chooseAmenities\" model=\"booking\">\n <transition on=\"proceed\" to=\"reviewBooking\">\n <transition on=\"back\" to=\"enterBookingDetails\" validate=\"false\" />\n</view-state>\n----\n====\n\nIn the preceding example, data binding still occurs on `back`, but validation is suppressed.\n\n[[_view_transitions]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Suppressing Validation", "heading_level": 3, "file_order": 13, "section_index": 30, "content_hash": "21a7d0c3bd39e4062f31a5ce3d204e820227d3dd19f78b0cacd67547459b767b", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:cc273dc4bed8c501debfadbb2abbba961b03b9b1018cc7746af1c6cbc6d33bf1", "content": "You can define one or more `transition` elements to handle user events that may occur on the view.\nA transition may take the user to another view, or it may run an action and re-render the current view.\nA transition may also request the rendering of parts of a view (called \"`fragments`\") when handling an Ajax event.\nFinally, you can also define \"`global`\" transitions that are shared across all views.\n\nThe following sections discuss how to implement view transitions.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Defining View Transitions", "heading_level": 3, "file_order": 13, "section_index": 31, "content_hash": "cc273dc4bed8c501debfadbb2abbba961b03b9b1018cc7746af1c6cbc6d33bf1", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:04cf1e1c4446f085602d5344c95990f8b0397292d21d6b4c95a3cb70215e1141", "content": "A `view-state` transition can invoke one or more actions before running.\nThese actions may return an error result to prevent the transition from exiting the current `view-state`.\nIf an error result occurs, the view re-renders and should display an appropriate message to the user.\n\nIf the transition action invokes a plain Java method, the invoked method may return a boolean, whose value (`true` or `false`) indicates whether the transition should take place or be prevented from running.\nA method can also return a `String` where literal values of `success`, `yes`, or `true` indicate the transition should occur, and any other value means the opposite.\nYou can use this technique to handle exceptions thrown by service-layer methods.\nThe following example invokes an action that calls a service and handles an exceptional situation:\n\n====\n[source,xml]\n----\n<transition on=\"submit\" to=\"bookingConfirmed\">\n <evaluate expression=\"bookingAction.makeBooking(booking, messageContext)\" />\n</transition>\n----\n\n[source,java]\n----\npublic class BookingAction {\n public boolean makeBooking(Booking booking, MessageContext context) {\n try {\n bookingService.make(booking);\n return true;\n } catch (RoomNotAvailableException e) {\n context.addMessage(new MessageBuilder().error().\n .defaultText(\"No room is available at this hotel\").build());\n return false;\n }\n }\n}\n----\n====\n\nWhen there is more than one action defined on a transition, if one returns an error result, the remaining actions in the set are _not_ executed.\nIf you need to ensure one transition action's result cannot impact the execution of another, define a single transition action that invokes a method that encapsulates all the action logic.\n\n[[_event_handlers_global]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Transition Actions", "heading_level": 4, "file_order": 13, "section_index": 32, "content_hash": "04cf1e1c4446f085602d5344c95990f8b0397292d21d6b4c95a3cb70215e1141", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:0d9099f0916e4e76ef63fffded36048ee7e963047194432ac50af3b6af633f31", "content": "You can use the flow's `global-transitions` element to create transitions that apply across all views.\nGlobal transitions are often used to handle global menu links that are part of the layout.\nThe following example defines a `global-transition` element:\n\n====\n[source,xml]\n----\n<global-transitions>\n <transition on=\"login\" to=\"login\" />\n <transition on=\"logout\" to=\"logout\" />\n</global-transitions>\n----\n====\n\n[[_simple_event_handlers]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Global Transitions", "heading_level": 4, "file_order": 13, "section_index": 33, "content_hash": "0d9099f0916e4e76ef63fffded36048ee7e963047194432ac50af3b6af633f31", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:5947bf24688e6475e29b1da0ceb1fb21a021e530b8d9df364640df8c74953b85", "content": "From a `view-state`, you can also define transitions without targets.\nSuch transitions are called \"`event handlers`\".\nThe following example defines such a transition:\n\n====\n[source,xml]\n----\n\n<transition on=\"event\">\n <!-- Handle event -->\n</transition>\n----\n====\n\nThese event handlers do not change the state of the flow.\nThey execute their actions and re-render the current view or one or more fragments of the current view.\n\n[[_event_handlers_render]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Event Handlers", "heading_level": 4, "file_order": 13, "section_index": 34, "content_hash": "5947bf24688e6475e29b1da0ceb1fb21a021e530b8d9df364640df8c74953b85", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:c343c174ed3dc1015d9edc0b6dc2e670c964b8a414da8d420e82131b51084006", "content": "You can use the `render` element within a transition to request partial re-rendering of the current view after handling the event, as follows:\n\n====\n[source,xml]\n----\n<transition on=\"next\">\n <evaluate expression=\"searchCriteria.nextPage()\" />\n <render fragments=\"searchResultsFragment\" />\n</transition>\n----\n====\n\nThe `fragments` attribute should reference the IDs of the view elements you wish to re-render.\nYou can specify multiple elements to re-render by separating them with a comma delimiter.\n\nSuch partial rendering is often used with events signaled by Ajax to update a specific zone of the view.\n\n[[_view_messages]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Rendering Fragments", "heading_level": 4, "file_order": 13, "section_index": 35, "content_hash": "c343c174ed3dc1015d9edc0b6dc2e670c964b8a414da8d420e82131b51084006", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:114666f3c90ec7fd35612fb6a4f2bcf5824bdd276ea6f7620364c603426c4905", "content": "Spring Web Flow's `MessageContext` is an API for recording messages during the course of flow executions.\nYou can add plain text messages to the context, as well as internationalized messages resolved by a Spring `MessageSource`.\nMessages are renderable by views and automatically survive flow execution redirects.\nThree distinct message severities are provided: `info`, `warning`, and `error`.\nIn addition, a convenient `MessageBuilder` exists for fluently constructing messages.\n\n[[_plain_text_message]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Working with Messages", "heading_level": 3, "file_order": 13, "section_index": 36, "content_hash": "114666f3c90ec7fd35612fb6a4f2bcf5824bdd276ea6f7620364c603426c4905", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:349b4cb664aa9633071a3694709240f5561cb49f77ac609fb993e0ed8e771c0a", "content": "You can add plain text messages to the context.\nThe following example shows how to do so:\n\n====\n[source,java]\n----\n\nMessageContext context = ...\nMessageBuilder builder = new MessageBuilder();\ncontext.addMessage(builder.error().source(\"checkinDate\")\n .defaultText(\"Check in date must be a future date\").build());\ncontext.addMessage(builder.warn().source(\"smoking\")\n .defaultText(\"Smoking is bad for your health\").build());\ncontext.addMessage(builder.info()\n .defaultText(\"We have processed your reservation - thank you and enjoy your stay\").build());\n----\n====\n\n[[_plain_text_message_intl]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Adding Plain Text Messages", "heading_level": 4, "file_order": 13, "section_index": 37, "content_hash": "349b4cb664aa9633071a3694709240f5561cb49f77ac609fb993e0ed8e771c0a", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:c520e6a31e5274cbea10ca461ca8e813ae017972c9dee42d7cb237747b398a46", "content": "You can add internationalized (that is, localized) messages to the context.\nThe following example shows how to do so:\n\n====\n[source,java]\n----\nMessageContext context = ...\nMessageBuilder builder = new MessageBuilder();\ncontext.addMessage(builder.error().source(\"checkinDate\").code(\"checkinDate.notFuture\").build());\ncontext.addMessage(builder.warn().source(\"smoking\").code(\"notHealthy\")\n .resolvableArg(\"smoking\").build());\ncontext.addMessage(builder.info().code(\"reservationConfirmation\").build());\n----\n====\n\n[[_message_bundles]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Adding Internationalized Messages", "heading_level": 4, "file_order": 13, "section_index": 38, "content_hash": "c520e6a31e5274cbea10ca461ca8e813ae017972c9dee42d7cb237747b398a46", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:34539b8deb86321604fa2505e5b1f5e63c104592a9c510739df43f0a529909ea", "content": "Internationalized messages are defined in message bundles accessed by a Spring `MessageSource`.\nTo create a flow-specific message bundle, define `messages.properties` files in your flow's directory.\nCreate a default `messages.properties` file and a `.properties` file for each additional `Locale` you need to support.\nThe following example defines a few messages:\n\n====\n[source]\n----\n#messages.properties\ncheckinDate=Check in date must be a future date\nnotHealthy={0} is bad for your health\nreservationConfirmation=We have processed your reservation - thank you and enjoy your stay\n----\n====\n\nFrom within a view or a flow, you may also access message resources by using the `resourceBundle` EL variable, as follows:\n\n====\n[source]\n----\n<h:outputText value=\"#{resourceBundle.reservationConfirmation}\" />\n----\n====\n\n[[_message_generation]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Using Message Bundles", "heading_level": 4, "file_order": 13, "section_index": 39, "content_hash": "34539b8deb86321604fa2505e5b1f5e63c104592a9c510739df43f0a529909ea", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:aef183cd07e5334db18727241fb078b81e783cde6e14d5fee1aef0a4c723d138", "content": "There are several places where Web Flow itself generates messages to display to the user.\nOne important place this occurs is during view-to-model data binding.\nWhen a binding error (such as a type conversion error) occurs, Web Flow maps that error to a message that is automatically retrieved from your resource bundle.\nTo look up the message to display, Web Flow tries resource keys that contain the binding error code and the target property name.\n\nAs an example, consider a binding to the `checkinDate` property of a `Booking` object.\nSuppose the user typed in an alphabetic string.\nIn this case, a type conversion error is raised.\nWeb Flow maps the `typeMismatch` error code to a message by first querying your resource bundle for a message with the following key:\n\n====\n[source]\n----\nbooking.checkinDate.typeMismatch\n----\n====\n\nThe first part of the key is the model class's short name.\nThe second part of the key is the property name.\nThe third part is the error code.\nThis allows for the lookup of a unique message to display to the user when a binding fails on a model property.\nSuch a message might say:\n\n====\n[source]\n----\nbooking.checkinDate.typeMismatch=The check in date must be in the format yyyy-mm-dd.\n----\n====\n\nIf no such resource key of that form can be found, a more generic key is tried.\nThis key is the error code.\nThe field name of the property is provided as a message argument, as follows:\n\n====\n[source]\n----\ntypeMismatch=The {0} field is of the wrong type.\n----\n====\n\n[[_view_popup]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Understanding System-generated Messages", "heading_level": 4, "file_order": 13, "section_index": 40, "content_hash": "aef183cd07e5334db18727241fb078b81e783cde6e14d5fee1aef0a4c723d138", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:771561706acf05f9549bc6e58892ffc70e4a7eb8e10e980047da0ef817967cf7", "content": "You can use the `popup` attribute to render a view in a modal popup dialog, as follows:\n\n====\n[source,xml]\n----\n<view-state id=\"changeSearchCriteria\" view=\"enterSearchCriteria.xhtml\" popup=\"true\">\n----\n====\n\nWhen using Web Flow with the Spring Javascript library, no client-side code is necessary for the popup to display.\nWeb Flow sends a response to the client to request a redirect to the view from a popup, and the client honors the request.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Displaying Popups", "heading_level": 3, "file_order": 13, "section_index": 41, "content_hash": "771561706acf05f9549bc6e58892ffc70e4a7eb8e10e980047da0ef817967cf7", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:d2be2cb74551996548ed0f84f51aa8da6d3c3d805594bec7d13a547ca97d6663", "content": "By default, when you exit a view state and transition to a new view state, you can go back to the previous state by using the browser back button.\nThese view state history policies are configurable on a per-transition basis by using the `history` attribute.\n\n[[_history_discard]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "View Backtracking", "heading_level": 3, "file_order": 13, "section_index": 42, "content_hash": "d2be2cb74551996548ed0f84f51aa8da6d3c3d805594bec7d13a547ca97d6663", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:a86433e2298c6d76c8836d14c26d51d45062d5358c012de6e2c3f508927bc577", "content": "You can set the `history` attribute to `discard` to prevent backtracking to a view, as follows:\n\n====\n[source,xml]\n----\n<transition on=\"cancel\" to=\"bookingCancelled\" history=\"discard\">\n----\n====\n\n[[_history_invalidate]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Discarding History", "heading_level": 4, "file_order": 13, "section_index": 43, "content_hash": "a86433e2298c6d76c8836d14c26d51d45062d5358c012de6e2c3f508927bc577", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
{"id": "sha256:0bec7d4ee6e87f9a53177e99139ab42fd864a2d30c8eaa6f40b32200ab9b103b", "content": "You can set the `history` attribute to `invalidate` to prevent backtracking to a view as well as all previously displayed views, as follows:\n\n====\n[source,xml]\n----\n<transition on=\"confirm\" to=\"bookingConfirmed\" history=\"invalidate\">\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-webflow", "path": "spring-webflow/src/docs/asciidoc/views.adoc", "title": "views", "heading": "Invalidating History", "heading_level": 4, "file_order": 13, "section_index": 44, "content_hash": "0bec7d4ee6e87f9a53177e99139ab42fd864a2d30c8eaa6f40b32200ab9b103b", "source_url": "https://github.com/spring-projects/spring-webflow/blob/d29cc6510cdb560d48af879a8722f2276380c9e2/src/docs/asciidoc/views.adoc"}}
