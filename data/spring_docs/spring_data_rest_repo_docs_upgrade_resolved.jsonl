{"id": "sha256:94f0580101aed4d0abd641c550a7057f57ffe1f0602a6cb28c477d5afae4cfbd", "content": "[[customizing-sdr.adding-sdr-to-spring-mvc-app]]\n\nNOTE: The following steps are unnecessary if you use Spring Boot. For Boot applications, adding `spring-boot-starter-data-rest` automatically adds Spring Data REST to your application.\n\nYou can integrate Spring Data REST with an existing Spring MVC application. In your Spring MVC configuration (most likely where you configure your MVC resources), add a bean reference to the Java configuration class that is responsible for configuring the `RepositoryRestController`. The class name is `org.springframework.data.rest.webmvc.RepositoryRestMvcConfiguration`. The following example shows how to use an `@Import` annotation to add the proper reference:\n\nThe configuration would look like:\n\n====\n.Java\n[source,java,role=\"primary\"]\n----\nimport org.springframework.context.annotation.Import;\nimport org.springframework.data.rest.webmvc.RepositoryRestMvcConfiguration;\n\n@Configuration\n@Import(RepositoryRestMvcConfiguration.class)\npublic class MyApplicationConfiguration {\n\n …\n}\n----\n\n.XML\n[source,xml,role=\"secondary\"]\n----\n<bean class=\"org.springframework.data.rest.webmvc.config.RepositoryRestMvcConfiguration\"/>\n----\n====\n\nWhen your ApplicationContext comes across this bean definition, it bootstraps the necessary Spring MVC resources to fully configure the controller for exporting the repositories it finds in that `ApplicationContext` and any parent contexts.\n\n[[customizing-sdr.adding-sdr-to-spring-mvc-app.required-config]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/adding-sdr-to-spring-mvc-app.adoc", "title": "adding-sdr-to-spring-mvc-app", "heading": "adding-sdr-to-spring-mvc-app", "heading_level": 1, "file_order": 0, "section_index": 0, "content_hash": "94f0580101aed4d0abd641c550a7057f57ffe1f0602a6cb28c477d5afae4cfbd", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/adding-sdr-to-spring-mvc-app.adoc"}}
{"id": "sha256:fafcf39e1e3fbfd45dabaa350df1a7f172f9d5a5d38935f6aba9d7d1ccc2fcb1", "content": "Spring Data REST depends on a couple Spring MVC resources that must be configured correctly for it to work inside an existing Spring MVC application. We tried to isolate those resources from whatever similar resources already exist within your application, but it may be that you want to customize some of the behavior of Spring Data REST by modifying these MVC components.\n\nYou should pay special attention to configuring `RepositoryRestHandlerMapping`, covered in the next section.\n\n[[customizing-sdr.adding-sdr-to-spring-mvc-app.required-config.mapping]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/adding-sdr-to-spring-mvc-app.adoc", "title": "adding-sdr-to-spring-mvc-app", "heading": "More on Required Configuration", "heading_level": 2, "file_order": 0, "section_index": 1, "content_hash": "fafcf39e1e3fbfd45dabaa350df1a7f172f9d5a5d38935f6aba9d7d1ccc2fcb1", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/adding-sdr-to-spring-mvc-app.adoc"}}
{"id": "sha256:edf5ef5872095d315df436f5e8623a3b18d318c1951a5fef2ad38edf54f2f5ed", "content": "We register a custom `HandlerMapping` instance that responds only to the `RepositoryRestController` and only if a path is meant to be handled by Spring Data REST. In order to keep paths that are meant to be handled by your application separate from those handled by Spring Data REST, this custom `HandlerMapping` class inspects the URL path and checks to see if a repository has been exported under that name. If it has, the custom `HandlerMapping` class lets the request be handled by Spring Data REST. If there is no Repository exported under that name, it returns `null`, which means \"`let other `HandlerMapping` instances try to service this request`\".\n\nThe Spring Data REST `HandlerMapping` is configured with `order=(Ordered.LOWEST_PRECEDENCE - 100)`, which means it is usually first in line when it comes time to map a URL path. Your existing application never gets a chance to service a request that is meant for a repository. For example, if you have a repository exported under the name of `person`, then all requests to your application that start with `/person` are handled by Spring Data REST, and your application never sees that request. If your repository is exported under a different name (such as `people`), however, then requests to `/people` go to Spring Data REST and requests to `/person` are handled by your application.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/adding-sdr-to-spring-mvc-app.adoc", "title": "adding-sdr-to-spring-mvc-app", "heading": "`RepositoryRestHandlerMapping`", "heading_level": 3, "file_order": 0, "section_index": 2, "content_hash": "edf5ef5872095d315df436f5e8623a3b18d318c1951a5fef2ad38edf54f2f5ed", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/adding-sdr-to-spring-mvc-app.adoc"}}
{"id": "sha256:0db7e50905607eecbdaf47a2ef5b52cbf6812114c04a1a0f45f4332f8e86c550", "content": "[[customizing-sdr.configuring-cors]]\n\nFor security reasons, browsers prohibit AJAX calls to resources residing outside the current origin. When working with client-side HTTP requests issued by a browser, you want to enable specific HTTP resources to be accessible.\n\nSpring Data REST, as of 2.6, supports https://en.wikipedia.org/wiki/Cross-origin_resource_sharing[Cross-Origin Resource Sharing] (CORS) through link:{springDocsUrl}/web.html#mvc-cors[Spring's CORS] support.\n\n[[customizing-sdr.configuring-cors.config]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/configuring-cors.adoc", "title": "configuring-cors", "heading": "configuring-cors", "heading_level": 1, "file_order": 1, "section_index": 0, "content_hash": "0db7e50905607eecbdaf47a2ef5b52cbf6812114c04a1a0f45f4332f8e86c550", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/configuring-cors.adoc"}}
{"id": "sha256:f12ad1573129371b10e2e49296090f6a6a20f97e9899efcb1e22acd3bd2f4c93", "content": "You can add a `@CrossOrigin` annotation to your repository interfaces to enable CORS for the whole repository. By default, `@CrossOrigin` allows all origins and HTTP methods. The following example shows a cross-origin repository interface definition:\n\n====\n[source, java]\n----\n@CrossOrigin\ninterface PersonRepository extends CrudRepository<Person, Long> {}\n----\n====\n\nIn the preceding example, CORS support is enabled for the whole `PersonRepository`. `@CrossOrigin` provides attributes to configure CORS support, as the following example shows:\n\n====\n[source, java]\n----\n@CrossOrigin(origins = \"http://domain2.example\",\n methods = { RequestMethod.GET, RequestMethod.POST, RequestMethod.DELETE },\n maxAge = 3600)\ninterface PersonRepository extends CrudRepository<Person, Long> {}\n----\n====\n\nThe preceding example enables CORS support for the whole `PersonRepository` by providing one origin, restricted to the `GET`, `POST`, and `DELETE` methods and with a max age of 3600 seconds.\n\n[[customizing-sdr.configuring-cors.controller-config]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/configuring-cors.adoc", "title": "configuring-cors", "heading": "Repository Interface CORS Configuration", "heading_level": 2, "file_order": 1, "section_index": 1, "content_hash": "f12ad1573129371b10e2e49296090f6a6a20f97e9899efcb1e22acd3bd2f4c93", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/configuring-cors.adoc"}}
{"id": "sha256:3daea0656d6dbac0fd28dd14f45819dc391a8d400a61e0a2f57587374d5faac2", "content": "Spring Data REST fully supports link:{springDocsUrl}/web.html#mvc-cors-controller[Spring Web MVC's controller method configuration] on custom REST controllers that share repository base paths, as the following example shows:\n\n====\n[source, java]\n----\n@RepositoryRestController\npublic class PersonController {\n\n @CrossOrigin(maxAge = 3600)\n @RequestMapping(path = \"/people/xml/{id}\", method = RequestMethod.GET, produces = MediaType.APPLICATION_XML_VALUE)\n public Person retrieve(@PathVariable Long id) {\n // …\n }\n}\n----\n====\n\nNOTE: Controllers annotated with `@RepositoryRestController` inherit `@CrossOrigin` configuration from their associated repositories.\n\n[[customizing-sdr.configuring-cors.global-config]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/configuring-cors.adoc", "title": "configuring-cors", "heading": "Repository REST Controller Method CORS Configuration", "heading_level": 2, "file_order": 1, "section_index": 2, "content_hash": "3daea0656d6dbac0fd28dd14f45819dc391a8d400a61e0a2f57587374d5faac2", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/configuring-cors.adoc"}}
{"id": "sha256:d99b61cca0454f35547017e9fc6c3932bf0dfed3d68c1e0f9dc777ff7cf7b41a", "content": "In addition to fine-grained, annotation-based configuration, you probably want to define some global CORS configuration as well. This is similar to Spring Web MVC'S CORS configuration but can be declared within Spring Data REST and combined with fine-grained `@CrossOrigin` configuration. By default, all origins and `GET`, `HEAD`, and `POST` methods are allowed.\n\nNOTE: Existing Spring Web MVC CORS configuration is not applied to Spring Data REST.\n\nThe following example sets an allowed origin, adds the PUT and DELETE HTTP methods, adds and exposes some headers, and sets a maximum age of an hour:\n\n====\n[source, java]\n----\n@Component\npublic class SpringDataRestCustomization implements RepositoryRestConfigurer {\n\n @Override\n public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config, CorsRegistry cors) {\n\n cors.addMapping(\"/person/**\")\n .allowedOrigins(\"http://domain2.example\")\n .allowedMethods(\"PUT\", \"DELETE\")\n .allowedHeaders(\"header1\", \"header2\", \"header3\")\n .exposedHeaders(\"header1\", \"header2\")\n .allowCredentials(false).maxAge(3600);\n }\n}\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/configuring-cors.adoc", "title": "configuring-cors", "heading": "Global CORS Configuration", "heading_level": 2, "file_order": 1, "section_index": 3, "content_hash": "d99b61cca0454f35547017e9fc6c3932bf0dfed3d68c1e0f9dc777ff7cf7b41a", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/configuring-cors.adoc"}}
{"id": "sha256:5073e9d31527d5832ecd995a9c58e3f307b42fa7de1ad1adf8e685f516f8e4c3", "content": "[[customizing-sdr.configuring-the-rest-url-path]]\n\nYou can configure the segments of the URL path under which the resources of a JPA repository are exported. To do so, add an annotation at the class level or at the query method level.\n\nBy default, the exporter exposes your `CrudRepository` by using the name of the domain class. Spring Data REST also applies the https://github.com/atteo/evo-inflector[Evo Inflector] to pluralize this word. Consider the following repository definition:\n\n====\n[source,java]\n----\ninterface PersonRepository extends CrudRepository<Person, Long> {}\n----\n====\n\nThe repository defined by the preceding example is exposed at `http://localhost:8080/persons/`.\n\nTo change how the repository is exported, add a `@RestResource` annotation at the class level, as the following example shows:\n\n====\n[source,java]\n----\n@RepositoryRestResource(path = \"people\")\ninterface PersonRepository extends CrudRepository<Person, Long> {}\n----\n====\n\nThe repository defined by the preceding example is accessible at `http://localhost:8080/people/`.\n\nIf you have query methods defined, those also default to being exposed by their name, as the following example shows:\n\n====\n[source,java]\n----\ninterface PersonRepository extends CrudRepository<Person, Long> {\n\n List<Person> findByName(String name);\n}\n----\n====\n\nThe method in the preceding example is exposed at `http://localhost:8080/persons/search/findByName`.\n\nNOTE: All query method resources are exposed under the `search` resource.\n\nTo change the segment of the URL under which this query method is exposed, you can use the `@RestResource` annotation again, as the following example shows:\n\n====\n[source,java]\n----\n@RepositoryRestResource(path = \"people\")\ninterface PersonRepository extends CrudRepository<Person, Long> {\n\n @RestResource(path = \"names\")\n List<Person> findByName(String name);\n}\n----\n====\n\nNow the query method in the preceding example is exposed at `http://localhost:8080/people/search/names`.\n\n[[customizing-sdr.configuring-the-rest-url-path.rels]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/configuring-the-rest-url-path.adoc", "title": "configuring-the-rest-url-path", "heading": "configuring-the-rest-url-path", "heading_level": 1, "file_order": 2, "section_index": 0, "content_hash": "5073e9d31527d5832ecd995a9c58e3f307b42fa7de1ad1adf8e685f516f8e4c3", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/configuring-the-rest-url-path.adoc"}}
{"id": "sha256:a6ea685523f744d5f2cd622ea0d45d8642bef31c27cf7eeb80424647e5b4f667", "content": "Since these resources are all discoverable, you can also affect how the `rel` attribute is displayed in the links sent out by the exporter.\n\nFor instance, in the default configuration, if you issue a request to `http://localhost:8080/persons/search` to find out what query methods are exposed, you get back a list of links similar to the following:\n\n====\n[source,javascript]\n----\n{\n \"_links\" : {\n \"findByName\" : {\n \"href\" : \"http://localhost:8080/persons/search/findByName\"\n }\n }\n}\n----\n====\n\nTo change the `rel` value, use the `rel` property on the `@RestResource` annotation, as the following example shows:\n\n====\n[source,java]\n----\n@RepositoryRestResource(path = \"people\")\ninterface PersonRepository extends CrudRepository<Person, Long> {\n\n @RestResource(path = \"names\", rel = \"names\")\n List<Person> findByName(String name);\n}\n----\n====\n\nThe preceding example results in the following link value:\n\n====\n[source,javascript]\n----\n{\n \"_links\" : {\n \"names\" : {\n \"href\" : \"http://localhost:8080/persons/search/names\"\n }\n }\n}\n----\n====\n\nNOTE: These snippets of JSON assume you use Spring Data REST's default format of https://stateless.co/hal_specification.html[HAL]. You can turn off HAL, which would cause the output to look different. However, your ability to override `rel` names is totally independent of the rendering format.\n\nYou can change the `rel` of a repository, as the following example shows:\n\n====\n[source,java]\n----\n@RepositoryRestResource(path = \"people\", rel = \"people\")\ninterface PersonRepository extends CrudRepository<Person, Long> {\n\n @RestResource(path = \"names\", rel = \"names\")\n List<Person> findByName(String name);\n}\n----\n====\n\nAltering the `rel` of a repository changes the top-level name, as the following example output shows:\n\n====\n[source,javascript]\n----\n{\n \"_links\" : {\n \"people\" : {\n \"href\" : \"http://localhost:8080/people\"\n },\n …\n }\n}\n----\n====\n\nIn the top level fragment shown in the preceding output:\n\n* `path = \"people\"` changed the value in `href` from `/persons` to `/people`.\n* `rel = \"people\"` changed the name of that link from `persons` to `people`.\n\nWhen you navigate to the `search` resource of this repository, the finder method's `@RestResource` annotation has altered the path, as follows:\n\n====\n[source,javascript]\n----\n{\n \"_links\" : {\n \"names\" : {\n \"href\" : \"http://localhost:8080/people/search/names\"\n }\n }\n}\n----\n====\n\nThis collection of annotations in your repository definition has caused the following changes:\n\n* The Repository-level annotation's `path = \"people\"` is reflected in the base URI with `/people`.\n* The inclusion of a finder method provides you with `/people/search`.\n* `path = \"names\"` creates a URI of `/people/search/names`.\n* `rel = \"names\"` changes the name of that link from `findByNames` to `names`.\n\n[[customizing-sdr.hiding-repositories]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/configuring-the-rest-url-path.adoc", "title": "configuring-the-rest-url-path", "heading": "Handling `rel` Attributes", "heading_level": 2, "file_order": 2, "section_index": 1, "content_hash": "a6ea685523f744d5f2cd622ea0d45d8642bef31c27cf7eeb80424647e5b4f667", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/configuring-the-rest-url-path.adoc"}}
{"id": "sha256:2000ac28d387ea6b64ecdd7292ecfaee2ea48bf3b2e6c00286558a22e7a0bcaa", "content": "You may not want a certain repository, a query method on a repository, or a field of your entity to be exported at all. Examples include hiding fields like `password` on a `User` object and similar sensitive data. To tell the exporter to not export these items, annotate them with `@RestResource` and set `exported = false`.\n\nFor example, to skip exporting a repository, you could create a repository definition similar to the following example:\n\n====\n[source,java]\n----\n@RepositoryRestResource(exported = false)\ninterface PersonRepository extends CrudRepository<Person, Long> {}\n----\n====\n\nTo skip exporting a query method, you can annotate the query method with `@RestResource(exported = false)`, as follows:\n\n====\n[source,java]\n----\n@RepositoryRestResource(path = \"people\", rel = \"people\")\ninterface PersonRepository extends CrudRepository<Person, Long> {\n\n @RestResource(exported = false)\n List<Person> findByName(String name);\n}\n----\n====\n\nSimilarly, to skip exporting a field, you can annotate the field with `@RestResource(exported = false)`, as follows:\n\n====\n[source,java]\n----\n@Entity\npublic class Person {\n\n @Id @GeneratedValue private Long id;\n\n @OneToMany\n @RestResource(exported = false)\n private Map<String, Profile> profiles;\n}\n----\n====\n\nWARNING: Projections provide the means to change what is exported and effectively <<projections-excerpts.hidden-data,side-step these settings>>. If you create any projections against the same domain object, be sure to NOT export the fields.\n\n[[customizing-sdr.hiding-repository-crud-methods]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/configuring-the-rest-url-path.adoc", "title": "configuring-the-rest-url-path", "heading": "Hiding Certain Repositories, Query Methods, or Fields", "heading_level": 2, "file_order": 2, "section_index": 2, "content_hash": "2000ac28d387ea6b64ecdd7292ecfaee2ea48bf3b2e6c00286558a22e7a0bcaa", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/configuring-the-rest-url-path.adoc"}}
{"id": "sha256:9bde916e6d0ec39c962264d895e1d7ccff9cc12323d4e071f09ab544902c260c", "content": "If you do not want to expose a save or delete method on your `CrudRepository`, you can use the `@RestResource(exported = false)` setting by overriding the method you want to turn off and placing the annotation on the overridden version. For example, to prevent HTTP users from invoking the delete methods of `CrudRepository`, override all of them and add the annotation to the overridden methods, as follows:\n\n====\n[source,java]\n----\n@RepositoryRestResource(path = \"people\", rel = \"people\")\ninterface PersonRepository extends CrudRepository<Person, Long> {\n\n @Override\n @RestResource(exported = false)\n void delete(Long id);\n\n @Override\n @RestResource(exported = false)\n void delete(Person entity);\n}\n----\n====\n\nWARNING: It is important that you override _both_ `delete` methods. In the interest of faster runtime performance, the exporter currently uses a somewhat naive algorithm for determining which CRUD method to use. You cannot currently turn off the version of `delete` that takes an ID but export the version that takes an entity instance. For the time being, you can either export the `delete` methods or not. If you want turn them off, keep in mind that you have to annotate both versions with `exported = false`.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/configuring-the-rest-url-path.adoc", "title": "configuring-the-rest-url-path", "heading": "Hiding Repository CRUD Methods", "heading_level": 2, "file_order": 2, "section_index": 3, "content_hash": "9bde916e6d0ec39c962264d895e1d7ccff9cc12323d4e071f09ab544902c260c", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/configuring-the-rest-url-path.adoc"}}
{"id": "sha256:956fd9772045b94e395bd49c7c12d420088bbbac78269500ead086711bc09a67", "content": "[[customizing-sdr.custom-jackson-deserialization]]\n\nSometimes, the behavior of the Spring Data REST `ObjectMapper` (which has been specially configured to use intelligent serializers that can turn domain objects into links and back again) may not handle your domain model correctly. You can structure your data in so many ways that you may find your own domain model does not correctly translate to JSON. It is also sometimes not practical in these cases to support a complex domain model in a generic way. Sometimes, depending on the complexity, it is not even possible to offer a generic solution.\n\nTo accommodate the largest percentage of the use cases, Spring Data REST tries to render your object graph correctly. It tries to serialize unmanaged beans as normal POJOs, and tries to create links to managed beans where necessary. However, if your domain model does not easily lend itself to reading or writing plain JSON, you may want to configure Jackson's `ObjectMapper` with your own custom type mappings and (de)serializers.\n\n[[customizing-sdr.custom-jackson-deserialization.abstract-classes]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/custom-jackson-deserialization.adoc", "title": "custom-jackson-deserialization", "heading": "custom-jackson-deserialization", "heading_level": 1, "file_order": 3, "section_index": 0, "content_hash": "956fd9772045b94e395bd49c7c12d420088bbbac78269500ead086711bc09a67", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/custom-jackson-deserialization.adoc"}}
{"id": "sha256:9b85c7191a89e7168167ef439f01d3c1e616a670f94a07bc58c4673ce9fd55a1", "content": "One key configuration point you might need to hook into is when you use an abstract class (or an interface) in your domain model. Jackson does not, by default, know what implementation to create for an interface. Consider the following example:\n\n====\n[source,java]\n----\n@Entity\npublic class MyEntity {\n\n @OneToMany\n private List<MyInterface> interfaces;\n}\n----\n====\n\nIn a default configuration, Jackson has no idea what class to instantiate when POSTing new data to the exporter. You need to tell Jackson either through an annotation or, more cleanly, by registering a type mapping by using a https://wiki.fasterxml.com/JacksonFeatureModules[Module].\n\nAny `Module` bean declared within the scope of your `ApplicationContext` is picked up by the exporter and registered with its `ObjectMapper`. To add this special abstract class type mapping, you can create a `Module` bean and, in the `setupModule` method, add an appropriate `TypeResolver`, as follows:\n\n====\n[source,java]\n----\npublic class MyCustomModule extends SimpleModule {\n\n private MyCustomModule() {\n super(\"MyCustomModule\", new Version(1, 0, 0, \"SNAPSHOT\"));\n }\n\n @Override\n public void setupModule(SetupContext context) {\n context.addAbstractTypeResolver(\n new SimpleAbstractTypeResolver().addMapping(MyInterface.class,\n MyInterfaceImpl.class));\n }\n}\n----\n====\n\nOnce you have access to the `SetupContext` object in your `Module`, you can do all sorts of cool things to configure Jackon's JSON mapping. You can read more about how https://wiki.fasterxml.com/JacksonFeatureModules[Modules work on Jackson's wiki].\n\n[[customizing-sdr.custom-jackson-deserialization.custom-serializers]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/custom-jackson-deserialization.adoc", "title": "custom-jackson-deserialization", "heading": "Abstract Class Registration", "heading_level": 2, "file_order": 3, "section_index": 1, "content_hash": "9b85c7191a89e7168167ef439f01d3c1e616a670f94a07bc58c4673ce9fd55a1", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/custom-jackson-deserialization.adoc"}}
{"id": "sha256:422ca0bbff18a01a7fb61bc2d85a97104b1f7e09baa78a773fea1a8bb88c6290", "content": "If you want to serialize or deserialize a domain type in a special way, you can register your own implementations with Jackson's `ObjectMapper`. Then the Spring Data REST exporter transparently handles those domain objects correctly.\n\nTo add serializers from your `setupModule` method implementation, you can do something like the following:\n\n====\n[source,java]\n----\npublic class MyCustomModule extends SimpleModule {\n\n …\n\n @Override\n public void setupModule(SetupContext context) {\n\n SimpleSerializers serializers = new SimpleSerializers();\n SimpleDeserializers deserializers = new SimpleDeserializers();\n\n serializers.addSerializer(MyEntity.class, new MyEntitySerializer());\n deserializers.addDeserializer(MyEntity.class, new MyEntityDeserializer());\n\n context.addSerializers(serializers);\n context.addDeserializers(deserializers);\n }\n}\n----\n====\n\nThanks to the custom module shown in the preceding example, Spring Data REST correctly handles your domain objects when they are too complex for the 80% generic use case that Spring Data REST tries to cover.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/custom-jackson-deserialization.adoc", "title": "custom-jackson-deserialization", "heading": "Adding Custom Serializers for Domain Types", "heading_level": 2, "file_order": 3, "section_index": 2, "content_hash": "422ca0bbff18a01a7fb61bc2d85a97104b1f7e09baa78a773fea1a8bb88c6290", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/custom-jackson-deserialization.adoc"}}
{"id": "sha256:c3b7984e380bd444d5e4ae3a21dec92695045891277206a77c02d55d2335148f", "content": "[[customizing-sdr.customizing-json-output]]\n\nSometimes in your application, you need to provide links to other resources from a particular entity. For example, a `Customer` response might be enriched with links to a current shopping cart or links to manage resources related to that entity. Spring Data REST provides integration with https://github.com/spring-projects/spring-hateoas[Spring HATEOAS] and provides an extension hook that lets you alter the representation of resources that go out to the client.\n\n[[customizing-sdr.customizing-json-output.representation-model-processor]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/customizing-json-output.adoc", "title": "customizing-json-output", "heading": "customizing-json-output", "heading_level": 1, "file_order": 4, "section_index": 0, "content_hash": "c3b7984e380bd444d5e4ae3a21dec92695045891277206a77c02d55d2335148f", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/customizing-json-output.adoc"}}
{"id": "sha256:84c4c0e01a6398763020edb5b80b4000a0b0c41b039664cc75b819bfb9772106", "content": "Spring HATEOAS defines a `RepresentationModelProcessor<>` interface for processing entities. All beans of type `RepresentationModelProcessor&lt;EntityModel&lt;T&gt;&gt;` are automatically picked up by the Spring Data REST exporter and triggered when serializing an entity of type `T`.\n\nFor example, to define a processor for a `Person` entity, add a `@Bean` similar to the following (which is taken from the Spring Data REST tests) to your `ApplicationContext`:\n\n====\n[source,java]\n----\n@Bean\npublic RepresentationModelProcessor<EntityModel<Person>> personProcessor() {\n\n return new RepresentationModelProcessor<EntityModel<Person>>() {\n\n @Override\n public EntityModel<Person> process(EntityModel<Person> model) {\n\n model.add(new Link(\"http://localhost:8080/people\", \"added-link\"));\n return model;\n }\n };\n}\n----\n====\n\nIMPORTANT: The preceding example hard codes a link to `http://localhost:8080/people`. If you have a Spring MVC endpoint inside your app to which you wish to link, consider using Spring HATEOAS's https://docs.spring.io/spring-hateoas/docs/current/reference/html/#fundamentals.obtaining-links.builder.methods[`linkTo(...)`] method to avoid managing the URL.\n\n[[customizing-sdr.customizing-json-output.adding-links]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/customizing-json-output.adoc", "title": "customizing-json-output", "heading": "The `RepresentationModelProcessor` Interface", "heading_level": 2, "file_order": 4, "section_index": 1, "content_hash": "84c4c0e01a6398763020edb5b80b4000a0b0c41b039664cc75b819bfb9772106", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/customizing-json-output.adoc"}}
{"id": "sha256:c4cc2ffdaa31daaf0bb9fce80d729654b6e5d0b8b89841624ee54f2f8713b3f4", "content": "You can add links to the default representation of an entity by calling `model.add(Link)`, as the preceding example shows. Any links you add to the `EntityModel` are added to the final output.\n\n[[customizing-sdr.customizing-json-output.customizing-representation]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/customizing-json-output.adoc", "title": "customizing-json-output", "heading": "Adding Links", "heading_level": 2, "file_order": 4, "section_index": 2, "content_hash": "c4cc2ffdaa31daaf0bb9fce80d729654b6e5d0b8b89841624ee54f2f8713b3f4", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/customizing-json-output.adoc"}}
{"id": "sha256:8f1e487a4c61aeaf9266b4b884d05e313fdbc4f93d8176b9365461d3816333f1", "content": "The Spring Data REST exporter runs any discovered `RepresentationModelProcessor` instances before it creates the output representation. It does so by registering a `Converter<Entity, EntityModel>` instance with an internal `ConversionService`. This is the component responsible for creating the links to referenced entities (such as those objects under the `_links` property in the object's JSON representation). It takes an `@Entity` and iterates over its properties, creating links for those properties that are managed by a `Repository` and copying across any embedded or simple properties.\n\nIf your project needs to have output in a different format, however, you can completely replace the default outgoing JSON representation with your own. If you register your own `ConversionService` in the `ApplicationContext` and register your own `Converter<Entity, EntityModel>`, you can return a `EntityModel` implementation of your choosing.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/customizing-json-output.adoc", "title": "customizing-json-output", "heading": "Customizing the Representation", "heading_level": 2, "file_order": 4, "section_index": 3, "content_hash": "8f1e487a4c61aeaf9266b4b884d05e313fdbc4f93d8176b9365461d3816333f1", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/customizing-json-output.adoc"}}
{"id": "sha256:a75658b61edc45c738cdecdfaf5a7d18637fb7842eb31c84e3e725f577f1d722", "content": "[[customizing-sdr.overriding-sdr-response-handlers]]\n\nSometimes, you may want to write a custom handler for a specific resource.\nTo take advantage of Spring Data REST's settings, message converters, exception handling, and more, use the `@RepositoryRestController` annotation instead of a standard Spring MVC `@Controller` or `@RestController`.\nControllers annotated with `@RepositoryRestController` are served from the API base path defined in `RepositoryRestConfiguration.setBasePath`, which is used by all other RESTful endpoints (for example, `/api`).\nThe following example shows how to use the `@RepositoryRestController` annotation:\n\n====\n[source,java]\n----\n@RepositoryRestController\nclass ScannerController {\n\n private final ScannerRepository repository;\n\n ScannerController(ScannerRepository repository) { // <1>\n this.repository = repository;\n }\n\n @GetMapping(path = \"/scanners/search/producers\") // <2>\n ResponseEntity<?> getProducers() {\n\n List<String> producers = repository.listProducers(); // <3>\n\n // do some intermediate processing, logging, etc. with the producers\n\n CollectionModel<String> resources = CollectionModel.of(producers); // <4>\n\n resources.add(linkTo(methodOn(ScannerController.class).getProducers()).withSelfRel()); // <5>\n\n // add other links as needed\n\n return ResponseEntity.ok(resources); // <6>\n }\n}\n----\n<1> This example uses constructor injection.\n<2> This handler plugs in a custom handler method as query method resource\n<3> This handler uses the underlying repository to fetch data, but then does some form of post processing before returning the final data set to the client.\n<4> The results of type T need to be wrapped up in a Spring HATEOAS `CollectionModel<T>` object to return a collection. `EntityModel<T>` or `RepresentationModel<T>` are suitable wrappers for a single item, respectively.\n<5> Add a link back to this exact method as a `self` link.\n<6> Returning the collection by using Spring MVC's `ResponseEntity` wrapper ensures that the collection is properly wrapped and rendered in the proper accept type.\n====\n\n`CollectionModel` is for a collection, while `EntityModel` -- or the more general class `RepresentationModel` -- is for a single item. These types can be combined. If you know the links for each item in a collection, use `CollectionModel<EntityModel<String>>` (or whatever the core domain type is rather than `String`). Doing so lets you assemble links for each item as well as for the whole collection.\n\nIMPORTANT: In this example, the combined path is `RepositoryRestConfiguration.getBasePath()` + `/scanners/search/producers`.\n\n[[customizing-sdr.aggregate-references]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/overriding-sdr-response-handlers.adoc", "title": "overriding-sdr-response-handlers", "heading": "overriding-sdr-response-handlers", "heading_level": 1, "file_order": 5, "section_index": 0, "content_hash": "a75658b61edc45c738cdecdfaf5a7d18637fb7842eb31c84e3e725f577f1d722", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/overriding-sdr-response-handlers.adoc"}}
{"id": "sha256:7e67bd64750a98c3949f02663573ea2fa3f5f68d4fe6d0ccb5b558572b4c90b7", "content": "For custom controllers receiving `PUT` and `POST` requests, the request body usually contains a JSON document that will use URIs to express references to other resources.\nFor `GET` requests, those references are handed in via a request parameter.\n\nAs of Spring Data REST 4.1, we provide `AggregateReference<T, ID>` to be used as handler method parameter type to capture such references and resolve them into either the referenced aggregate's identifier, the aggregate itself or a jMolecules `Association`.\nAll you need to do is declare an `@RequestParam` of that type and then consume either the identifier or the fully resolved aggregate.\n\n[source,java]\n----\n@RepositoryRestController\nclass ScannerController {\n\n private final ScannerRepository repository;\n\n ScannerController(ScannerRepository repository) {\n this.repository = repository;\n }\n\n @GetMapping(path = \"/scanners\")\n ResponseEntity<?> getProducers(\n @RequestParam AggregateReference<Producer, ProducerIdentifier> producer) {\n\n var identifier = producer.resolveRequiredId();\n // Alternatively\n var aggregate = producer.resolveRequiredAggregate();\n }\n\n // Alternatively\n\n @GetMapping(path = \"/scanners\")\n ResponseEntity<?> getProducers(\n @RequestParam AssociationAggregateReference<Producer, ProducerIdentifier> producer) {\n\n var association = producer.resolveRequiredAssociation();\n }\n}\n----\n\nIn case you are using jMolecules, `AssociationAggregateReference` also allows you to obtain an `Association`.\nWhile both of the abstraction assume the value for the parameter to be a URI matching the scheme that Spring Data REST uses to expose item resources, that source value resolution can be customized by calling `….withIdSource(…)` on the reference instance to provide a function to extract the identifier value to be used for aggregate resolution eventually from the `UriComponents` obtained from the URI received.\n\n[[customizing-sdr.overriding-sdr-response-handlers.annotations]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/overriding-sdr-response-handlers.adoc", "title": "overriding-sdr-response-handlers", "heading": "Obtaining Aggregate References", "heading_level": 2, "file_order": 5, "section_index": 1, "content_hash": "7e67bd64750a98c3949f02663573ea2fa3f5f68d4fe6d0ccb5b558572b4c90b7", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/overriding-sdr-response-handlers.adoc"}}
{"id": "sha256:d2eb8c5bbded4416396e1cc89d0459fc548bfa23fdbd876e9e07ed4a97744d20", "content": "If you are not interested in entity-specific operations but still want to build custom operations underneath `basePath`, such as Spring MVC views, resources, and others, use `@BasePathAwareController`.\nIf you're using `@RepositoryRestController` on your custom controller, it will only handle the request if your request mappings blend into the URI space used by the repository.\nIt will also apply the following extra functionality to the controller methods:\n\n. CORS configuration according as defined for the repository mapped to the base path segment used in the request mapping of the handler method.\n. Apply an `OpenEntityManagerInViewInterceptor` if JPA is used to make sure you can access properties marked as to be resolved lazily.\n\nWARNING: If you use `@Controller` or `@RestController` for anything, that code is totally outside the scope of Spring Data REST. This extends to request handling, message converters, exception handling, and other uses.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing/overriding-sdr-response-handlers.adoc", "title": "overriding-sdr-response-handlers", "heading": "`@RepositoryRestController` VS. `@BasePathAwareController`", "heading_level": 2, "file_order": 5, "section_index": 2, "content_hash": "d2eb8c5bbded4416396e1cc89d0459fc548bfa23fdbd876e9e07ed4a97744d20", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing/overriding-sdr-response-handlers.adoc"}}
{"id": "sha256:10b89d383e5e07087dcb3420ba375f3621b6ab1cb743e8f93a87d908aaf43fed", "content": "[[example-api-usage-with-curl]]\n[appendix]\n[[using-curl-to-talk-to-spring-data-rest]]\n\nThis appendix contains a list of guides that demonstrate interacting with a Spring Data REST service over cURL:\n\n* https://spring.io/guides/gs/accessing-data-rest/[Accessing JPA Data with REST]\n* https://spring.io/guides/gs/accessing-neo4j-data-rest/[Accessing Neo4j Data with REST]\n* https://spring.io/guides/gs/accessing-mongodb-data-rest/[Accessing MongoDB Data with REST]\n* https://spring.io/guides/gs/accessing-gemfire-data-rest/[Accessing GemFire Data with REST]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/introduction/example-api-usage-with-curl.adoc", "title": "example-api-usage-with-curl", "heading": "example-api-usage-with-curl", "heading_level": 1, "file_order": 6, "section_index": 0, "content_hash": "10b89d383e5e07087dcb3420ba375f3621b6ab1cb743e8f93a87d908aaf43fed", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/introduction/example-api-usage-with-curl.adoc"}}
{"id": "sha256:33df93df75a376e045f8c23b16b838911f34f6a361f40da2b3c3b994ccc87fc9", "content": "[[install-chapter]]\n\nSpring Data REST is itself a Spring MVC application and is designed in such a way that it should integrate with your existing Spring MVC applications with little effort. An existing (or future) layer of services can run alongside Spring Data REST with only minor additional work.\n\n[[getting-started.boot]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/introduction/getting-started.adoc", "title": "getting-started", "heading": "getting-started", "heading_level": 1, "file_order": 7, "section_index": 0, "content_hash": "33df93df75a376e045f8c23b16b838911f34f6a361f40da2b3c3b994ccc87fc9", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/introduction/getting-started.adoc"}}
{"id": "sha256:ced7d6bde6346149e3d410d0903475cdb61eeda04d068317b7fb78c0d65e182a", "content": "The simplest way to get to started is to build a Spring Boot application because Spring Boot has a starter for Spring Data REST and uses auto-configuration. The following example shows how to use Gradle to include Spring Data Rest in a Spring Boot project:\n\n.Spring Boot configuration with Gradle\n====\n[source,groovy]\n----\ndependencies {\n ...\n implementation(\"org.springframework.boot:spring-boot-starter-data-rest\")\n ...\n}\n----\n====\n\nThe following example shows how to use Maven to include Spring Data Rest in a Spring Boot project:\n\n.Spring Boot configuration with Maven\n====\n[source,xml]\n----\n<dependencies>\n ...\n <dependency>\n <groupId>org.springframework.boot</groupId>\n <artifactId>spring-boot-starter-data-rest</artifactId>\n </dependency>\n ...\n</dependencies>\n----\n====\n\nNOTE: You need not supply the version number if you use the https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#build-tool-plugins-gradle-plugin[Spring Boot Gradle plugin] or the https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#build-tool-plugins-maven-plugin[Spring Boot Maven plugin].\n\nWhen you use Spring Boot, Spring Data REST gets configured automatically.\n\n[[getting-started.gradle]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/introduction/getting-started.adoc", "title": "getting-started", "heading": "Adding Spring Data REST to a Spring Boot Project", "heading_level": 2, "file_order": 7, "section_index": 1, "content_hash": "ced7d6bde6346149e3d410d0903475cdb61eeda04d068317b7fb78c0d65e182a", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/introduction/getting-started.adoc"}}
{"id": "sha256:4563096a778ff38a7745227137d29f863cfd8aa3bc8da12fbe399e97889e5d6e", "content": "To add Spring Data REST to a Gradle-based project, add the `spring-data-rest-webmvc` artifact to your compile-time dependencies, as follows:\n\n====\n[source,groovy,subs=\"verbatim,attributes\"]\n----\ndependencies {\n … other project dependencies\n implementation(\"org.springframework.data:spring-data-rest-webmvc:{version}\")\n}\n----\n====\n\n[[getting-started.maven]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/introduction/getting-started.adoc", "title": "getting-started", "heading": "Adding Spring Data REST to a Gradle project", "heading_level": 2, "file_order": 7, "section_index": 2, "content_hash": "4563096a778ff38a7745227137d29f863cfd8aa3bc8da12fbe399e97889e5d6e", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/introduction/getting-started.adoc"}}
{"id": "sha256:a4bdfd4de8b121829d71e3c2cdd2774019f50e6c6796655182ea01b0cb15e3c8", "content": "To add Spring Data REST to a Maven-based project, add the `spring-data-rest-webmvc` artifact to your compile-time dependencies, as follows:\n\n====\n[source,xml,subs=\"verbatim,attributes\"]\n----\n<dependency>\n <groupId>org.springframework.data</groupId>\n <artifactId>spring-data-rest-webmvc</artifactId>\n <version>{version}</version>\n</dependency>\n----\n====\n\n[[getting-started.configuration]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/introduction/getting-started.adoc", "title": "getting-started", "heading": "Adding Spring Data REST to a Maven project", "heading_level": 2, "file_order": 7, "section_index": 3, "content_hash": "a4bdfd4de8b121829d71e3c2cdd2774019f50e6c6796655182ea01b0cb15e3c8", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/introduction/getting-started.adoc"}}
{"id": "sha256:29f35f815525feb5c30b083dbdce314b8220e424814086cc8ef094970ad165f3", "content": "To install Spring Data REST alongside your existing Spring MVC application, you need to include the appropriate MVC configuration.\nSpring Data REST configuration is defined in a class called `RepositoryRestMvcConfiguration` and you can import that class into your application's configuration.\n\nIMPORTANT: This step is unnecessary if you use Spring Boot's auto-configuration. Spring Boot automatically enables Spring Data REST when you include *spring-boot-starter-data-rest* and, in your list of dependencies, your app is flagged with either `@SpringBootApplication` or `@EnableAutoConfiguration`.\n\nTo customize the configuration, register a `RepositoryRestConfigurer` and implement or override the `configure…`-methods relevant to your use case.\n\nMake sure you also configure Spring Data repositories for the store you use. For details on that, see the reference documentation for the https://projects.spring.io/spring-data/[corresponding Spring Data module].\n\n[[getting-started.basic-settings]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/introduction/getting-started.adoc", "title": "getting-started", "heading": "Configuring Spring Data REST", "heading_level": 2, "file_order": 7, "section_index": 4, "content_hash": "29f35f815525feb5c30b083dbdce314b8220e424814086cc8ef094970ad165f3", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/introduction/getting-started.adoc"}}
{"id": "sha256:8c1b324ca5a72c95a01ab23b7f1ba92b3384247dddeca1ab9919d7fce216e92c", "content": "This section covers the basic settings that you can manipulate when you configure a Spring Data REST application, including:\n\n* xref:introduction/getting-started.adoc#getting-started.setting-repository-detection-strategy[Setting the Repository Detection Strategy]\n* xref:introduction/getting-started.adoc#getting-started.changing-base-uri[Changing the Base URI]\n* xref:introduction/getting-started.adoc#getting-started.changing-other-properties[Changing Other Spring Data REST Properties]\n\n[[getting-started.setting-repository-detection-strategy]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/introduction/getting-started.adoc", "title": "getting-started", "heading": "Basic Settings for Spring Data REST", "heading_level": 2, "file_order": 7, "section_index": 5, "content_hash": "8c1b324ca5a72c95a01ab23b7f1ba92b3384247dddeca1ab9919d7fce216e92c", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/introduction/getting-started.adoc"}}
{"id": "sha256:9c1d56a71bacc85b1dc3ccb4b20ef9b3d1ffa023210ddeeb13b22d71b8b6e39a", "content": "Spring Data REST uses a `RepositoryDetectionStrategy` to determine whether a repository is exported as a REST resource. The `RepositoryDiscoveryStrategies` enumeration includes the following values:\n\n.Repository detection strategies\n[cols=\"1,5\". options=\"header\"]\n|===\n| Name | Description\n| `DEFAULT` | Exposes all public repository interfaces but considers the `exported` flag of `@(Repository)RestResource`.\n| `ALL` | Exposes all repositories independently of type visibility and annotations.\n| `ANNOTATED` | Only repositories annotated with `@(Repository)RestResource` are exposed, unless their `exported` flag is set to `false`.\n| `VISIBILITY` | Only public repositories annotated are exposed.\n|===\n\n[[getting-started.changing-base-uri]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/introduction/getting-started.adoc", "title": "getting-started", "heading": "Setting the Repository Detection Strategy", "heading_level": 3, "file_order": 7, "section_index": 6, "content_hash": "9c1d56a71bacc85b1dc3ccb4b20ef9b3d1ffa023210ddeeb13b22d71b8b6e39a", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/introduction/getting-started.adoc"}}
{"id": "sha256:e31eb0f744920c47eb36e3cb54849f690774d6bf1b3b9de45997464fb794a9fb", "content": "By default, Spring Data REST serves up REST resources at the root URI, '/'. There are multiple ways to change the base path.\n\nWith Spring Boot 1.2 and later versions, you can do change the base URI by setting a single property in `application.properties`, as follows:\n\n====\n[source,properties]\n----\nspring.data.rest.basePath=/api\n----\n====\n\nWith Spring Boot 1.1 or earlier, or if you are not using Spring Boot, you can do the following:\n\n====\n[source,java]\n----\n@Configuration\nclass CustomRestMvcConfiguration {\n\n @Bean\n public RepositoryRestConfigurer repositoryRestConfigurer() {\n\n return new RepositoryRestConfigurer() {\n\n @Override\n public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config, CorsRegistry cors) {\n config.setBasePath(\"/api\");\n }\n };\n }\n}\n----\n====\n\nAlternatively, you can register a custom implementation of `RepositoryRestConfigurer` as a Spring bean and make sure it gets picked up by component scanning, as follows:\n\n====\n[source,java]\n----\n@Component\npublic class CustomizedRestMvcConfiguration extends RepositoryRestConfigurer {\n\n @Override\n public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config, CorsRegistry cors) {\n config.setBasePath(\"/api\");\n }\n}\n----\n====\n\nBoth of the preceding approaches change the base path to `/api`.\n\n[[getting-started.changing-other-properties]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/introduction/getting-started.adoc", "title": "getting-started", "heading": "Changing the Base URI", "heading_level": 3, "file_order": 7, "section_index": 7, "content_hash": "e31eb0f744920c47eb36e3cb54849f690774d6bf1b3b9de45997464fb794a9fb", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/introduction/getting-started.adoc"}}
{"id": "sha256:b478c9ea1a7d70f7d6f90ebc9bb895223d68f80a789cba10cd303b4bfb06b01b", "content": "You can alter the following properties:\n\n.Spring Boot configurable properties\n[cols=\"1,5\". options=\"header\"]\n|===\n| Property | Description\n| `basePath` | the root URI for Spring Data REST\n| `defaultPageSize` | change the default for the number of items served in a single page\n| `maxPageSize` | change the maximum number of items in a single page\n| `pageParamName` | change the name of the query parameter for selecting pages\n| `limitParamName` | change the name of the query parameter for the number of items to show in a page\n| `sortParamName` | change the name of the query parameter for sorting\n| `defaultMediaType` | change the default media type to use when none is specified\n| `returnBodyOnCreate` | change whether a body should be returned when creating a new entity\n| `returnBodyOnUpdate` | change whether a body should be returned when updating an entity\n|===\n\n[[getting-started.bootstrap]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/introduction/getting-started.adoc", "title": "getting-started", "heading": "Changing Other Spring Data REST Properties", "heading_level": 3, "file_order": 7, "section_index": 8, "content_hash": "b478c9ea1a7d70f7d6f90ebc9bb895223d68f80a789cba10cd303b4bfb06b01b", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/introduction/getting-started.adoc"}}
{"id": "sha256:bb20a852c1fa0c3715d3d0dbebadebb7c29b8b186635284788b52d854a6f08be", "content": "At this point, you must also configure your key data store.\n\nSpring Data REST officially supports:\n\n* https://projects.spring.io/spring-data-jpa/[Spring Data JPA]\n* https://projects.spring.io/spring-data-mongodb/[Spring Data MongoDB]\n* https://projects.spring.io/spring-data-neo4j/[Spring Data Neo4j]\n* https://projects.spring.io/spring-data-gemfire/[Spring Data GemFire]\n* https://projects.spring.io/spring-data-cassandra/[Spring Data Cassandra]\n\nThe following Getting Started guides can help you get up and running quickly:\n\n* https://spring.io/guides/gs/accessing-data-rest/[Spring Data JPA]\n* https://spring.io/guides/gs/accessing-mongodb-data-rest/[Spring Data MongoDB]\n* https://spring.io/guides/gs/accessing-neo4j-data-rest/[Spring Data Neo4j]\n* https://spring.io/guides/gs/accessing-gemfire-data-rest/[Spring Data GemFire]\n\nThese linked guides introduce how to add dependencies for the related data store, configure domain objects, and define repositories.\n\nYou can run your application as either a Spring Boot app (with the links shown earlier) or configure it as a classic Spring MVC app.\n\nNOTE: In general, Spring Data REST does not add functionality to a given data store. This means that, by definition, it should work with any Spring Data project that supports the repository programming model. The data stores listed above are the ones for which we have written integration tests to verify that Spring Data REST works with them.\n\nFrom this point, you can xref:customizing-sdr.adoc[customize Spring Data REST] with various options.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/introduction/getting-started.adoc", "title": "getting-started", "heading": "Starting the Application", "heading_level": 2, "file_order": 7, "section_index": 9, "content_hash": "bb20a852c1fa0c3715d3d0dbebadebb7c29b8b186635284788b52d854a6f08be", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/introduction/getting-started.adoc"}}
{"id": "sha256:5f85f0e5ecb15162958e469d74621ef871ed679c1862af18d9fd941928dcc84a", "content": "[[spring-data-examples]]\n[appendix]\n[[spring-data-rest-example-projects]]\n\nThis appendix contains a list of Spring Data REST sample applications. The exact version of each example is not guaranteed to match the version of this reference manual.\n\nNOTE: To get them all, visit https://github.com/spring-projects/spring-data-examples and either clone or download a zipball. Doing so gives you example applications for all supported Spring Data projects. To see them, navigate to `spring-data-examples/rest`.\n\n[[spring-data-examples.multi-store]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/introduction/spring-data-rest-examples.adoc", "title": "spring-data-rest-examples", "heading": "spring-data-rest-examples", "heading_level": 1, "file_order": 8, "section_index": 0, "content_hash": "5f85f0e5ecb15162958e469d74621ef871ed679c1862af18d9fd941928dcc84a", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/introduction/spring-data-rest-examples.adoc"}}
{"id": "sha256:abee6f81fa7f4235e781d5e9289cd8b3926f3586042b117102da1586848702b3", "content": "https://github.com/spring-projects/spring-data-examples/tree/master/rest/multi-store[This example] shows how to mix together several underlying Spring Data projects.\n\n[[spring-data-examples.projections]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/introduction/spring-data-rest-examples.adoc", "title": "spring-data-rest-examples", "heading": "Multi-store Example", "heading_level": 2, "file_order": 8, "section_index": 1, "content_hash": "abee6f81fa7f4235e781d5e9289cd8b3926f3586042b117102da1586848702b3", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/introduction/spring-data-rest-examples.adoc"}}
{"id": "sha256:bff9d48bab353d6f72606f67f8e2b435627abef80f728000ca53bd90abaaefa6", "content": "https://github.com/spring-projects/spring-data-examples/tree/master/rest/projections[This example] contains more detailed code you can use to explore xref:projections-excerpts.adoc[projections].\n\n[[spring-data-examples.spring-security]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/introduction/spring-data-rest-examples.adoc", "title": "spring-data-rest-examples", "heading": "Projections", "heading_level": 2, "file_order": 8, "section_index": 2, "content_hash": "bff9d48bab353d6f72606f67f8e2b435627abef80f728000ca53bd90abaaefa6", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/introduction/spring-data-rest-examples.adoc"}}
{"id": "sha256:d1252b27ac0f1a5c59e00398220fb5a249f7f6f14f975ca2cfdaaa634887d5d1", "content": "https://github.com/spring-projects/spring-data-examples/tree/master/rest/security[This example] shows how to secure a https://projects.spring.io/spring-data-rest[Spring Data REST] application in multiple ways with https://projects.spring.io/spring-security[Spring Security].\n\n[[spring-data-examples.starbucks]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/introduction/spring-data-rest-examples.adoc", "title": "spring-data-rest-examples", "heading": "Spring Data REST with Spring Security", "heading_level": 2, "file_order": 8, "section_index": 3, "content_hash": "d1252b27ac0f1a5c59e00398220fb5a249f7f6f14f975ca2cfdaaa634887d5d1", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/introduction/spring-data-rest-examples.adoc"}}
{"id": "sha256:8c70b9db3c6f7e4e5f7adf10e00942981c33cbc7cd4f78dc87284c69f545a957", "content": "https://github.com/spring-projects/spring-data-examples/tree/master/rest/starbucks[This example] exposes 10,843 Starbucks coffee shops through a RESTful API that allows access to the stores in a hypermedia-based way and exposes a resource to run a geo-location search for coffee shops.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/introduction/spring-data-rest-examples.adoc", "title": "spring-data-rest-examples", "heading": "Starbucks example", "heading_level": 2, "file_order": 8, "section_index": 4, "content_hash": "8c70b9db3c6f7e4e5f7adf10e00942981c33cbc7cd4f78dc87284c69f545a957", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/introduction/spring-data-rest-examples.adoc"}}
{"id": "sha256:890a4eeff80a20c841b5f54cabff7062695af2387a0072e0f35e297805b51294", "content": "[[new-features]]\n[[upgrading]]\n\nInstructions for how to upgrade from earlier versions of Spring Data are provided on the project https://github.com/spring-projects/spring-data-commons/wiki[wiki].\nFollow the links in the https://github.com/spring-projects/spring-data-commons/wiki#release-notes[release notes section] to find the version that you want to upgrade to.\n\nUpgrading instructions are always the first item in the release notes. If you are more than one release behind, please make sure that you also review the release notes of the versions that you jumped.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/introduction/upgrade.adoc", "title": "upgrade", "heading": "upgrade", "heading_level": 1, "file_order": 9, "section_index": 0, "content_hash": "890a4eeff80a20c841b5f54cabff7062695af2387a0072e0f35e297805b51294", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/introduction/upgrade.adoc"}}
{"id": "sha256:3b05d86a605b0ce3ec6e044fb3d6963f95c849e4ffbd1db48b82805f0ab01f63", "content": "[[customizing-sdr]]\n\nThere are many options to tailor Spring Data REST. These subsections show how.\n\n[[customizing-sdr.item-resource-uris]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing-sdr.adoc", "title": "customizing-sdr", "heading": "customizing-sdr", "heading_level": 1, "file_order": 10, "section_index": 0, "content_hash": "3b05d86a605b0ce3ec6e044fb3d6963f95c849e4ffbd1db48b82805f0ab01f63", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing-sdr.adoc"}}
{"id": "sha256:1e7450b3a3d4aaff94b891003e9abe106be067c1e53d4bfe74cea1263ddb9bf1", "content": "By default, the URI for item resources are comprised of the path segment used for the collection resource with the database identifier appended.\nThat lets you use the repository's `findOne(…)` method to lookup entity instances.\nAs of Spring Data REST 2.5, this can be customized by using configuration API on `RepositoryRestConfiguration` (preferred on Java 8) or by registering an implementation of `EntityLookup` as a Spring bean in your application.\nSpring Data REST picks those up and tweaks the URI generation according to their implementation.\n\nAssume a `User` with a `username` property that uniquely identifies it.\nFurther assume that we have a `Optional<User> findByUsername(String username)` method on the corresponding repository.\n\nOn Java 8, we can register the mapping methods as method references to tweak the URI creation, as follows:\n\n====\n[source, java]\n----\n@Component\npublic class SpringDataRestCustomization implements RepositoryRestConfigurer {\n\n @Override\n public void configureRepositoryRestConfiguration(RepositoryRestConfiguration config) {\n config.withEntityLookup()\n .forRepository(UserRepository.class)\n .withIdMapping(User::getUsername)\n .withLookup(UserRepository::findByUsername);\n }\n}\n----\n====\n\n`forRepository(…)` takes the repository type as the first argument, a method reference mapping the repositories domain type to some target type as the second argument, and another method reference to map that value back by using the repository mentioned as the first argument.\n\nIf you are not running Java 8 or better, you could use the method, but it would require a few quite verbose anonymous inner classes.\nOn older Java versions, you should probably prefer implementing a `UserEntityLookup` that resembles the following:\n\n====\n[source, java]\n----\n@Component\npublic class UserEntityLookup extends EntityLookupSupport<User> {\n\n private final UserRepository repository;\n\n public UserEntityLookup(UserRepository repository) {\n this.repository = repository;\n }\n\n @Override\n public Serializable getResourceIdentifier(User entity) {\n return entity.getUsername();\n }\n\n @Override\n public Object lookupEntity(Serializable id) {\n return repository.findByUsername(id.toString());\n }\n}\n----\n====\n\nNotice how `getResourceIdentifier(…)` returns the username to be used by the URI creation. To load entity instances by the value returned from that method, we now implement `lookupEntity(…)` by using the query method available on the `UserRepository`.\n\n[[customizing-sdr.repository-exposure]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing-sdr.adoc", "title": "customizing-sdr", "heading": "Customizing Item Resource URIs", "heading_level": 2, "file_order": 10, "section_index": 1, "content_hash": "1e7450b3a3d4aaff94b891003e9abe106be067c1e53d4bfe74cea1263ddb9bf1", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing-sdr.adoc"}}
{"id": "sha256:912c8d064244ebbd9a7e387baf6e9e86fb93327e068434c37feb6daa357d9049", "content": "By default, all public Spring Data repositories are used to expose HTTP resources as described in xref:repository-resources.adoc[Repository resources].\nPackage protected repository interfaces are excluded from this list, as you express its functionality is only visible to the package internally.\nThis can be customized by explicitly setting a `RepositoryDetectionStrategy` (usually through the enum `RepositoryDetectionStrategies`) on `RepositoryRestConfiguration`.\nThe following values can be configured:\n\n- `ALL` -- exposes all Spring Data repositories regardless of their Java visibility or annotation configuration.\n- `DEFAULT` -- exposes public Spring Data repositories or ones explicitly annotated with `@RepositoryRestResource` and its `exported` attribute not set to `false`.\n- `VISIBILITY` -- exposes only public Spring Data repositories regardless of annotation configuration.\n- `ANNOTATED` -- only exposes Spring Data repositories explicitly annotated with `@RepositoryRestResource` and its `exported` attribute not set to `false`.\n\nIf you need custom rules to apply, simply implement `RepositoryDetectionStrategy` manually.\n\n[[customizing-sdr.http-methods]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing-sdr.adoc", "title": "customizing-sdr", "heading": "Customizing repository exposure", "heading_level": 2, "file_order": 10, "section_index": 2, "content_hash": "912c8d064244ebbd9a7e387baf6e9e86fb93327e068434c37feb6daa357d9049", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing-sdr.adoc"}}
{"id": "sha256:1dfea26d49fbdb5fb5551b253d6b2a59bcd2a7de40ce8e5dfeae1f504905f8c7", "content": "[[customizing-sdr.http-methods.default-exposure]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing-sdr.adoc", "title": "customizing-sdr", "heading": "Customizing supported HTTP methods", "heading_level": 2, "file_order": 10, "section_index": 3, "content_hash": "1dfea26d49fbdb5fb5551b253d6b2a59bcd2a7de40ce8e5dfeae1f504905f8c7", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing-sdr.adoc"}}
{"id": "sha256:f62820129b49b216b6720e664c838bb0d4752e9e6a872ed916203c407209d233", "content": "By default, Spring Data REST exposes HTTP resources and methods as described in xref:repository-resources.adoc[Repository resources] based on which CRUD methods the repository exposes.\nThe repositories don't need to extend `CrudRepository` but can also selectively declare methods described in aforementioned section and the resource exposure will follow.\nE.g. if a repository does not expose a `delete(…)` method, an HTTP `DELETE` will not be supported for item resources.\n\nIf you need to declare a method for internal use but don't want it to trigger the HTTP method exposure, the repository method can be annotated with `@RestResource(exported = false)`.\nWhich methods to annotate like that to remove support for which HTTP method is described in xref:repository-resources.adoc[Repository resources].\n\nSometimes managing the exposure on the method level is not fine-grained enough.\nE.g. the `save(…)` method is used to back `POST` on collection resources, as well as `PUT` and `PATCH` on item resources.\nTo selectively define which HTTP methods are supposed to be exposed, you can use `RepositoryRestConfiguration.getExposureConfiguration()`.\n\nThe class exposes a Lambda based API to define both global and type-based rules:\n\n[source, java]\n----\nExposureConfiguration config = repositoryRestConfiguration.getExposureConfiguration();\n\nconfig.forDomainType(User.class).disablePutForCreation(); <1>\nconfig.withItemExposure((metadata, httpMethods) -> httpMethods.disable(HttpMethod.PATCH)); <2>\n----\n<1> Disables the support for HTTP `PUT` to create item resources directly.\n<2> Disables the support for HTTP `PATCH` on all item resources.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/customizing-sdr.adoc", "title": "customizing-sdr", "heading": "Customizing default exposure", "heading_level": 3, "file_order": 10, "section_index": 4, "content_hash": "f62820129b49b216b6720e664c838bb0d4752e9e6a872ed916203c407209d233", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/customizing-sdr.adoc"}}
{"id": "sha256:4e37ba298beb88ba5e7b5d1f969b8db316106e6129806275bd27b78e248a31bf", "content": "[[conditional]]\n\nThis section shows how Spring Data REST uses standard HTTP headers to enhance performance, conditionalize operations, and contribute to a more sophisticated frontend.\n\n[[conditional.etag]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/etags-and-other-conditionals.adoc", "title": "etags-and-other-conditionals", "heading": "etags-and-other-conditionals", "heading_level": 1, "file_order": 11, "section_index": 0, "content_hash": "4e37ba298beb88ba5e7b5d1f969b8db316106e6129806275bd27b78e248a31bf", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/etags-and-other-conditionals.adoc"}}
{"id": "sha256:9d861dcd683df2fcf2ca4c065b42e8c5a7be3244c07c0326b24f67d5085bc1e8", "content": "The https://tools.ietf.org/html/rfc7232#section-2.3[`ETag` header] provides a way to tag resources. This can prevent clients from overriding each other while also making it possible to reduce unnecessary calls.\n\nConsider the following example:\n\n.A POJO with a version number\n====\n[source,java,indent=0]\n----\n/*\n * Copyright 2014-present the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage org.springframework.data.rest.webmvc.support;\n\nimport static org.assertj.core.api.Assertions.*;\n\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.junit.jupiter.MockitoExtension;\nimport org.springframework.data.annotation.Version;\nimport org.springframework.data.keyvalue.core.mapping.context.KeyValueMappingContext;\nimport org.springframework.data.mapping.PersistentEntity;\nimport org.springframework.data.rest.webmvc.PersistentEntityResource;\nimport org.springframework.http.HttpHeaders;\n\n/**\n * Tests for the ETagValidator used for optimistic locking\n *\n * @author Pablo Lozano\n * @author Oliver Gierke\n */\n@ExtendWith(MockitoExtension.class)\nclass ETagUnitTests {\n\n\tKeyValueMappingContext<?, ?> context = new KeyValueMappingContext<>();\n\n\t@Test // DATAREST-160\n\tvoid expectWrongEtag() throws Exception {\n\n\t\tETag eTag = ETag.from(\"1\");\n\n\t\tassertThatExceptionOfType(ETagDoesntMatchException.class) //\n\t\t\t\t.isThrownBy(() -> eTag.verify(context.getRequiredPersistentEntity(Sample.class), new Sample(0L)));\n\t}\n\n\t@Test // DATAREST-160\n\tvoid expectCorrectEtag() throws Exception {\n\t\tETag.from(\"0\").verify(context.getRequiredPersistentEntity(Sample.class), new Sample(0L));\n\t}\n\n\t@Test // DATAREST-160\n\tvoid createsETagFromVersionValue() throws Exception {\n\n\t\tPersistentEntity<?, ?> entity = context.getRequiredPersistentEntity(Sample.class);\n\t\tETag from = ETag.from(PersistentEntityResource.build(new Sample(0L), entity).build());\n\n\t\tassertThat(from.toString()).isEqualTo((Object) \"\\\"0\\\"\");\n\t}\n\n\t@Test // DATAREST-160\n\tvoid surroundsValueWithQuotationMarksOnToString() {\n\t\tassertThat(ETag.from(\"1\").toString()).isEqualTo(\"\\\"1\\\"\");\n\t}\n\n\t@Test // DATAREST-160\n\tvoid returnsNoEtagForNullStringSource() {\n\t\tassertThat(ETag.from((String) null)).isEqualTo(ETag.NO_ETAG);\n\t}\n\n\t@Test // DATAREST-160\n\tvoid returnsNoEtagForNullPersistentEntityResourceSource() {\n\n\t\tassertThatExceptionOfType(IllegalArgumentException.class).isThrownBy(() -> {\n\t\t\tETag.from((PersistentEntityResource) null);\n\t\t});\n\t}\n\n\t@Test // DATAREST-160\n\tvoid hasValueObjectEqualsSemantics() {\n\n\t\tETag one = ETag.from(\"1\");\n\t\tETag two = ETag.from(\"2\");\n\t\tETag nullETag = ETag.from((String) null);\n\n\t\tassertThat(one.equals(one)).isTrue();\n\t\tassertThat(one.equals(two)).isFalse();\n\t\tassertThat(two.equals(one)).isFalse();\n\t\tassertThat(nullETag.equals(one)).isFalse();\n\t\tassertThat(one.equals(two)).isFalse();\n\t\tassertThat(one.equals(\"\")).isFalse();\n\t}\n\n\t@Test // DATAREST-160\n\tvoid returnsNoEtagForEntityWithoutVersionProperty() {\n\n\t\tPersistentEntity<?, ?> entity = context.getRequiredPersistentEntity(SampleWithoutVersion.class);\n\t\tassertThat(ETag.from(PersistentEntityResource.build(new SampleWithoutVersion(), entity).build()))\n\t\t\t\t.isEqualTo(ETag.NO_ETAG);\n\t}\n\n\t@Test // DATAREST-160\n\tvoid noETagReturnsNullForToString() {\n\t\tassertThat(ETag.NO_ETAG.toString()).isNull();\n\t}\n\n\t@Test // DATAREST-160\n\tvoid noETagDoesNotRejectVerification() {\n\t\tETag.NO_ETAG.verify(context.getRequiredPersistentEntity(Sample.class), new Sample(5L));\n\t}\n\n\t@Test // DATAREST-160\n\tvoid verificationDoesNotRejectNullEntity() {\n\t\tETag.from(\"5\").verify(context.getRequiredPersistentEntity(Sample.class), null);\n\t}\n\n\t@Test // DATAREST-160\n\tvoid stripsTrailingAndLeadingQuotesOnCreation() {\n\n\t\tassertThat(ETag.from(\"\\\"1\\\"\")).isEqualTo(ETag.from(\"1\"));\n\t\tassertThat(ETag.from(\"\\\"\\\"1\\\"\\\"\")).isEqualTo(ETag.from(\"1\"));\n\t}\n\n\t@Test // DATAREST-160\n\tvoid addsETagToHeadersIfNotNoETag() {\n\n\t\tHttpHeaders headers = ETag.from(\"1\").addTo(new HttpHeaders());\n\t\tassertThat(headers.getETag()).isNotNull();\n\t}\n\n\t@Test // DATAREST-160\n\tvoid doesNotAddHeaderForNoETag() {\n\n\t\tHttpHeaders headers = ETag.NO_ETAG.addTo(new HttpHeaders());\n\n\t\tassertThat(headers.getFirst(\"ETag\")).isNull();\n\t}\n\n\t// tag::versioned-sample[]\n\tclass Sample {\n\n\t\t@Version Long version; // <1>\n\n\t\tSample(Long version) {\n\t\t\tthis.version = version;\n\t\t}\n\t}\n\t// end::versioned-sample[]\n\n\tclass SampleWithoutVersion {}\n}\n----\n\n<1> The `@Version` annotation (the JPA one in case you're using Spring Data JPA, the Spring Data `org.springframework.data.annotation.Version` one for all other modules) flags this field as a version marker.\n====\n\nThe POJO in the preceding example, when served up as a REST resource by Spring Data REST, has an `ETag` header with the value of the version field.\n\nWe can conditionally `PUT`, `PATCH`, or `DELETE` that resource if we supply a `If-Match` header such as the following:\n\n====\n----\ncurl -v -X PATCH -H 'If-Match: <value of previous ETag>' ...\n----\n====\n\nOnly if the resource's current `ETag` state matches the `If-Match` header is the operation carried out. This safeguard prevents clients from stomping on each other. Two different clients can fetch the resource and have an identical `ETag`. If one client updates the resource, it gets a new `ETag` in the response. But the first client still has the old header. If that client attempts an update with the `If-Match` header, the update fails because they no longer match. Instead, that client receives an HTTP `412 Precondition Failed` message to be sent back. The client can then catch up however is necessary.\n\nWARNING: The term, \"`version,`\" may carry different semantics with different data stores and even different semantics within your application. Spring Data REST effectively delegates to the data store's metamodel to discern if a field is versioned and, if so, only allows the listed updates if `ETag` elements match.\n\nThe https://tools.ietf.org/html/rfc7232#section-3.2[`If-None-Match` header] provides an alternative. Instead of conditional updates, `If-None-Match` allows conditional queries. Consider the following example:\n\n====\n----\ncurl -v -H 'If-None-Match: <value of previous etag>' ...\n----\n====\n\nThe preceding command (by default) runs a `GET`. Spring Data REST checks for `If-None-Match` headers while doing a `GET`. If the header matches the ETag, it concludes that nothing has changed and, instead of sending a copy of the resource, sends back an HTTP `304 Not Modified` status code. Semantically, it reads \"`If this supplied header value does not match the server-side version, send the whole resource. Otherwise, do not send anything.`\"\n\nNOTE: This POJO is from an `ETag`-based unit test, so it does not have `@Entity` (JPA) or `@Document` (MongoDB) annotations, as expected in application code. It focuses solely on how a field with `@Version` results in an `ETag` header.\n\n[[conditional.if-modified-since]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/etags-and-other-conditionals.adoc", "title": "etags-and-other-conditionals", "heading": "`ETag`, `If-Match`, and `If-None-Match` Headers", "heading_level": 2, "file_order": 11, "section_index": 1, "content_hash": "9d861dcd683df2fcf2ca4c065b42e8c5a7be3244c07c0326b24f67d5085bc1e8", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/etags-and-other-conditionals.adoc"}}
{"id": "sha256:e9b8113218f148d8885731d4cef3cbad2fb27517c3d875b7f2d82282adeea045", "content": "The https://tools.ietf.org/html/rfc7232#section-3.3[`If-Modified-Since` header] provides a way to check whether a resource has been updated since the last request, which lets applications avoid resending the same data. Consider the following example:\n\n.The last modification date captured in a domain type\n====\n[source,java]\n----\n/*\n * Copyright 2014-present the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage org.springframework.data.rest.tests.mongodb;\n\nimport java.math.BigDecimal;\nimport java.util.Date;\n\nimport org.springframework.data.annotation.Id;\nimport org.springframework.data.annotation.LastModifiedDate;\nimport org.springframework.data.annotation.Version;\nimport org.springframework.data.mongodb.core.mapping.Document;\n\n/**\n * @author Pablo Lozano\n */\n// tag::code[]\n@Document\npublic class Receipt {\n\n\tpublic @Id String id;\n\tpublic @Version Long version;\n\tpublic @LastModifiedDate Date date;  // <1>\n\n\tpublic String saleItem;\n\tpublic BigDecimal amount;\n\n}\n// end::code[]\n----\n\n<1> Spring Data Commons's `@LastModifiedDate` annotation allows capturing this information in multiple formats (JodaTime's `DateTime`, legacy Java `Date` and `Calendar`, JDK8 date/time types, and `long`/`Long`).\n====\n\nWith the date field in the preceding example, Spring Data REST returns a `Last-Modified` header similar to the following:\n\n----\nLast-Modified: Wed, 24 Jun 2015 20:28:15 GMT\n----\n\nThis value can be captured and used for subsequent queries to avoid fetching the same data twice when it has not been updated, as the following example shows:\n\n====\n----\ncurl -H \"If-Modified-Since: Wed, 24 Jun 2015 20:28:15 GMT\" ...\n----\n====\n\nWith the preceding command, you are asking that a resource be fetched only if it has changed since the specified time. If so, you get a revised `Last-Modified` header with which to update the client. If not, you receive an HTTP `304 Not Modified` status code.\n\nThe header is perfectly formatted to send back for a future query.\n\nWARNING: Do not mix and match header value with different queries. Results could be disastrous. Use the header values ONLY when you request the exact same URI and parameters.\n\n[[headers.better-client-architecture]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/etags-and-other-conditionals.adoc", "title": "etags-and-other-conditionals", "heading": "`If-Modified-Since` header", "heading_level": 2, "file_order": 11, "section_index": 2, "content_hash": "e9b8113218f148d8885731d4cef3cbad2fb27517c3d875b7f2d82282adeea045", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/etags-and-other-conditionals.adoc"}}
{"id": "sha256:bc2390b3f06362e42241517723b85fb7d1e4773c7fab8c37194226bdb7a577da", "content": "`ETag` elements, combined with the `If-Match` and `If-None-Match` headers, let you build a front end that is more friendly to consumers' data plans and mobile battery lives. To do so:\n\n. Identify the entities that need locking and add a version attribute.\n+\nHTML5 nicely supports `data-*` attributes, so store the version in the DOM (somewhere such as an `data-etag` attribute).\n. Identify the entries that would benefit from tracking the most recent updates. When fetching these resources, store the `Last-Modified` value in the DOM (`data-last-modified` perhaps).\n. When fetching resources, also embed `self` URIs in your DOM nodes (perhaps `data-uri` or `data-self`) so that it is easy to go back to the resource.\n. Adjust `PUT`/`PATCH`/`DELETE` operations to use `If-Match` and also handle HTTP `412 Precondition Failed` status codes.\n. Adjust `GET` operations to use `If-None-Match` and `If-Modified-Since` and handle HTTP `304 Not Modified` status codes.\n\nBy embedding `ETag` elements and `Last-Modified` values in your DOM (or perhaps elsewhere for a native mobile app), you can then reduce the consumption of data and battery power by not retrieving the same thing over and over. You can also avoid colliding with other clients and, instead, be alerted when you need to reconcile differences.\n\nIn this fashion, with just a little tweaking on your front end and some entity-level edits, the backend serves up time-sensitive details you can cash in on when building a customer-friendly client.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/etags-and-other-conditionals.adoc", "title": "etags-and-other-conditionals", "heading": "Architecting a More Efficient Front End", "heading_level": 2, "file_order": 11, "section_index": 3, "content_hash": "bc2390b3f06362e42241517723b85fb7d1e4773c7fab8c37194226bdb7a577da", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/etags-and-other-conditionals.adoc"}}
{"id": "sha256:d60bac49986cad20e2b425edc17bfd6bda31f72117d89d290bd56c4168e70f26", "content": "[[events]]\n\nThe REST exporter emits eight different events throughout the process of working with an entity:\n\n* javadoc:org.springframework.data.rest.core.event.BeforeCreateEvent[]\n* javadoc:org.springframework.data.rest.core.event.AfterCreateEvent[]\n* javadoc:org.springframework.data.rest.core.event.BeforeSaveEvent[]\n* javadoc:org.springframework.data.rest.core.event.AfterSaveEvent[]\n* javadoc:org.springframework.data.rest.core.event.BeforeLinkSaveEvent[]\n* javadoc:org.springframework.data.rest.core.event.AfterLinkSaveEvent[]\n* javadoc:org.springframework.data.rest.core.event.BeforeDeleteEvent[]\n* javadoc:org.springframework.data.rest.core.event.AfterDeleteEvent[]\n\n[[events.application-listener]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/events.adoc", "title": "events", "heading": "events", "heading_level": 1, "file_order": 12, "section_index": 0, "content_hash": "d60bac49986cad20e2b425edc17bfd6bda31f72117d89d290bd56c4168e70f26", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/events.adoc"}}
{"id": "sha256:db477389d4bf22914c4bf73ed900a9f54d6f14adf8251ddcf0de82a7f98fab79", "content": "You can subclass an abstract class that listens for these kinds of events and calls the appropriate method based on the event type. To do so, override the methods for the events in question, as follows:\n\n====\n[source,java]\n----\npublic class BeforeSaveEventListener extends AbstractRepositoryEventListener {\n\n @Override\n public void onBeforeSave(Object entity) {\n ... logic to handle inspecting the entity before the Repository saves it\n }\n\n @Override\n public void onAfterDelete(Object entity) {\n ... send a message that this entity has been deleted\n }\n}\n----\n====\n\nOne thing to note with this approach, however, is that it makes no distinction based on the type of the entity. You have to inspect that yourself.\n\n[[events.annotated-handler]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/events.adoc", "title": "events", "heading": "Writing an `ApplicationListener`", "heading_level": 2, "file_order": 12, "section_index": 1, "content_hash": "db477389d4bf22914c4bf73ed900a9f54d6f14adf8251ddcf0de82a7f98fab79", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/events.adoc"}}
{"id": "sha256:1cec1d7d95d6c4c865391d22da678ad0dcd1e64760230c25b036960edeac4f2b", "content": "Another approach is to use an annotated handler, which filters events based on domain type.\n\nTo declare a handler, create a POJO and put the `@RepositoryEventHandler` annotation on it. This tells the `BeanPostProcessor` that this class needs to be inspected for handler methods.\n\nOnce the `BeanPostProcessor` finds a bean with this annotation, it iterates over the exposed methods and looks for annotations that correspond to the event in question. For example, to handle `BeforeSaveEvent` instances in an annotated POJO for different kinds of domain types, you could define your class as follows:\n\n====\n[source,java]\n----\n@RepositoryEventHandler <1>\npublic class PersonEventHandler {\n\n @HandleBeforeSave\n public void handlePersonSave(Person p) {\n // … you can now deal with Person in a type-safe way\n }\n\n @HandleBeforeSave\n public void handleProfileSave(Profile p) {\n // … you can now deal with Profile in a type-safe way\n }\n}\n----\n\n<1> It's possible to narrow the types to which this handler applies by using (for example) `@RepositoryEventHandler(Person.class)`.\n====\n\nThe domain type whose events you are interested in is determined from the type of the first parameter of the annotated methods.\n\nTo register your event handler, either mark the class with one of Spring's `@Component` stereotypes (so that it can be picked up by `@SpringBootApplication` or `@ComponentScan`) or declare an instance of your annotated bean in your `ApplicationContext`. Then the `BeanPostProcessor` that is created in `RepositoryRestMvcConfiguration` inspects the bean for handlers and wires them to the correct events. The following example shows how to create an event handler for the `Person` class:\n\n====\n[source,java]\n----\n@Configuration\npublic class RepositoryConfiguration {\n\n @Bean\n PersonEventHandler personEventHandler() {\n return new PersonEventHandler();\n }\n}\n----\n====\n\nNOTE: Spring Data REST events are customized link:{springDocsUrl}/core.html#context-functionality-events[Spring application events]. By default, Spring events are synchronous, unless they get republished across a boundary (such as issuing a WebSocket event or crossing into a thread).", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/events.adoc", "title": "events", "heading": "Writing an Annotated Handler", "heading_level": 2, "file_order": 12, "section_index": 2, "content_hash": "1cec1d7d95d6c4c865391d22da678ad0dcd1e64760230c25b036960edeac4f2b", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/events.adoc"}}
{"id": "sha256:f829666a2c2e12836015de3fa03849b31eb3b6daa1fa8d17bc83184c03c3ae12", "content": "[[spring-data-rest-reference-documentation]]\n\n_Spring Data REST exports Spring Data repositories as REST resources through WebMVC.\nIt eases development of applications with a consistent programming model backed by Spring Data modules sources._\n\n[horizontal]\nxref:intro.adoc[Introduction] :: Introduction to Spring Data REST and Examples\nxref:repository-resources.adoc[Repository Resources] :: Exporting Repositories as REST Resources\nxref:representations.adoc[Representations] :: Domain Object Representations (Object Mapping)\nxref:etags-and-other-conditionals.adoc[Conditionals] :: Conditional Operations with ETag and other Headers\nxref:validation.adoc[Validation] :: Validator Integration\nxref:events.adoc[Events] :: Listening to REST Events\nxref:integration.adoc[Integration] :: Integration with Spring Data REST components\nxref:metadata.adoc[Metadata] :: ALPS and JSON Schema\nxref:security.adoc[Security] :: Spring Security Integration\nxref:tools.adoc[Tools] :: HAL Explorer\nxref:customizing-sdr.adoc[Customizing] :: Tutorials and Recipes to customize Spring Data REST\nhttps://github.com/spring-projects/spring-data-commons/wiki[Wiki] :: What's New,\nUpgrade Notes, Supported Versions, additional cross-version information.\n\nJon Brisbin, Oliver Drotbohm, Greg Turnquist, Jay Bryant\n\n(C) 2008-present VMware, Inc.\n\nCopies of this document may be made for your own use and for distribution to others, provided that you do not charge any fee for such copies and further provided that each copy contains this Copyright Notice, whether distributed in print or electronically.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/index.adoc", "title": "index", "heading": "index", "heading_level": 1, "file_order": 13, "section_index": 0, "content_hash": "f829666a2c2e12836015de3fa03849b31eb3b6daa1fa8d17bc83184c03c3ae12", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/index.adoc"}}
{"id": "sha256:6ec8e29ff7662b31d57a63bbd6ea234c13e91917b66c632101d8905164e7201d", "content": "[[integration]]\n\nThis section details various ways to integrate with Spring Data REST components, whether from a Spring application that is using Spring Data REST or from other means.\n\n[[integration.programmatic-links]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/integration.adoc", "title": "integration", "heading": "integration", "heading_level": 1, "file_order": 14, "section_index": 0, "content_hash": "6ec8e29ff7662b31d57a63bbd6ea234c13e91917b66c632101d8905164e7201d", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/integration.adoc"}}
{"id": "sha256:0aa4843ca62dd5ceb8c34184f0d445d1a7ebf82b1e5fafea5aa7af7eb0207b80", "content": "Sometimes you need to add links to exported resources in your own custom-built Spring MVC controllers. There are three basic levels of linking available:\n\n* Manually assembling links.\n* Using Spring HATEOAS's https://docs.spring.io/spring-hateoas/docs/current/reference/html/#fundamentals.obtaining-links.builder[`LinkBuilder`] with `linkTo()`, `slash()`, and so on.\n* Using Spring Data REST's implementation of javadoc:org.springframework.data.rest.webmvc.support.RepositoryEntityLinks[].\n\nThe first suggestion is terrible and should be avoided at all costs. It makes your code brittle and high-risk. The second is handy when creating links to other hand-written Spring MVC controllers. The last one, which we explore in the rest of this section, is good for looking up resource links that are exported by Spring Data REST.\n\nConsider the following class ,which uses Spring's autowiring:\n\n====\n[source,java]\n----\npublic class MyWebApp {\n\n\tprivate RepositoryEntityLinks entityLinks;\n\n\t@Autowired\n\tpublic MyWebApp(RepositoryEntityLinks entityLinks) {\n this.entityLinks = entityLinks;\n\t}\n}\n----\n====\n\nWith the class in the preceding example, you can use the following operations:\n\n.Ways to link to exported resources\n|===\n|Method | Description\n\n|`entityLinks.linkToCollectionResource(Person.class)`\n|Provide a link to the collection resource of the specified type (`Person`, in this case).\n\n|`entityLinks.linkToItemResource(Person.class, 1)`\n|Provide a link to a single resource.\n\n|`entityLinks.linkToPagedResource(Person.class, new PageRequest(...))`\n|Provide a link to a paged resource.\n\n|`entityLinks.linksToSearchResources(Person.class)`\n|Provides a list of links for all the finder methods exposed by the corresponding repository.\n\n|`entityLinks.linkToSearchResource(Person.class, \"findByLastName\")`\n|Provide a finder link by `rel` (that is, the name of the finder).\n\n|===\n\nNOTE: All of the search-based links support extra parameters for paging and sorting. See javadoc:org.springframework.data.rest.webmvc.support.RepositoryEntityLinks[] for the details. There is also `linkFor(Class<?> type)`, but that returns a Spring HATEOAS `LinkBuilder`, which returns you to the lower level API. Try to use the other ones first.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/integration.adoc", "title": "integration", "heading": "Programmatic Links", "heading_level": 2, "file_order": 14, "section_index": 1, "content_hash": "0aa4843ca62dd5ceb8c34184f0d445d1a7ebf82b1e5fafea5aa7af7eb0207b80", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/integration.adoc"}}
{"id": "sha256:cb637da6c021e941f490e2c2f98c8fba8aad11ccc5ee76efc96bc0ab16b2e139", "content": "[[intro-chapter]]\n\nREST web services have become the number one means for application integration on the web. In its core, REST defines that a system that consists of resources with which clients interact. These resources are implemented in a hypermedia-driven way. link:{springDocsUrl}/web.html#spring-web[Spring MVC] and link:{springDocsUrl}/web-reactive.html#spring-webflux[Spring WebFlux] each offer a solid foundation to build these kinds of services. However, implementing even the simplest tenet of REST web services for a multi-domain object system can be quite tedious and result in a lot of boilerplate code.\n\nSpring Data REST builds on top of the Spring Data repositories and automatically exports those as REST resources. It leverages hypermedia to let clients automatically find functionality exposed by the repositories and integrate these resources into related hypermedia-based functionality.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/intro.adoc", "title": "intro", "heading": "intro", "heading_level": 1, "file_order": 15, "section_index": 0, "content_hash": "cb637da6c021e941f490e2c2f98c8fba8aad11ccc5ee76efc96bc0ab16b2e139", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/intro.adoc"}}
{"id": "sha256:257b6adbfadfdba88f9d0b5f1196294efff87e046f4d95bdecf6f39337dea190", "content": "[[metadata]]\n\nThis section details the various forms of metadata provided by a Spring Data REST-based application.\n\n[[metadata.alps]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/metadata.adoc", "title": "metadata", "heading": "metadata", "heading_level": 1, "file_order": 16, "section_index": 0, "content_hash": "257b6adbfadfdba88f9d0b5f1196294efff87e046f4d95bdecf6f39337dea190", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/metadata.adoc"}}
{"id": "sha256:ab2780d8ee734f5f5ae24d48af3d6df4046e03fb0632f5e82db50fbdf742f393", "content": "[quote, M. Admundsen / L. Richardson / M. Foster, https://tools.ietf.org/html/draft-amundsen-richardson-foster-alps-00]\nhttp://alps.io/[ALPS] is a data format for defining simple descriptions of application-level semantics, similar in complexity to HTML microformats. An ALPS document can be used as a profile to explain the application semantics of a document with an application-agnostic media type (such as HTML, HAL, Collection+JSON, Siren, etc.). This increases the reusability of profile documents across media types.\n\nSpring Data REST provides an ALPS document for every exported repository. It contains information about both the RESTful transitions\nand the attributes of each repository.\n\nAt the root of a Spring Data REST app is a profile link. Assuming you had an app with both `persons` and related `addresses`, the root\ndocument would be as follows:\n\n====\n[source,javascript]\n----\n{\n \"_links\" : {\n \"persons\" : {\n \"href\" : \"http://localhost:8080/persons\"\n },\n \"addresses\" : {\n \"href\" : \"http://localhost:8080/addresses\"\n },\n \"profile\" : {\n \"href\" : \"http://localhost:8080/profile\"\n }\n }\n}\n----\n====\n\nA profile link, as defined in https://tools.ietf.org/html/rfc6906[RFC 6906], is a place to include application-level details. The\nhttps://tools.ietf.org/html/draft-amundsen-richardson-foster-alps-00[ALPS draft spec] is meant to define a particular profile format,\nwhich we explore later in this section.\n\nIf you navigate into the profile link at `localhost:8080/profile`, you see content resembling the following:\n\n====\n[source,javascript]\n----\n{\n \"_links\" : {\n \"self\" : {\n \"href\" : \"http://localhost:8080/profile\"\n },\n \"persons\" : {\n \"href\" : \"http://localhost:8080/profile/persons\"\n },\n \"addresses\" : {\n \"href\" : \"http://localhost:8080/profile/addresses\"\n }\n }\n}\n----\n====\n\nIMPORTANT: At the root level, `profile` is a single link and cannot serve up more than one application profile. That\nis why you must navigate to `/profile` to find a link for each resource's metadata.\n\nIf you navigate to `/profile/persons` and look at the profile data for a `Person` resource, you see content resembling the following example:\n\n====\n[source,javascript]\n----\n{\n \"version\" : \"1.0\",\n \"descriptors\" : [ {\n \"id\" : \"person-representation\", <1>\n \"descriptors\" : [ {\n \"name\" : \"firstName\",\n \"type\" : \"SEMANTIC\"\n }, {\n \"name\" : \"lastName\",\n \"type\" : \"SEMANTIC\"\n }, {\n \"name\" : \"id\",\n \"type\" : \"SEMANTIC\"\n }, {\n \"name\" : \"address\",\n \"type\" : \"SAFE\",\n \"rt\" : \"http://localhost:8080/profile/addresses#address\"\n } ]\n }, {\n \"id\" : \"create-persons\", <2>\n \"name\" : \"persons\", <3>\n \"type\" : \"UNSAFE\", <4>\n \"rt\" : \"#person-representation\" <5>\n }, {\n \"id\" : \"get-persons\",\n \"name\" : \"persons\",\n \"type\" : \"SAFE\",\n \"rt\" : \"#person-representation\"\n }, {\n \"id\" : \"delete-person\",\n \"name\" : \"person\",\n \"type\" : \"IDEMPOTENT\",\n \"rt\" : \"#person-representation\"\n }, {\n \"id\" : \"patch-person\",\n \"name\" : \"person\",\n \"type\" : \"UNSAFE\",\n \"rt\" : \"#person-representation\"\n }, {\n \"id\" : \"update-person\",\n \"name\" : \"person\",\n \"type\" : \"IDEMPOTENT\",\n \"rt\" : \"#person-representation\"\n }, {\n \"id\" : \"get-person\",\n \"name\" : \"person\",\n \"type\" : \"SAFE\",\n \"rt\" : \"#person-representation\"\n } ]\n}\n----\n<1> A detailed listing of the attributes of a `Person` resource, identified as `#person-representation`, lists the names\nof the attributes.\n<2> The supported operations. This one indicates how to create a new `Person`.\n<3> The `name` is `persons`, which indicates (because it is plural) that a POST should be applied to the whole collection, not a single `person`.\n<4> The `type` is `UNSAFE`, because this operation can alter the state of the system.\n<5> The `rt` is `#person-representation`, which indicates that returned resource type will be `Person` resource.\n====\n\nNOTE: This JSON document has a media type of `application/alps+json`. This is different from the previous JSON document, which had\na media type of `application/hal+json`. These formats are different and governed by different specs.\n\nYou can also find a `profile` link in the collection of `_links` when you examine a collection resource, as the following example shows:\n\n====\n[source,javascript]\n----\n{\n \"_links\" : {\n \"self\" : {\n \"href\" : \"http://localhost:8080/persons\" <1>\n },\n ... other links ...\n \"profile\" : {\n \"href\" : \"http://localhost:8080/profile/persons\" <2>\n }\n },\n ...\n}\n----\n\n<1> This HAL document respresents the `Person` collection.\n<2> It has a *profile* link to the same URI for metadata.\n====\n\nAgain, by default, the `profile` link serves up ALPS. However, if you use an https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1[`Accept` header], it can serve `application/alps+json`.\n\n[[metadata.alps.control-types]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/metadata.adoc", "title": "metadata", "heading": "Application-Level Profile Semantics (ALPS)", "heading_level": 2, "file_order": 16, "section_index": 1, "content_hash": "ab2780d8ee734f5f5ae24d48af3d6df4046e03fb0632f5e82db50fbdf742f393", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/metadata.adoc"}}
{"id": "sha256:ef62b9e2250c68e1e3c65dc2377a2447f445e8acae7898596a88e3be733233c3", "content": "ALPS displays types for each hypermedia control. They include:\n\n.ALPS types\n[cols=\"1,5\". options=\"header\"]\n|===\n| Type | Description\n\n| SEMANTIC | A state element (such as `HTML.SPAN`, `HTML.INPUT`, and others).\n| SAFE | A hypermedia control that triggers a safe, idempotent state transition (such as `GET` or `HEAD`).\n| IDEMPOTENT | A hypermedia control that triggers an unsafe, idempotent state transition (such as `PUT` or `DELETE`).\n| UNSAFE | A hypermedia control that triggers an unsafe, non-idempotent state transition (such as `POST`).\n|===\n\nIn the representation section shown earlier, bits of data from the application are marked as being `SEMANTIC`. The `address` field\nis a link that involves a safe `GET` to retrieve. Consequently, it is marked as being `SAFE`. Hypermedia operations themselves map onto the types as\nshown in the preceding table.\n\n[[metadata.alps.projections]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/metadata.adoc", "title": "metadata", "heading": "Hypermedia Control Types", "heading_level": 3, "file_order": 16, "section_index": 2, "content_hash": "ef62b9e2250c68e1e3c65dc2377a2447f445e8acae7898596a88e3be733233c3", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/metadata.adoc"}}
{"id": "sha256:6bd5f2a7efeaf754b4e3155f1e62dd7a3dfb4d708c9fdab40ddc6652c546751a", "content": "If you define any projections, they are also listed in the ALPS metadata. Assuming we also defined `inlineAddress` and `noAddresses`, they\nwould appear inside the relevant operations. (See \"`xref:projections-excerpts.adoc#projections-excerpts.projections[Projections]`\" for the definitions and discussion of these two projections.) That is *GET* would appear in the operations for the whole collection, and *GET* would appear in the operations for a single resource. The following example shows\nthe alternate version of the `get-persons` subsection:\n\n====\n[source,javascript]\n----\n...\n {\n \"id\" : \"get-persons\",\n \"name\" : \"persons\",\n \"type\" : \"SAFE\",\n \"rt\" : \"#person-representation\",\n \"descriptors\" : [ { <1>\n \"name\" : \"projection\",\n \"doc\" : {\n \"value\" : \"The projection that shall be applied when rendering the response. Acceptable values available in nested descriptors.\",\n \"format\" : \"TEXT\"\n },\n \"type\" : \"SEMANTIC\",\n \"descriptors\" : [ {\n \"name\" : \"inlineAddress\", <2>\n \"type\" : \"SEMANTIC\",\n \"descriptors\" : [ {\n \"name\" : \"address\",\n \"type\" : \"SEMANTIC\"\n }, {\n \"name\" : \"firstName\",\n \"type\" : \"SEMANTIC\"\n }, {\n \"name\" : \"lastName\",\n \"type\" : \"SEMANTIC\"\n } ]\n }, {\n \"name\" : \"noAddresses\", <3>\n \"type\" : \"SEMANTIC\",\n \"descriptors\" : [ {\n \"name\" : \"firstName\",\n \"type\" : \"SEMANTIC\"\n }, {\n \"name\" : \"lastName\",\n \"type\" : \"SEMANTIC\"\n } ]\n } ]\n } ]\n }\n...\n----\n\n<1> A new attribute, `descriptors`, appears, containing an array with one entry, `projection`.\n<2> Inside the `projection.descriptors`, we can see `inLineAddress`. It render `address`, `firstName`, and `lastName`.\nRelationships rendered inside a projection result in including the data fields inline.\n<3> `noAddresses` serves up a subset that contains `firstName` and `lastName`.\n====\n\nWith all this information, a client can deduce not only the available RESTful transitions but also, to some degree, the\ndata elements needed to interact with the back end.\n\n[[metadata.alps.descriptions]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/metadata.adoc", "title": "metadata", "heading": "ALPS with Projections", "heading_level": 3, "file_order": 16, "section_index": 3, "content_hash": "6bd5f2a7efeaf754b4e3155f1e62dd7a3dfb4d708c9fdab40ddc6652c546751a", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/metadata.adoc"}}
{"id": "sha256:28fedadee2bc33d0f9c527b59cd4aa0f4528c365942a85923b06c25ebb08c16e", "content": "You can create custom messages that appear in your ALPS metadata. To do so, create `rest-messages.properties`, as follows:\n\n====\n[source,properties]\n----\nrest.description.person=A collection of people\nrest.description.person.id=primary key used internally to store a person (not for RESTful usage)\nrest.description.person.firstName=Person's first name\nrest.description.person.lastName=Person's last name\nrest.description.person.address=Person's address\n----\n====\n\nThese `rest.description.*` properties define details to display for a `Person` resource. They alter the ALPS format of the `person-representation`, as follows:\n\n====\n[source,javascript]\n----\n...\n {\n \"id\" : \"person-representation\",\n \"doc\" : {\n \"value\" : \"A collection of people\", <1>\n \"format\" : \"TEXT\"\n },\n \"descriptors\" : [ {\n \"name\" : \"firstName\",\n \"doc\" : {\n \"value\" : \"Person's first name\", <2>\n \"format\" : \"TEXT\"\n },\n \"type\" : \"SEMANTIC\"\n }, {\n \"name\" : \"lastName\",\n \"doc\" : {\n \"value\" : \"Person's last name\", <3>\n \"format\" : \"TEXT\"\n },\n \"type\" : \"SEMANTIC\"\n }, {\n \"name\" : \"id\",\n \"doc\" : {\n \"value\" : \"primary key used internally to store a person (not for RESTful usage)\", <4>\n \"format\" : \"TEXT\"\n },\n \"type\" : \"SEMANTIC\"\n }, {\n \"name\" : \"address\",\n \"doc\" : {\n \"value\" : \"Person's address\", <5>\n \"format\" : \"TEXT\"\n },\n \"type\" : \"SAFE\",\n \"rt\" : \"http://localhost:8080/profile/addresses#address\"\n } ]\n }\n...\n----\n\n<1> The value of `rest.description.person` maps into the whole representation.\n<2> The value of `rest.description.person.firstName` maps to the `firstName` attribute.\n<3> The value of `rest.description.person.lastName` maps to the `lastName` attribute.\n<4> The value of `rest.description.person.id` maps to the `id` attribute, a field not normally displayed.\n<5> The value of `rest.description.person.address` maps to the `address` attribute.\n====\n\nSupplying these property settings causes each field to have an extra `doc` attribute.\n\nNOTE: Spring MVC (which is the essence of a Spring Data REST application) supports locales, meaning you can bundle up multiple\nproperties files with different messages.\n\n[[metadata.json-schema]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/metadata.adoc", "title": "metadata", "heading": "Adding Custom Details to Your ALPS Descriptions", "heading_level": 3, "file_order": 16, "section_index": 4, "content_hash": "28fedadee2bc33d0f9c527b59cd4aa0f4528c365942a85923b06c25ebb08c16e", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/metadata.adoc"}}
{"id": "sha256:129a02ade26a51cd34c517708750b91f868b82c16676c383cacc1f2cc505896f", "content": "https://json-schema.org/[JSON Schema] is another form of metadata supported by Spring Data REST. Per their website, JSON Schema has the following advantages:\n\n* Describes your existing data format\n* Clear, human- and machine-readable documentation\n* Complete structural validation, useful for automated testing and validating client-submitted data\n\nAs shown in the xref:metadata.adoc#metadata.alps[previous section], you can reach this data by navigating from the root URI to the `profile` link.\n\n====\n[source,javascript]\n----\n{\n \"_links\" : {\n \"self\" : {\n \"href\" : \"http://localhost:8080/profile\"\n },\n \"persons\" : {\n \"href\" : \"http://localhost:8080/profile/persons\"\n },\n \"addresses\" : {\n \"href\" : \"http://localhost:8080/profile/addresses\"\n }\n }\n}\n----\n====\n\nThese links are the same as shown earlier. To retrieve JSON Schema, you can invoke them with the following `Accept` header: `application/schema+json`.\n\nIn this case, if you ran `curl -H 'Accept:application/schema+json' http://localhost:8080/profile/persons`, you would see output resembling the following:\n\n====\n[source,javascript]\n----\n{\n \"title\" : \"org.springframework.data.rest.webmvc.jpa.Person\", <1>\n \"properties\" : { <2>\n \"firstName\" : {\n \"readOnly\" : false,\n \"type\" : \"string\"\n },\n \"lastName\" : {\n \"readOnly\" : false,\n \"type\" : \"string\"\n },\n \"siblings\" : {\n \"readOnly\" : false,\n \"type\" : \"string\",\n \"format\" : \"uri\"\n },\n \"created\" : {\n \"readOnly\" : false,\n \"type\" : \"string\",\n \"format\" : \"date-time\"\n },\n \"father\" : {\n \"readOnly\" : false,\n \"type\" : \"string\",\n \"format\" : \"uri\"\n },\n \"weight\" : {\n \"readOnly\" : false,\n \"type\" : \"integer\"\n },\n \"height\" : {\n \"readOnly\" : false,\n \"type\" : \"integer\"\n }\n },\n \"descriptors\" : { },\n \"type\" : \"object\",\n \"$schema\" : \"https://json-schema.org/draft-04/schema#\"\n}\n----\n\n<1> The type that was exported\n<2> A listing of properties\n====\n\nThere are more details if your resources have links to other resources.\n\nYou can also find a `profile` link in the collection of `_links` when you examine a collection resource, as the following example shows:\n\n====\n[source,javascript]\n----\n{\n \"_links\" : {\n \"self\" : {\n \"href\" : \"http://localhost:8080/persons\" <1>\n },\n ... other links ...\n \"profile\" : {\n \"href\" : \"http://localhost:8080/profile/persons\" <2>\n }\n },\n ...\n}\n----\n\n<1> This HAL document respresents the `Person` collection.\n<2> It has a *profile* link to the same URI for metadata.\n====\n\nAgain, the `profile` link serves xref:metadata.adoc#metadata.alps[ALPS] by default. If you supply it with an https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1[`Accept` header] of `application/schema+json`, it renders the JSON Schema representation.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/metadata.adoc", "title": "metadata", "heading": "JSON Schema", "heading_level": 2, "file_order": 16, "section_index": 5, "content_hash": "129a02ade26a51cd34c517708750b91f868b82c16676c383cacc1f2cc505896f", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/metadata.adoc"}}
{"id": "sha256:6780a0965f136e207a98953be055e078d19cac09979e20cdb72cb5650514dd24", "content": "[[paging-and-sorting]]\n\nThis section documents Spring Data REST's usage of the Spring Data Repository paging and sorting abstractions. To familiarize yourself with those features, see the Spring Data documentation for the repository implementation you use (such as Spring Data JPA).\n\n[[paging-and-sorting.paging]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/paging-and-sorting.adoc", "title": "paging-and-sorting", "heading": "paging-and-sorting", "heading_level": 1, "file_order": 17, "section_index": 0, "content_hash": "6780a0965f136e207a98953be055e078d19cac09979e20cdb72cb5650514dd24", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/paging-and-sorting.adoc"}}
{"id": "sha256:bfdb689eb23816b3584d768b69a46b252afbf51b0eb2645a97bd8455e569d3bf", "content": "Rather than return everything from a large result set, Spring Data REST recognizes some URL parameters that influence the page size and the starting page number.\n\nIf you extend `PagingAndSortingRepository<T, ID>` and access the list of all entities, you get links to the first 20 entities. To set the page size to any other number, add a `size` parameter, as follows:\n\n====\n----\nhttp://localhost:8080/people/?size=5\n----\n====\n\nThe preceding example sets the page size to 5.\n\nTo use paging in your own query methods, you need to change the method signature to accept an additional `Pageable` parameter and return a `Page` or `Slice` rather than a `List`. For example, the following query method is exported to `/people/search/nameStartsWith` and supports paging:\n\n====\n[source,java]\n----\n@RestResource(path = \"nameStartsWith\", rel = \"nameStartsWith\")\npublic Page findByNameStartsWith(@Param(\"name\") String name, Pageable p);\n----\n====\n\nThe Spring Data REST exporter recognizes the returned `Page`/`Slice` and gives you the results in the body of the response, just as it would with a non-paged response, but additional links are added to the resource to represent the previous and next pages of data.\n\n[[paging-and-sorting.paging.prev-and-next-links]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/paging-and-sorting.adoc", "title": "paging-and-sorting", "heading": "Paging", "heading_level": 2, "file_order": 17, "section_index": 1, "content_hash": "bfdb689eb23816b3584d768b69a46b252afbf51b0eb2645a97bd8455e569d3bf", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/paging-and-sorting.adoc"}}
{"id": "sha256:6fed3ca3af067e781659420b3d8ce359e950ea1ddc7af4cf0dae907e5a376ba1", "content": "Each paged response returns links to the previous and next pages of results based on the current page by using the IANA-defined link relations https://www.w3.org/TR/html5/links.html#link-type-prev[`prev`] and https://www.w3.org/TR/html5/links.html#link-type-next[`next`]. If you are currently at the first page of results, however, no `prev` link is rendered. For the last page of results, no `next` link is rendered.\n\nConsider the following example, where we set the page size to 5:\n\n====\n----\ncurl localhost:8080/people?size=5\n----\n====\n\n====\n[source,javascript]\n----\n{\n \"_links\" : {\n \"self\" : {\n \"href\" : \"http://localhost:8080/persons{&sort,page,size}\", <1>\n \"templated\" : true\n },\n \"next\" : {\n \"href\" : \"http://localhost:8080/persons?page=1&size=5{&sort}\", <2>\n \"templated\" : true\n }\n },\n \"_embedded\" : {\n … data …\n },\n \"page\" : { <3>\n \"size\" : 5,\n \"totalElements\" : 50,\n \"totalPages\" : 10,\n \"number\" : 0\n }\n}\n----\nAt the top, we see `_links`:\n\n<1> The `self` link serves up the whole collection with some options.\n<2> The `next` link points to the next page, assuming the same page size.\n<3> At the bottom is extra data about the page settings, including the size of a page, total elements, total pages, and the page number you are currently viewing.\n====\n\nNOTE: When using tools such as `curl` on the command line, if you have a ampersand (`&`) in your statement, you need to wrap the whole URI in quotation marks.\n\nNote that the `self` and `next` URIs are, in fact, URI templates. They accept not only `size`, but also `page` and `sort` as optional flags.\n\nAs mentioned earlier, the bottom of the HAL document includes a collection of details about the page. This extra information makes it easy for you to configure UI tools like sliders or indicators to reflect the user's overall position when they view the data. For example, the document in the preceding example shows we are looking at the first page (with page numbers starting at 0).\n\nThe following example shows What happens when we follow the `next` link:\n\n====\n----\n$ curl \"http://localhost:8080/persons?page=1&size=5\"\n----\n====\n\n====\n[source,javascript]\n----\n{\n \"_links\" : {\n \"self\" : {\n \"href\" : \"http://localhost:8080/persons{&sort,projection,page,size}\",\n \"templated\" : true\n },\n \"next\" : {\n \"href\" : \"http://localhost:8080/persons?page=2&size=5{&sort,projection}\", <1>\n \"templated\" : true\n },\n \"prev\" : {\n \"href\" : \"http://localhost:8080/persons?page=0&size=5{&sort,projection}\", <2>\n \"templated\" : true\n }\n },\n \"_embedded\" : {\n\t... data ...\n },\n \"page\" : {\n \"size\" : 5,\n \"totalElements\" : 50,\n \"totalPages\" : 10,\n \"number\" : 1 <3>\n }\n}\n----\n\nThis looks very similar, except for the following differences:\n\n<1> The `next` link now points to yet another page, indicating its relative perspective to the `self` link.\n<2> A `prev` link now appears, giving us a path to the previous page.\n<3> The current number is now 1 (indicating the second page).\n====\n\nThis feature lets you map optional buttons on the screen to these hypermedia controls, letting you implement navigational features for the UI experience without having to hard code the URIs. In fact, the user can be empowered to pick from a list of page sizes, dynamically changing the content served, without having to rewrite the `next` and `prev controls at the top or bottom.\n\n[[paging-and-sorting.sorting]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/paging-and-sorting.adoc", "title": "paging-and-sorting", "heading": "Previous and Next Links", "heading_level": 3, "file_order": 17, "section_index": 2, "content_hash": "6fed3ca3af067e781659420b3d8ce359e950ea1ddc7af4cf0dae907e5a376ba1", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/paging-and-sorting.adoc"}}
{"id": "sha256:89de56317d1106685099be606c29212f7bbfdab809c0a4802a9adce12803b3a6", "content": "Spring Data REST recognizes sorting parameters that use the repository sorting support.\n\nTo have your results sorted on a particular property, add a `sort` URL parameter with the name of the property on which you want to sort the results. You can control the direction of the sort by appending a comma (`,`) to the the property name plus either `asc` or `desc`. The following would use the `findByNameStartsWith` query method defined on the `PersonRepository` for all `Person` entities with names starting with the letter \"`K`\" and add sort data that orders the results on the `name` property in descending order:\n\n====\n----\ncurl -v \"http://localhost:8080/people/search/nameStartsWith?name=K&sort=name,desc\"\n----\n====\n\nTo sort the results by more than one property, keep adding as many `sort=PROPERTY` parameters as you need. They are added to the `Pageable` in the order in which they appear in the query string. Results can be sorted by top-level and nested properties. Use property path notation to express a nested sort property. Sorting by linkable associations (that is, links to top-level resources) is not supported.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/paging-and-sorting.adoc", "title": "paging-and-sorting", "heading": "Sorting", "heading_level": 2, "file_order": 17, "section_index": 3, "content_hash": "89de56317d1106685099be606c29212f7bbfdab809c0a4802a9adce12803b3a6", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/paging-and-sorting.adoc"}}
{"id": "sha256:9084cecaef7979fff86bbdb4a123e6d07092e1c3b6e80367a036b3ee2e2fb11c", "content": "[[projections-excerpts]]\n\nSpring Data REST presents a default view of the domain model you export. However, sometimes, you may need to alter the view of that model for various reasons. This section covers how to define projections and excerpts to serve up simplified and reduced views of resources.\n\n[[projections-excerpts.projections]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/projections-excerpts.adoc", "title": "projections-excerpts", "heading": "projections-excerpts", "heading_level": 1, "file_order": 18, "section_index": 0, "content_hash": "9084cecaef7979fff86bbdb4a123e6d07092e1c3b6e80367a036b3ee2e2fb11c", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/projections-excerpts.adoc"}}
{"id": "sha256:3bf6b9259197d23cf811cd5b17a97a7f706f07f1638cee627936ed576d4ec5af", "content": "Consider the following domain model:\n\n====\n[source,java]\n----\n@Entity\npublic class Person {\n\n @Id @GeneratedValue\n private Long id;\n private String firstName, lastName;\n\n @OneToOne\n private Address address;\n …\n}\n----\n====\n\nThe `Person` object in the preceding example has several attributes:\n\n* `id` is the primary key.\n* `firstName` and `lastName` are data attributes.\n* `address` is a link to another domain object.\n\nNow assume that we create a corresponding repository, as follows:\n\n====\n[source,java]\n----\ninterface PersonRepository extends CrudRepository<Person, Long> {}\n----\n====\n\nBy default, Spring Data REST exports this domain object, including all of its attributes. `firstName` and `lastName` are exported as the plain data objects that they are. There are two options regarding the `address` attribute. One option is to also define a repository for `Address` objects, as follows:\n\n====\n[source,java]\n----\ninterface AddressRepository extends CrudRepository<Address, Long> {}\n----\n====\n\nIn this situation, a `Person` resource renders the `address` attribute as a URI to its corresponding `Address` resource. If we were to look up \"`Frodo`\" in the system, we could expect to see a HAL document like this:\n\n====\n[source,javascript]\n----\n{\n \"firstName\" : \"Frodo\",\n \"lastName\" : \"Baggins\",\n \"_links\" : {\n \"self\" : {\n \"href\" : \"http://localhost:8080/persons/1\"\n },\n \"address\" : {\n \"href\" : \"http://localhost:8080/persons/1/address\"\n }\n }\n}\n----\n====\n\nThere is another way. If the `Address` domain object does not have its own repository definition, Spring Data REST includes the data fields inside the `Person` resource, as the following example shows:\n\n====\n[source,javascript]\n----\n{\n \"firstName\" : \"Frodo\",\n \"lastName\" : \"Baggins\",\n \"address\" : {\n \"street\": \"Bag End\",\n \"state\": \"The Shire\",\n \"country\": \"Middle Earth\"\n },\n \"_links\" : {\n \"self\" : {\n \"href\" : \"http://localhost:8080/persons/1\"\n }\n }\n}\n----\n====\n\nBut what if you do not want `address` details at all? Again, by default, Spring Data REST exports all of its attributes (except the `id`). You can offer the consumer of your REST service an alternative by defining one or more projections. The following example shows a projection that does not include the address:\n\n====\n[source,java]\n----\n@Projection(name = \"noAddresses\", types = { Person.class }) <1>\ninterface NoAddresses { <2>\n\n String getFirstName(); <3>\n\n String getLastName(); <4>\n}\n----\n\n<1> The `@Projection` annotation flags this as a projection. The `name` attribute provides\nthe name of the projection, which we cover in more detail shortly. The `types` attributes targets this projection to apply only to `Person` objects.\n<2> It is a Java interface, making it declarative.\n<3> It exports the `firstName`.\n<4> It exports the `lastName`.\n====\n\nThe `NoAddresses` projection only has getters for `firstName` and `lastName`, meaning that it does not serve up any address information. Assuming you have a separate repository for `Address` resources, the default view from Spring Data REST differs slightly from the previous representation, as the following example shows:\n\n====\n[source,javascript]\n----\n{\n \"firstName\" : \"Frodo\",\n \"lastName\" : \"Baggins\",\n \"_links\" : {\n \"self\" : {\n \"href\" : \"http://localhost:8080/persons/1{?projection}\", <1>\n \"templated\" : true <2>\n },\n \"address\" : {\n \"href\" : \"http://localhost:8080/persons/1/address\"\n }\n }\n}\n----\n\n<1> This resource has a new option: `{?projection}`.\n<2> The `self` URI is a URI Template.\n====\n\nTo view the projection to the resource, look up `http://localhost:8080/persons/1?projection=noAddresses`.\n\nNOTE: The value supplied to the `projection` query parameter is the same as that specified in `@Projection(name = \"noAddress\")`. It has nothing to do with the name of the projection's interface.\n\nYou can have multiple projections.\n\nNOTE: See xref:introduction/spring-data-rest-examples.adoc#spring-data-examples.projections[Projections] to see an example project. We encourage you to experiment with it.\n\nSpring Data REST finds projection definitions as follows:\n\n* Any `@Projection` interface found in the same package as your entity definitions (or one of its sub-packages) is registered.\n* You can manually register a projection by using `RepositoryRestConfiguration.getProjectionConfiguration().addProjection(…)`.\n\nIn either case, the projection interface must have the `@Projection` annotation.\n\n[[projections-excerpts.finding-projections]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/projections-excerpts.adoc", "title": "projections-excerpts", "heading": "Projections", "heading_level": 2, "file_order": 18, "section_index": 1, "content_hash": "3bf6b9259197d23cf811cd5b17a97a7f706f07f1638cee627936ed576d4ec5af", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/projections-excerpts.adoc"}}
{"id": "sha256:abc25bb6496a08945b28fc16c2044e7bd88122b0e5643944a1e0dbba3476c611", "content": "Spring Data REST exposes xref:metadata.adoc#metadata.alps[Application-Level Profile Semantics (ALPS)] documents, a micro metadata format. To view the ALPS metadata, follow the `profile` link exposed by the root resource. If you navigate down to the ALPS document for `Person` resources (which would be `/alps/persons`), you can find many details about `Person` resources. Projections are listed, along with the details about the `GET` REST transition, in blocks similar to the following example:\n\n====\n[source,javascript]\n----\n{ …\n \"id\" : \"get-person\", <1>\n \"name\" : \"person\",\n \"type\" : \"SAFE\",\n \"rt\" : \"#person-representation\",\n \"descriptors\" : [ {\n \"name\" : \"projection\", <2>\n \"doc\" : {\n \"value\" : \"The projection that shall be applied when rendering the response. Acceptable values available in nested descriptors.\",\n \"format\" : \"TEXT\"\n },\n \"type\" : \"SEMANTIC\",\n \"descriptors\" : [ {\n \"name\" : \"noAddresses\", <3>\n \"type\" : \"SEMANTIC\",\n \"descriptors\" : [ {\n \"name\" : \"firstName\", <4>\n \"type\" : \"SEMANTIC\"\n }, {\n \"name\" : \"lastName\", <4>\n \"type\" : \"SEMANTIC\"\n } ]\n } ]\n } ]\n},\n…\n----\n\n<1> This part of the ALPS document shows details about `GET` and `Person` resources.\n<2> This part contais the `projection` options.\n<3> This part contains the `noAddresses` projection.\n<4> The actual attributes served up by this projection include `firstName` and `lastName`.\n====\n\n[NOTE]\n====\nProjection definitions are picked up and made available for clients if they are:\n\n* Flagged with the `@Projection` annotation and located in the same package (or sub-package) of the domain type, OR\n* Manually registered by using `RepositoryRestConfiguration.getProjectionConfiguration().addProjection(…)`.\n====\n\n[[projections-excerpts.projections.hidden-data]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/projections-excerpts.adoc", "title": "projections-excerpts", "heading": "Finding Existing Projections", "heading_level": 3, "file_order": 18, "section_index": 2, "content_hash": "abc25bb6496a08945b28fc16c2044e7bd88122b0e5643944a1e0dbba3476c611", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/projections-excerpts.adoc"}}
{"id": "sha256:44cf37fa640e404293386b20f0ec86a668d7a326672fcde9d45bb386e7cad39f", "content": "So far in this section, we have covered how projections can be used to reduce the information that is presented to the user. Projections can also bring in normally unseen data. For example, Spring Data REST ignores fields or getters that are marked up with `@JsonIgnore` annotations. Consider the following domain object:\n\n====\n[source,java]\n----\n@Entity\npublic class User {\n\n\t@Id @GeneratedValue\n\tprivate Long id;\n\tprivate String name;\n\n\t@JsonIgnore private String password; <1>\n\n\tprivate String[] roles;\n …\n----\n\n<1> Jackson's `@JsonIgnore` is used to prevent the `password` field from being serialized into JSON.\n====\n\nThe `User` class in the preceding example can be used to store user information as well as integration with Spring Security. If you create a `UserRepository`, the `password` field would normally have been exported, which is not good. In the preceding example, we prevent that from happening by applying Jackson's `@JsonIgnore` on the `password` field.\n\nNOTE: Jackson also does not serialize the field into JSON if `@JsonIgnore` is on the field's corresponding getter function.\n\nHowever, projections introduce the ability to still serve this field. It is possible to create the following projection:\n\n====\n[source,java]\n----\n@Projection(name = \"passwords\", types = { User.class })\ninterface PasswordProjection {\n\n String getPassword();\n}\n----\n====\n\nIf such a projection is created and used, it sidesteps the `@JsonIgnore` directive placed on `User.password`.\n\nIMPORTANT: This example may seem a bit contrived, but it is possible, with a richer domain model and many projections, to accidentally leak such details. Since Spring Data REST cannot discern the sensitivity of such data, it is up to you to avoid such situations.\n\nProjections can also generate virtual data. Imagine you had the following entity definition:\n\n====\n[source,java]\n----\n@Entity\npublic class Person {\n\n ...\n private String firstName;\n private String lastName;\n\n ...\n}\n----\n====\n\nYou can create a projection that combines the two data fields in the preceding example together, as follows:\n\n====\n[source,java]\n----\n@Projection(name = \"virtual\", types = { Person.class })\npublic interface VirtualProjection {\n\n @Value(\"#{target.firstName} #{target.lastName}\") <1>\n String getFullName();\n\n}\n----\n\n<1> Spring's `@Value` annotation lets you plug in a SpEL expression that takes the target object and splices together its `firstName` and `lastName` attributes to render a read-only `fullName`.\n====\n\n[[projections-excerpts.excerpts]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/projections-excerpts.adoc", "title": "projections-excerpts", "heading": "Bringing in Hidden Data", "heading_level": 3, "file_order": 18, "section_index": 3, "content_hash": "44cf37fa640e404293386b20f0ec86a668d7a326672fcde9d45bb386e7cad39f", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/projections-excerpts.adoc"}}
{"id": "sha256:92674128654ab0c73f5af7afbd0390f406ebaa437fd661fb0389e92ca4b6038b", "content": "An excerpt is a projection that is automatically applied to a resource collection. For example, you can alter the `PersonRepository` as follows:\n\n====\n[source,java]\n----\n@RepositoryRestResource(excerptProjection = NoAddresses.class)\ninterface PersonRepository extends CrudRepository<Person, Long> {}\n----\n====\n\nThe preceding example directs Spring Data REST to use the `NoAddresses` projection when embedding `Person` resources into collections or related resources.\n\nNOTE: Excerpt projections are not automatically applied to single resources. They have to be applied deliberately. Excerpt projections are meant to provide a default preview of collection data but not when fetching individual resources. See https://stackoverflow.com/questions/30220333/why-is-an-excerpt-projection-not-applied-automatically-for-a-spring-data-rest-it[Why is an excerpt projection not applied automatically for a Spring Data REST item resource?] for a discussion on the subject.\n\nIn addition to altering the default rendering, excerpts have additional rendering options as shown in the next section.\n\n[[projections-excerpts.excerpting-commonly-accessed-data]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/projections-excerpts.adoc", "title": "projections-excerpts", "heading": "Excerpts", "heading_level": 2, "file_order": 18, "section_index": 4, "content_hash": "92674128654ab0c73f5af7afbd0390f406ebaa437fd661fb0389e92ca4b6038b", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/projections-excerpts.adoc"}}
{"id": "sha256:0887e9ad82022bb1f602a03d8109324816f5f05216dfde676105a3f95f6a4f93", "content": "A common situation with REST services arises when you compose domain objects. For example, a `Person` is stored in one table and their related `Address` is stored in another. By default, Spring Data REST serves up the person's `address` as a URI the client must navigate. But if it is common for consumers to always fetch this extra piece of data, an excerpt projection can put this extra piece of data inline, saving you an extra `GET`. To do so, you can define another excerpt projection, as follows:\n\n====\n[source,java]\n----\n@Projection(name = \"inlineAddress\", types = { Person.class }) <1>\ninterface InlineAddress {\n\n String getFirstName();\n\n String getLastName();\n\n Address getAddress(); <2>\n}\n----\n\n<1> This projection has been named `inlineAddress`.\n<2> This projection adds `getAddress`, which returns the `Address` field. When used inside a projection, it causes the information to be included inline.\n====\n\nYou can plug it into the `PersonRepository` definition, as follows:\n\n====\n[source,java]\n----\n@RepositoryRestResource(excerptProjection = InlineAddress.class)\ninterface PersonRepository extends CrudRepository<Person, Long> {}\n----\n====\n\nDoing so causes the HAL document to appear as follows:\n\n====\n[source,javascript]\n----\n{\n \"firstName\" : \"Frodo\",\n \"lastName\" : \"Baggins\",\n \"address\" : { <1>\n \"street\": \"Bag End\",\n \"state\": \"The Shire\",\n \"country\": \"Middle Earth\"\n },\n \"_links\" : {\n \"self\" : {\n \"href\" : \"http://localhost:8080/persons/1\"\n },\n \"address\" : { <2>\n \"href\" : \"http://localhost:8080/persons/1/address\"\n }\n }\n}\n----\n\n<1> The `address` data is directly included inline, so you do not have to navigate to get it.\n<2> The link to the `Address` resource is still provided, making it still possible to navigate to its own resource.\n====\n\nNote that the preceding example is a mix of the examples shown earlier in this chapter. You may want to read back through them to follow the progression to the final example.\n\nWARNING: Configuring `@RepositoryRestResource(excerptProjection=...)` for a repository alters the default behavior. This can potentially cause breaking changes to consumers of your service if you have already made a release.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/projections-excerpts.adoc", "title": "projections-excerpts", "heading": "Excerpting Commonly Accessed Data", "heading_level": 3, "file_order": 18, "section_index": 5, "content_hash": "0887e9ad82022bb1f602a03d8109324816f5f05216dfde676105a3f95f6a4f93", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/projections-excerpts.adoc"}}
{"id": "sha256:c033e5d95782df617654ff63b43063171db09858c33a34670dff08c352831e9f", "content": "[[repository-resources]]\n\n[[repository-resources.fundamentals]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "repository-resources", "heading_level": 1, "file_order": 19, "section_index": 0, "content_hash": "c033e5d95782df617654ff63b43063171db09858c33a34670dff08c352831e9f", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:7881a1e7a42b640eb0381b0a86b624e559c2aed1ec10b956036e973f2d173a40", "content": "The core functionality of Spring Data REST is to export resources for Spring Data repositories. Thus, the core artifact to look at and potentially customize the way the exporting works is the repository interface. Consider the following repository interface:\n\n====\n[source]\n----\npublic interface OrderRepository extends CrudRepository<Order, Long> { }\n----\n====\n\nFor this repository, Spring Data REST exposes a collection resource at `/orders`. The path is derived from the uncapitalized, pluralized, simple class name of the domain class being managed. It also exposes an item resource for each of the items managed by the repository under the URI template `/orders/\\{id}`.\n\nBy default, the HTTP methods to interact with these resources map to the according methods of `CrudRepository`. Read more on that in the sections on xref:repository-resources.adoc#repository-resources.collection-resource[collection resources] and xref:repository-resources.adoc#repository-resources.item-resource[item resources].\n\n[[repository-resources.methods]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Fundamentals", "heading_level": 2, "file_order": 19, "section_index": 1, "content_hash": "7881a1e7a42b640eb0381b0a86b624e559c2aed1ec10b956036e973f2d173a40", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:0e902cbeb6c805b0c106e2bb6f1f0fbd30cde33f9f52efefb3e2799c7bfbc23f", "content": "Which HTTP resources are exposed for a certain repository is mostly driven by the structure of the repository.\nIn other words, the resource exposure will follow which methods you have exposed on the repository.\nIf you extend `CrudRepository` you usually expose all methods required to expose all HTTP resources we can register by default.\nEach of the resources listed below will define which of the methods need to be present so that a particular HTTP method can be exposed for each of the resources.\nThat means, that repositories that are not exposing those methods -- either by not declaring them at all or explicitly using `@RestResource(exported = false)` -- won't expose those HTTP methods on those resources.\n\nFor details on how to tweak the default method exposure or dedicated HTTP methods individually see xref:customizing-sdr.adoc#customizing-sdr.http-methods[Customizing supported HTTP methods].\n\n[[repository-resources.default-status-codes]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Repository methods exposure", "heading_level": 3, "file_order": 19, "section_index": 2, "content_hash": "0e902cbeb6c805b0c106e2bb6f1f0fbd30cde33f9f52efefb3e2799c7bfbc23f", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:64c25a720ea7215613ea29e4dabd48e50d8359826c0470f835b2abcf0a404510", "content": "For the resources exposed, we use a set of default status codes:\n\n* `200 OK`: For plain `GET` requests.\n* `201 Created`: For `POST` and `PUT` requests that create new resources.\n* `204 No Content`: For `PUT`, `PATCH`, and `DELETE` requests when the configuration is set to not return response bodies for resource updates (`RepositoryRestConfiguration.setReturnBodyOnUpdate(…)`).\nIf the configuration value is set to include responses for `PUT`, `200 OK` is returned for updates, and `201 Created` is returned for resource created through `PUT`.\n\nIf the configuration values (`RepositoryRestConfiguration.returnBodyOnUpdate(…)` and `RepositoryRestConfiguration.returnBodyCreate(…)`) are explicitly set to `null` -- which they are by default --, the presence of the HTTP Accept header is used to determine the response code.\nRead more on this in the detailed description of xref:repository-resources.adoc#repository-resources.collection-resource.supported-methods.post[collection] and xref:repository-resources.adoc#repository-resources.item-resource.supported-methods.put[item resources].\n\n[[repository-resources.resource-discoverability]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Default Status Codes", "heading_level": 3, "file_order": 19, "section_index": 3, "content_hash": "64c25a720ea7215613ea29e4dabd48e50d8359826c0470f835b2abcf0a404510", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:a722cf57e211d1ef19bc2cf06f62bdfe34056ba9417a127c53cb8706acb9cf18", "content": "A core principle of https://github.com/spring-guides/understanding/tree/master/hateoas[HATEOAS] is that resources should be discoverable through the publication of links that point to the available resources. There are a few competing de-facto standards of how to represent links in JSON. By default, Spring Data REST uses https://tools.ietf.org/html/draft-kelly-json-hal[HAL] to render responses. HAL defines the links to be contained in a property of the returned document.\n\nResource discovery starts at the top level of the application. By issuing a request to the root URL under which the Spring Data REST application is deployed, the client can extract, from the returned JSON object, a set of links that represent the next level of resources that are available to the client.\n\nFor example, to discover what resources are available at the root of the application, issue an HTTP `GET` to the root URL, as follows:\n\n====\n[source]\n----\ncurl -v http://localhost:8080/\n\n< HTTP/1.1 200 OK\n< Content-Type: application/hal+json\n\n{ \"_links\" : {\n \"orders\" : {\n \"href\" : \"http://localhost:8080/orders\"\n },\n \"profile\" : {\n \"href\" : \"http://localhost:8080/api/alps\"\n }\n }\n}\n----\n====\n\nThe property of the result document is an object that consists of keys representing the relation type, with nested link objects as specified in HAL.\n\nNOTE: For more details about the `profile` link, see xref:metadata.adoc#metadata.alps[Application-Level Profile Semantics (ALPS)].\n\n[[repository-resources.collection-resource]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Resource Discoverability", "heading_level": 3, "file_order": 19, "section_index": 4, "content_hash": "a722cf57e211d1ef19bc2cf06f62bdfe34056ba9417a127c53cb8706acb9cf18", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:ad115e2189ed14344281390e2b66016b9081752490fb676a4c69fb1f136d4587", "content": "Spring Data REST exposes a collection resource named after the uncapitalized, pluralized version of the domain class the exported repository is handling. Both the name of the resource and the path can be customized by using `@RepositoryRestResource` on the repository interface.\n\n[[repository-resources.collection-resource.supported-methods]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "The Collection Resource", "heading_level": 2, "file_order": 19, "section_index": 5, "content_hash": "ad115e2189ed14344281390e2b66016b9081752490fb676a4c69fb1f136d4587", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:3e8dfe83b04e16d0839f3d69db2d34aa3343563ed5a1cba9d682c662e428d8d9", "content": "Collections resources support both `GET` and `POST`. All other HTTP methods cause a `405 Method Not Allowed`.\n\n[[repository-resources.collection-resource.supported-methods.get]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Supported HTTP Methods", "heading_level": 3, "file_order": 19, "section_index": 6, "content_hash": "3e8dfe83b04e16d0839f3d69db2d34aa3343563ed5a1cba9d682c662e428d8d9", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:7dc05f41d8c2b2405b49eb1510dc6ed2852e927b2b71e444f3432f089529ea40", "content": "Returns all entities the repository servers through its `findAll(…)` method.\nIf the repository is a paging repository we include the pagination links if necessary and additional page metadata.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "`GET`", "heading_level": 4, "file_order": 19, "section_index": 7, "content_hash": "7dc05f41d8c2b2405b49eb1510dc6ed2852e927b2b71e444f3432f089529ea40", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:7c1a528b2fde96399d11ba087bb76e6ac0a6da12bab1a9b7c5e6901b554d69cb", "content": "The following methods are used if present (descending order):\n\n- `findAll(Pageable)`\n- `findAll(Sort)`\n- `findAll()`\n\nFor more information on the default exposure of methods, see xref:repository-resources.adoc#repository-resources.methods[Repository methods exposure].\n\n[[parameters]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Methods used for invocation", "heading_level": 5, "file_order": 19, "section_index": 8, "content_hash": "7c1a528b2fde96399d11ba087bb76e6ac0a6da12bab1a9b7c5e6901b554d69cb", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:76cae40c4bf75f177896f1cd2a2e93c15bbfceba8143b0fe76531c9a37f766a2", "content": "If the repository has pagination capabilities, the resource takes the following parameters:\n\n* `page`: The page number to access (0 indexed, defaults to 0).\n* `size`: The page size requested (defaults to 20).\n* `sort`: A collection of sort directives in the format `($propertyname,)+[asc|desc]`?.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Parameters", "heading_level": 5, "file_order": 19, "section_index": 9, "content_hash": "76cae40c4bf75f177896f1cd2a2e93c15bbfceba8143b0fe76531c9a37f766a2", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:fe8ff55ee9b1238917b49a121d7a3ece31907b6e5bdfa0366873bc5f77750cb2", "content": "The `GET` method has only one custom status code:\n\n* `405 Method Not Allowed`: If the `findAll(…)` methods were not exported (through `@RestResource(exported = false)`) or are not present in the repository.\n\n[[supported-media-types]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Custom Status Codes", "heading_level": 5, "file_order": 19, "section_index": 10, "content_hash": "fe8ff55ee9b1238917b49a121d7a3ece31907b6e5bdfa0366873bc5f77750cb2", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:54c42a30875fc5c5ff6576ab5be10a5db921d1744db26ee56a173727fc2d4a3a", "content": "The `GET` method supports the following media types:\n\n* `application/hal+json`\n* `application/json`\n\n[[related-resources]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Supported Media Types", "heading_level": 5, "file_order": 19, "section_index": 11, "content_hash": "54c42a30875fc5c5ff6576ab5be10a5db921d1744db26ee56a173727fc2d4a3a", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:3692a8199a4db70dfa9c1d7489a17d83670baefe57a4d86facc4e036522040ba", "content": "The `GET` method supports a single link for discovering related resources:\n\n* `search`: A xref:repository-resources.adoc#repository-resources.search-resource[search resource] is exposed if the backing repository exposes query methods.\n\n[[repository-resources.collection-resource.supported-methods.head]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Related Resources", "heading_level": 5, "file_order": 19, "section_index": 12, "content_hash": "3692a8199a4db70dfa9c1d7489a17d83670baefe57a4d86facc4e036522040ba", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:5181c1b2b8d7274e6209d4b01251797bb9d93f1dd361782297576d0d0dc88c88", "content": "The `HEAD` method returns whether the collection resource is available. It has no status codes, media types, or related resources.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "`HEAD`", "heading_level": 4, "file_order": 19, "section_index": 13, "content_hash": "5181c1b2b8d7274e6209d4b01251797bb9d93f1dd361782297576d0d0dc88c88", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:9858bbc4d87d625ee4fdd5554f35f4cf8296ce0c8f8a9e88d6b86a1363eaec23", "content": "The following methods are used if present (descending order):\n\n- `findAll(Pageable)`\n- `findAll(Sort)`\n- `findAll()`\n\nFor more information on the default exposure of methods, see xref:repository-resources.adoc#repository-resources.methods[Repository methods exposure].\n\n[[repository-resources.collection-resource.supported-methods.post]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Methods used for invocation", "heading_level": 5, "file_order": 19, "section_index": 14, "content_hash": "9858bbc4d87d625ee4fdd5554f35f4cf8296ce0c8f8a9e88d6b86a1363eaec23", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:27012503e8a0a34566a11f4f6b27be81d09e837eb12197c179fe3a5deef44e5f", "content": "The `POST` method creates a new entity from the given request body.\nBy default, whether the response contains a body is controlled by the `Accept` header sent with the request.\nIf one is sent, a response body is created.\nIf not, the response body is empty and a representation of the resource created can be obtained by following link contained in the `Location` response header.\nThis behavior can be overridden by configuring `RepositoryRestConfiguration.setReturnBodyOnCreate(…)` accordingly.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "`POST`", "heading_level": 4, "file_order": 19, "section_index": 15, "content_hash": "27012503e8a0a34566a11f4f6b27be81d09e837eb12197c179fe3a5deef44e5f", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:b1607773a84b9345ecdcb9a36c8751222ed7daa7b87fe1cac7ba4667800b04ba", "content": "The following methods are used if present (descending order):\n\n- `save(…)`\n\nFor more information on the default exposure of methods, see xref:repository-resources.adoc#repository-resources.methods[Repository methods exposure].", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Methods used for invocation", "heading_level": 5, "file_order": 19, "section_index": 16, "content_hash": "b1607773a84b9345ecdcb9a36c8751222ed7daa7b87fe1cac7ba4667800b04ba", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:6c395e9693dd9f9ba33c9f416127a44ed6641e078ff87f73352609d384721924", "content": "The `POST` method has only one custom status code:\n\n* `405 Method Not Allowed`: If the `save(…)` methods were not exported (through `@RestResource(exported = false)`) or are not present in the repository at all.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Custom Status Codes", "heading_level": 5, "file_order": 19, "section_index": 17, "content_hash": "6c395e9693dd9f9ba33c9f416127a44ed6641e078ff87f73352609d384721924", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:6d138fb475ed5f7e9e524cb489d21788f2412ddcd96b41ed72318c70302bc8f1", "content": "The `POST` method supports the following media types:\n\n* application/hal+json\n* application/json\n\n[[repository-resources.item-resource]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Supported Media Types", "heading_level": 5, "file_order": 19, "section_index": 18, "content_hash": "6d138fb475ed5f7e9e524cb489d21788f2412ddcd96b41ed72318c70302bc8f1", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:2d7d9638f64025e25d2d9d182e14a7ea21ab4193c82db9f246c0c6bbee57a563", "content": "Spring Data REST exposes a resource for individual collection items as sub-resources of the collection resource.\n\n[[repository-resources.item-resource.supported-methods]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "The Item Resource", "heading_level": 2, "file_order": 19, "section_index": 19, "content_hash": "2d7d9638f64025e25d2d9d182e14a7ea21ab4193c82db9f246c0c6bbee57a563", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:5e50262c6bb7a13cfd68b63b7cf66056a270a6ef9a80404df531121254346254", "content": "Item resources generally support `GET`, `PUT`, `PATCH`, and `DELETE`, unless explicit configuration prevents that (see \"`xref:repository-resources.adoc#repository-resources.association-resource[The Association Resource]`\" for details).\n\n[[repository-resources.item-resource.supported-methods.get]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Supported HTTP Methods", "heading_level": 3, "file_order": 19, "section_index": 20, "content_hash": "5e50262c6bb7a13cfd68b63b7cf66056a270a6ef9a80404df531121254346254", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:c6ef2a8246c85559a4591b51beae2496190b08214acd2da9022f1f599f02bab0", "content": "The `GET` method returns a single entity.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "GET", "heading_level": 4, "file_order": 19, "section_index": 21, "content_hash": "c6ef2a8246c85559a4591b51beae2496190b08214acd2da9022f1f599f02bab0", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:523632dbc0d3d096459a6e3da9e1c10c3072c769178b10a0fda5797d54dcebaf", "content": "The following methods are used if present (descending order):\n\n- `findById(…)`\n\nFor more information on the default exposure of methods, see xref:repository-resources.adoc#repository-resources.methods[Repository methods exposure].", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Methods used for invocation", "heading_level": 5, "file_order": 19, "section_index": 22, "content_hash": "523632dbc0d3d096459a6e3da9e1c10c3072c769178b10a0fda5797d54dcebaf", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:bfdb81117d2a0e6a442b559b9dcc4903b0ece071c184b62c5deff356468399ae", "content": "The `GET` method has only one custom status code:\n\n* `405 Method Not Allowed`: If the `findOne(…)` methods were not exported (through `@RestResource(exported = false)`) or are not present in the repository.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Custom Status Codes", "heading_level": 5, "file_order": 19, "section_index": 23, "content_hash": "bfdb81117d2a0e6a442b559b9dcc4903b0ece071c184b62c5deff356468399ae", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:f48191c46ef082ebae00a99b8baa1324ea4193f87e84905d4ecd0b3b015ee46e", "content": "The `GET` method supports the following media types:\n\n* application/hal+json\n* application/json", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Supported Media Types", "heading_level": 5, "file_order": 19, "section_index": 24, "content_hash": "f48191c46ef082ebae00a99b8baa1324ea4193f87e84905d4ecd0b3b015ee46e", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:d4dfb4720d080e401e91dca25c4ebb9d034eaecc0547cc29eadb6c8186bd4a70", "content": "For every association of the domain type, we expose links named after the association property. You can customize this behavior by using `@RestResource` on the property. The related resources are of the xref:repository-resources.adoc#repository-resources.association-resource[association resource] type.\n\n[[repository-resources.item-resource.supported-methods.head]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Related Resources", "heading_level": 5, "file_order": 19, "section_index": 25, "content_hash": "d4dfb4720d080e401e91dca25c4ebb9d034eaecc0547cc29eadb6c8186bd4a70", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:7c0fc485d0d0c08e2fa6092e08ca0e405ab0657c94ce01dea149bff165ecfae4", "content": "The `HEAD` method returns whether the item resource is available. It has no status codes, media types, or related resources.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "`HEAD`", "heading_level": 4, "file_order": 19, "section_index": 26, "content_hash": "7c0fc485d0d0c08e2fa6092e08ca0e405ab0657c94ce01dea149bff165ecfae4", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:0cc29279234b4f6b116a827a2a13af15df11adbc31e9c274a14b24c75004a6e2", "content": "The following methods are used if present (descending order):\n\n- `findById(…)`\n\nFor more information on the default exposure of methods, see xref:repository-resources.adoc#repository-resources.methods[Repository methods exposure].\n\n[[repository-resources.item-resource.supported-methods.put]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Methods used for invocation", "heading_level": 5, "file_order": 19, "section_index": 27, "content_hash": "0cc29279234b4f6b116a827a2a13af15df11adbc31e9c274a14b24c75004a6e2", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:4d3d44a76d76dc125b33f41b50669bc1d244b19df656acc4eefd8325b4124e7f", "content": "The `PUT` method replaces the state of the target resource with the supplied request body.\nBy default, whether the response contains a body is controlled by the `Accept` header sent with the request.\nIf the request header is present, a response body and a status code of `200 OK` is returned.\nIf no header is present, the response body is empty and a successful request returns a status of `204 No Content`.\nThis behavior can be overridden by configuring `RepositoryRestConfiguration.setReturnBodyOnUpdate(…)` accordingly.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "`PUT`", "heading_level": 4, "file_order": 19, "section_index": 28, "content_hash": "4d3d44a76d76dc125b33f41b50669bc1d244b19df656acc4eefd8325b4124e7f", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:b1607773a84b9345ecdcb9a36c8751222ed7daa7b87fe1cac7ba4667800b04ba", "content": "The following methods are used if present (descending order):\n\n- `save(…)`\n\nFor more information on the default exposure of methods, see xref:repository-resources.adoc#repository-resources.methods[Repository methods exposure].", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Methods used for invocation", "heading_level": 5, "file_order": 19, "section_index": 29, "content_hash": "b1607773a84b9345ecdcb9a36c8751222ed7daa7b87fe1cac7ba4667800b04ba", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:59c9a4b1caae5441c7a37dd8fa509c5e03f760da3f3791e73711f65b736e760a", "content": "The `PUT` method has only one custom status code:\n\n* `405 Method Not Allowed`: If the `save(…)` methods were not exported (through `@RestResource(exported = false)`) or is not present in the repository at all.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Custom Status Codes", "heading_level": 5, "file_order": 19, "section_index": 30, "content_hash": "59c9a4b1caae5441c7a37dd8fa509c5e03f760da3f3791e73711f65b736e760a", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:74c4e48b2b92edbdde8da2e35d316be74c4297cd2504ef8748bd8f3a305e779b", "content": "The `PUT` method supports the following media types:\n\n* application/hal+json\n* application/json\n\n[[repository-resources.item-resource.supported-methods-patch]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Supported Media Types", "heading_level": 5, "file_order": 19, "section_index": 31, "content_hash": "74c4e48b2b92edbdde8da2e35d316be74c4297cd2504ef8748bd8f3a305e779b", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:34bdf8d6e2474d96d9dc8d1cc31a3b11f4b335c6660e6312b5a32138ad2de6d2", "content": "The `PATCH` method is similar to the `PUT` method but partially updates the resources state.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "`PATCH`", "heading_level": 4, "file_order": 19, "section_index": 32, "content_hash": "34bdf8d6e2474d96d9dc8d1cc31a3b11f4b335c6660e6312b5a32138ad2de6d2", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:b1607773a84b9345ecdcb9a36c8751222ed7daa7b87fe1cac7ba4667800b04ba", "content": "The following methods are used if present (descending order):\n\n- `save(…)`\n\nFor more information on the default exposure of methods, see xref:repository-resources.adoc#repository-resources.methods[Repository methods exposure].", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Methods used for invocation", "heading_level": 5, "file_order": 19, "section_index": 33, "content_hash": "b1607773a84b9345ecdcb9a36c8751222ed7daa7b87fe1cac7ba4667800b04ba", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:d8afd88326790f92fc0b4506374efbb8d85bdc5eb34ae21cd3edb94075c58172", "content": "The `PATCH` method has only one custom status code:\n\n* `405 Method Not Allowed`: If the `save(…)` methods were not exported (through `@RestResource(exported = false)`) or are not present in the repository.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Custom Status Codes", "heading_level": 5, "file_order": 19, "section_index": 34, "content_hash": "d8afd88326790f92fc0b4506374efbb8d85bdc5eb34ae21cd3edb94075c58172", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:e2b50bbc99a96066c056e228bcde6effff1eb7e4ec8d6ac4fe59408b802f03bd", "content": "The `PATCH` method supports the following media types:\n\n* application/hal+json\n* application/json\n* https://tools.ietf.org/html/rfc6902[application/patch+json]\n* https://tools.ietf.org/html/rfc7386[application/merge-patch+json]\n\n[[repository-resources.item-resource.supported-methods.delete]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Supported Media Types", "heading_level": 5, "file_order": 19, "section_index": 35, "content_hash": "e2b50bbc99a96066c056e228bcde6effff1eb7e4ec8d6ac4fe59408b802f03bd", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:3b537a8e086492f587493c1a9a81f1df9e39d0081a5745c1cecdb669ad720fc1", "content": "The `DELETE` method deletes the resource exposed.\nBy default, whether the response contains a body is controlled by the `Accept` header sent with the request.\nIf the request header is present, a response body and a status code of `200 OK` is returned.\nIf no header is present, the response body is empty and a successful request returns a status of `204 No Content`.\nThis behavior can be overridden by configuring `RepositoryRestConfiguration.setReturnBodyOnDelete(…)` accordingly.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "`DELETE`", "heading_level": 4, "file_order": 19, "section_index": 36, "content_hash": "3b537a8e086492f587493c1a9a81f1df9e39d0081a5745c1cecdb669ad720fc1", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:34cfb99da29bb65f15e4d55a0f72f8bdc1274735ff227c7dd24907717cabc68e", "content": "The following methods are used if present (descending order):\n\n- `delete(T)`\n- `delete(ID)`\n- `delete(Iterable)`\n\nFor more information on the default exposure of methods, see xref:repository-resources.adoc#repository-resources.methods[Repository methods exposure].", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Methods used for invocation", "heading_level": 5, "file_order": 19, "section_index": 37, "content_hash": "34cfb99da29bb65f15e4d55a0f72f8bdc1274735ff227c7dd24907717cabc68e", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:3e9d71fac477c2e431635d0a26c5af651e626f20c07d5160428b683b39b81526", "content": "The `DELETE` method has only one custom status code:\n\n* `405 Method Not Allowed`: If the `delete(…)` methods were not exported (through `@RestResource(exported = false)`) or are not present in the repository.\n\n[[repository-resources.association-resource]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Custom Status Codes", "heading_level": 5, "file_order": 19, "section_index": 38, "content_hash": "3e9d71fac477c2e431635d0a26c5af651e626f20c07d5160428b683b39b81526", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:0734870fb453e5246baba67ba12a1acce9dccc2ee6ebcfe4f76c874cd48b4ef4", "content": "Spring Data REST exposes sub-resources of every item resource for each of the associations the item resource has. The name and path of the resource defaults to the name of the association property and can be customized by using `@RestResource` on the association property.\n\n[[repository-resources.association-resource.supported-methods]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "The Association Resource", "heading_level": 2, "file_order": 19, "section_index": 39, "content_hash": "0734870fb453e5246baba67ba12a1acce9dccc2ee6ebcfe4f76c874cd48b4ef4", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:644c2deae1b1f91ad817c2a008a6f0560c4ce42a35263eaa9991b990407d7878", "content": "The association resource supports the following media types:\n\n* GET\n* PUT\n* POST\n* DELETE\n\n[[repository-resources.association-resource.supported-methods.get]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Supported HTTP Methods", "heading_level": 3, "file_order": 19, "section_index": 40, "content_hash": "644c2deae1b1f91ad817c2a008a6f0560c4ce42a35263eaa9991b990407d7878", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:d8e4c84a074933a7ce91baf98ccf9bb2c12ad7997f1b65ed7b0339a30cef3673", "content": "The `GET` method returns the state of the association resource.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "`GET`", "heading_level": 4, "file_order": 19, "section_index": 41, "content_hash": "d8e4c84a074933a7ce91baf98ccf9bb2c12ad7997f1b65ed7b0339a30cef3673", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:fc0695c7a88eea56821421fe24612de74f92541aecb3c04989211768d4c831e7", "content": "The `GET` method supports the following media types:\n\n* application/hal+json\n* application/json\n\n[[repository-resources.association-resource.supported-methods.put]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Supported Media Types", "heading_level": 5, "file_order": 19, "section_index": 42, "content_hash": "fc0695c7a88eea56821421fe24612de74f92541aecb3c04989211768d4c831e7", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:6a108b0e7ad1c148f70b7b209f0e105637561e2cca71868b2fa1cdead1b6e24b", "content": "The `PUT` method binds the resource pointed to by the given URI(s) to the association resource (see Supported Media Types).", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "`PUT`", "heading_level": 4, "file_order": 19, "section_index": 43, "content_hash": "6a108b0e7ad1c148f70b7b209f0e105637561e2cca71868b2fa1cdead1b6e24b", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:5a32e1713a08c5fbaf6044ce3a8ba502562a5d931d29f4ecbf413fa874f2d96b", "content": "The `PUT` method has only one custom status code:\n\n* `400 Bad Request`: When multiple URIs were given for a to-one-association.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Custom Status Codes", "heading_level": 5, "file_order": 19, "section_index": 44, "content_hash": "5a32e1713a08c5fbaf6044ce3a8ba502562a5d931d29f4ecbf413fa874f2d96b", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:1ed3be77f4a2d39d5c12a98a2376e7ddfee0a9904dec49321266b0e2bc98fce5", "content": "The `PUT` method supports only one media type:\n\n* text/uri-list: URIs pointing to the resource to bind to the association.\n\n[[repository-resources.association-resource.supported-methods.post]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Supported Media Types", "heading_level": 5, "file_order": 19, "section_index": 45, "content_hash": "1ed3be77f4a2d39d5c12a98a2376e7ddfee0a9904dec49321266b0e2bc98fce5", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:7a6aa48f3a80bdc6ed7cd4dc46da6d184b59c17fbc40a89d92bd66234c36d746", "content": "The `POST` method is supported only for collection associations. It adds a new element to the collection.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "`POST`", "heading_level": 4, "file_order": 19, "section_index": 46, "content_hash": "7a6aa48f3a80bdc6ed7cd4dc46da6d184b59c17fbc40a89d92bd66234c36d746", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:71e2debb393e0c2a83f1b01f382534d3746ed5f43aa4a32b888c4b59269cb30d", "content": "The `POST` method supports only one media type:\n\n* text/uri-list: URIs pointing to the resource to add to the association.\n\n[[repository-resources.association-resource.supported-methods.delete]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Supported Media Types", "heading_level": 5, "file_order": 19, "section_index": 47, "content_hash": "71e2debb393e0c2a83f1b01f382534d3746ed5f43aa4a32b888c4b59269cb30d", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:50d68da71bfe35ea31ebdd3688fcda8fcf16176499bf47a6586f06bbe303dc29", "content": "The `DELETE` method unbinds the association.\n\n[[custom-status-codes]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "`DELETE`", "heading_level": 4, "file_order": 19, "section_index": 48, "content_hash": "50d68da71bfe35ea31ebdd3688fcda8fcf16176499bf47a6586f06bbe303dc29", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:2825cea7eead2e3f7dae2dcf47f6a2433cf6342611182ac086f3b85517614260", "content": "The `POST` method has only one custom status code:\n\n* `405 Method Not Allowed`: When the association is non-optional.\n\n[[repository-resources.search-resource]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Custom Status Codes", "heading_level": 5, "file_order": 19, "section_index": 49, "content_hash": "2825cea7eead2e3f7dae2dcf47f6a2433cf6342611182ac086f3b85517614260", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:663e9354d693c50b295d76827bacd3b885f8858eae034694657ce3b0017c5aaa", "content": "The search resource returns links for all query methods exposed by a repository. The path and name of the query method resources can be modified using `@RestResource` on the method declaration.\n\n[[repository-resources.search-resource.supported-methods]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "The Search Resource", "heading_level": 2, "file_order": 19, "section_index": 50, "content_hash": "663e9354d693c50b295d76827bacd3b885f8858eae034694657ce3b0017c5aaa", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:ab6269dcc5dfa4bc9607b249b773c3b638eff71e0d643c5bdfb7118fb51f0d02", "content": "As the search resource is a read-only resource, it supports only the `GET` method.\n\n[[repository-resources.search-resource.supported-methods.get]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Supported HTTP Methods", "heading_level": 3, "file_order": 19, "section_index": 51, "content_hash": "ab6269dcc5dfa4bc9607b249b773c3b638eff71e0d643c5bdfb7118fb51f0d02", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:a8c14d3f5b3ab05e533759b3ca7fe671b9ea1c88a239d6723db3aad22cb81ab8", "content": "The `GET` method returns a list of links pointing to the individual query method resources.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "`GET`", "heading_level": 4, "file_order": 19, "section_index": 52, "content_hash": "a8c14d3f5b3ab05e533759b3ca7fe671b9ea1c88a239d6723db3aad22cb81ab8", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:f48191c46ef082ebae00a99b8baa1324ea4193f87e84905d4ecd0b3b015ee46e", "content": "The `GET` method supports the following media types:\n\n* application/hal+json\n* application/json", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Supported Media Types", "heading_level": 5, "file_order": 19, "section_index": 53, "content_hash": "f48191c46ef082ebae00a99b8baa1324ea4193f87e84905d4ecd0b3b015ee46e", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:04457adec04c267e5333dd4f2e5f96046cee1bd6dab8b6378463c4e1c114114b", "content": "For every query method declared in the repository, we expose a xref:repository-resources.adoc#repository-resources.query-method-resource[query method resource]. If the resource supports pagination, the URI pointing to it is a URI template containing the pagination parameters.\n\n[[repository-resources.search-resource.supported-methods.head]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Related Resources", "heading_level": 5, "file_order": 19, "section_index": 54, "content_hash": "04457adec04c267e5333dd4f2e5f96046cee1bd6dab8b6378463c4e1c114114b", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:52f1518c213039272727399db2a3a28557966094426e4fa7144c44ec25f33c87", "content": "The `HEAD` method returns whether the search resource is available. A 404 return code indicates no query method resources are available.\n\n[[repository-resources.query-method-resource]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "`HEAD`", "heading_level": 4, "file_order": 19, "section_index": 55, "content_hash": "52f1518c213039272727399db2a3a28557966094426e4fa7144c44ec25f33c87", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:7f7763b1748cbe25797310b298e4ac6a831f7aaf542a7ee27c9fd221fd543566", "content": "The query method resource runs the exposed query through an individual query method on the repository interface.\n\n[[repository-resources.query-resource.supported-method]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "The Query Method Resource", "heading_level": 2, "file_order": 19, "section_index": 56, "content_hash": "7f7763b1748cbe25797310b298e4ac6a831f7aaf542a7ee27c9fd221fd543566", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:e8b331429560df8dea255e4dc04d0fc97b2a19ee646e6e544e44b0ddf8fe2067", "content": "As the query method resource is a read-only resource, it supports `GET` only.\n\n[[repository-resources.query-resource.supported-method.get]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Supported HTTP Methods", "heading_level": 3, "file_order": 19, "section_index": 57, "content_hash": "e8b331429560df8dea255e4dc04d0fc97b2a19ee646e6e544e44b0ddf8fe2067", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:162a6f620037c6e6ab1389e31982988685adc679d343a6f49e37d7f3876f3a7e", "content": "The `GET` method returns the result of the query.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "`GET`", "heading_level": 4, "file_order": 19, "section_index": 58, "content_hash": "162a6f620037c6e6ab1389e31982988685adc679d343a6f49e37d7f3876f3a7e", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:a0f9001dbffca295fa3592f3b07460b214fdd7cf3c82da92f795a5587eb0742c", "content": "If the query method has pagination capabilities (indicated in the URI template pointing to the resource) the resource takes the following parameters:\n\n* `page`: The page number to access (0 indexed, defaults to 0).\n* `size`: The page size requested (defaults to 20).\n* `sort`: A collection of sort directives in the format `($propertyname,)+[asc|desc]`?.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Parameters", "heading_level": 5, "file_order": 19, "section_index": 59, "content_hash": "a0f9001dbffca295fa3592f3b07460b214fdd7cf3c82da92f795a5587eb0742c", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:b1d5b0cf4708275c940cdf8e87c8634c6db056dfc17320cc507c0e55b04c92c9", "content": "The `GET` method supports the following media types:\n\n* `application/hal+json`\n* `application/json`\n\n[[repository-resources.query-resource.supported-method.head]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "Supported Media Types", "heading_level": 5, "file_order": 19, "section_index": 60, "content_hash": "b1d5b0cf4708275c940cdf8e87c8634c6db056dfc17320cc507c0e55b04c92c9", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:dfbbf02435f28071e04fc49900f0eed1b2a26e47c1b2e59d75f75ee0d5fe06ce", "content": "The `HEAD` method returns whether a query method resource is available.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/repository-resources.adoc", "title": "repository-resources", "heading": "`HEAD`", "heading_level": 4, "file_order": 19, "section_index": 61, "content_hash": "dfbbf02435f28071e04fc49900f0eed1b2a26e47c1b2e59d75f75ee0d5fe06ce", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/repository-resources.adoc"}}
{"id": "sha256:2a1101c2475c519470f8fce7bc749c96fecac077026dadd8f2c28a916c42d772", "content": "[[representations]]\n\nSpring Data REST returns a representation of a domain object that corresponds to the `Accept` type specified in the HTTP request.\n\nCurrently, only JSON representations are supported. Other representation types can be supported in the future by adding an appropriate converter and updating the controller methods with the appropriate content-type.\n\nSometimes, the behavior of the Spring Data REST `ObjectMapper` (which has been specially configured to use intelligent serializers that can turn domain objects into links and back again) may not handle your domain model correctly. There are so many ways you can structure your data that you may find your own domain model is not translated to JSON correctly. It is also sometimes not practical in these cases to try and support a complex domain model in a generic way. Sometimes, depending on the complexity, it is not even possible to offer a generic solution.\n\n[[representations.serializers-and-deserializers]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/representations.adoc", "title": "representations", "heading": "representations", "heading_level": 1, "file_order": 20, "section_index": 0, "content_hash": "2a1101c2475c519470f8fce7bc749c96fecac077026dadd8f2c28a916c42d772", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/representations.adoc"}}
{"id": "sha256:94cec4340b69b2a8846235549996d18378935febf9c5f2b1e1cb25c811e16df8", "content": "To accommodate the largest percentage of use cases, Spring Data REST tries very hard to render your object graph correctly. It tries to serialize unmanaged beans as normal POJOs, and it tries to create links to managed beans where necessary. However, if your domain model does not easily lend itself to reading or writing plain JSON, you may want to configure Jackson's ObjectMapper with your own custom mappings, serializers, and deserializers.\n\n[[representations.serializers-and-deserializers.abstract-classes]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/representations.adoc", "title": "representations", "heading": "Adding Custom Serializers and Deserializers to Jackson's ObjectMapper", "heading_level": 2, "file_order": 20, "section_index": 1, "content_hash": "94cec4340b69b2a8846235549996d18378935febf9c5f2b1e1cb25c811e16df8", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/representations.adoc"}}
{"id": "sha256:6f090e92bdf34eefde085881f9d6891c82f5819e496da9a4daed5e344f8b5968", "content": "One key configuration point you might need to hook into is when you use an abstract class (or an interface) in your domain model. By default, Jackson does not know what implementation to create for an interface. Consider the following example:\n\n====\n[source,java]\n----\n@Entity\npublic class MyEntity {\n @OneToMany\n private List<MyInterface> interfaces;\n}\n----\n====\n\nIn a default configuration, Jackson has no idea what class to instantiate when POSTing new data to the exporter. This is something you need to tell Jackson either through an annotation, or (more cleanly) by registering a type mapping by using a `Module`.\n\nTo add your own Jackson configuration to the `ObjectMapper` used by Spring Data REST, override the `configureJacksonObjectMapper` method.\nThat method is passed an `MapperBuilder` instance that has a special module to handle serializing and deserializing `PersistentEntity` objects.\nYou can register your own modules as well, as the following example shows:\n\n====\n[source,java]\n----\n@Override\npublic void configureJacksonObjectMapper(MapperBuilder<? extends ObjectMapper, ? extends MapperBuilder<?, ?>> mapperBuilder) {\n\n mapperBuilder.addModule(new SimpleModule(\"MyCustomModule\") {\n\n @Override\n public void setupModule(SetupContext context) {\n context.addAbstractTypeResolver(\n new SimpleAbstractTypeResolver()\n .addMapping(MyInterface.class, MyInterfaceImpl.class));\n }\n });\n}\n----\n====\n\nOnce you have access to the `SetupContext` object in your `Module`, you can do all sorts of cool things to configure Jackson's JSON mapping.\nYou can read more about how `Module` instances work on https://github.com/FasterXML/jackson-databind/wiki/JacksonFeatures[Jackson's wiki].\n\n[[representations.serializers-and-deserializers.serializers]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/representations.adoc", "title": "representations", "heading": "Abstract Class Registration", "heading_level": 3, "file_order": 20, "section_index": 2, "content_hash": "6f090e92bdf34eefde085881f9d6891c82f5819e496da9a4daed5e344f8b5968", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/representations.adoc"}}
{"id": "sha256:3ff7d812dbbdf4db80fb95b17be3d606b8b810b6a7aa6844ae48f5710a4c3903", "content": "If you want to serialize or deserialize a domain type in a special way, you can register your own implementations with Jackson's `ObjectMapper`, and the Spring Data REST exporter transparently handles those domain objects correctly. To add serializers from your `setupModule` method implementation, you can do something like the following:\n\n====\n[source,java]\n----\n@Override\npublic void setupModule(SetupContext context) {\n\n SimpleSerializers serializers = new SimpleSerializers();\n SimpleDeserializers deserializers = new SimpleDeserializers();\n\n serializers.addSerializer(MyEntity.class, new MyEntitySerializer());\n deserializers.addDeserializer(MyEntity.class, new MyEntityDeserializer());\n\n context.addSerializers(serializers);\n context.addDeserializers(deserializers);\n}\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/representations.adoc", "title": "representations", "heading": "Adding Custom Serializers for Domain Types", "heading_level": 3, "file_order": 20, "section_index": 3, "content_hash": "3ff7d812dbbdf4db80fb95b17be3d606b8b810b6a7aa6844ae48f5710a4c3903", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/representations.adoc"}}
{"id": "sha256:b34c83758fd630285e46658725d1a16499247389d898b728d63f1a979137f6f8", "content": "[[security]]\n\nSpring Data REST works quite well with Spring Security. This section shows examples of how to secure your Spring Data REST services with method-level security.\n\n[[security.pre-and-post]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/security.adoc", "title": "security", "heading": "security", "heading_level": 1, "file_order": 21, "section_index": 0, "content_hash": "b34c83758fd630285e46658725d1a16499247389d898b728d63f1a979137f6f8", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/security.adoc"}}
{"id": "sha256:2e2b56e2a14d55874559089445db7706c7d1d4a603dd0c9d48cc5ebbdb90423a", "content": "The following example from Spring Data REST's test suite shows Spring Security's {spring-security-docs}/servlet/authorization/expression-based.html#_access_control_using_preauthorize_and_postauthorize[PreAuthorization model] (the most sophisticated security model):\n\n.spring-data-rest-tests/spring-data-rest-tests-security/src/test/java/org/springframework/data/rest/tests/security/PreAuthorizedOrderRepository.java\n====\n[source,java]\n----\n\n/*\n * Copyright 2013-present the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage org.springframework.data.rest.tests.security;\n\nimport java.util.Optional;\nimport java.util.UUID;\n\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.security.access.prepost.PreAuthorize;\n\n/**\n * @author Oliver Gierke\n * @author Greg Turnquist\n */\n// tag::code[]\n@PreAuthorize(\"hasRole('ROLE_USER')\") // <1>\npublic interface PreAuthorizedOrderRepository extends CrudRepository<Order, UUID> {\n\n\t@PreAuthorize(\"hasRole('ROLE_ADMIN')\")\n\t@Override\n\tOptional<Order> findById(UUID id);\n\n\t@PreAuthorize(\"hasRole('ROLE_ADMIN')\") // <2>\n\t@Override\n\tvoid deleteById(UUID aLong);\n\n\t@PreAuthorize(\"hasRole('ROLE_ADMIN')\")\n\t@Override\n\tvoid delete(Order order);\n\n\t@PreAuthorize(\"hasRole('ROLE_ADMIN')\")\n\t@Override\n\tvoid deleteAll(Iterable<? extends Order> orders);\n\n\t@PreAuthorize(\"hasRole('ROLE_ADMIN')\")\n\t@Override\n\tvoid deleteAll();\n}\n// end::code[]\n----\n\n<1> This Spring Security annotation secures the entire repository. The {spring-security-docs}/servlet/authorization/expression-based.html[Spring Security SpEL expression] indicates that the principal must have `ROLE_USER` in its collection of roles.\n<2> To change method-level settings, you must override the method signature and apply a Spring Security annotation. In this case, the method overrides the repository-level settings with the requirement that the user have `ROLE_ADMIN` to perform a delete.\n====\n\nThe preceding example shows a standard Spring Data repository definition extending `CrudRepository` with some key changes: the specification of particular roles to access the various methods:\n\nIMPORTANT: Repository and method level security settings do not combine. Instead, method-level settings override repository level settings.\n\nThe previous example illustrates that `CrudRepository`, in fact, has four delete methods. You must override all delete methods to properly secure it.\n\n[[security.secured]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/security.adoc", "title": "security", "heading": "`@Pre` and `@Post` Security", "heading_level": 2, "file_order": 21, "section_index": 1, "content_hash": "2e2b56e2a14d55874559089445db7706c7d1d4a603dd0c9d48cc5ebbdb90423a", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/security.adoc"}}
{"id": "sha256:9d288f36af101ab6c2b525fd4fb3390dbc934ca70c89ec2867883fa36a15ce5f", "content": "The following example shows Spring Security's older `@Secured` annotation, which is purely role-based:\n\n.spring-data-rest-tests/spring-data-rest-tests-security/src/test/java/org/springframework/data/rest/tests/security/SecuredPersonRepository.java\n\n====\n[source,java]\n----\n/*\n * Copyright 2014-present the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage org.springframework.data.rest.tests.security;\n\nimport java.util.UUID;\n\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.data.rest.core.annotation.RepositoryRestResource;\nimport org.springframework.security.access.annotation.Secured;\n\n// tag::code[]\n@Secured(\"ROLE_USER\") // <1>\n@RepositoryRestResource(collectionResourceRel = \"people\", path = \"people\")\npublic interface SecuredPersonRepository extends CrudRepository<Person, UUID> {\n\n\t@Secured(\"ROLE_ADMIN\") // <2>\n\t@Override\n\tvoid deleteById(UUID aLong);\n\n\t@Secured(\"ROLE_ADMIN\")\n\t@Override\n\tvoid delete(Person person);\n\n\t@Secured(\"ROLE_ADMIN\")\n\t@Override\n\tvoid deleteAll(Iterable<? extends Person> persons);\n\n\t@Secured(\"ROLE_ADMIN\")\n\t@Override\n\tvoid deleteAll();\n}\n// end::code[]\n----\n\n<1> This results in the same security check as the previous example but has less flexibility. It allows only roles as the means to restrict access.\n<2> Again, this shows that delete methods require `ROLE_ADMIN`.\n====\n\nNOTE: If you start with a new project or first apply Spring Security, `@PreAuthorize` is the recommended solution. If are already using Spring Security with `@Secured` in other parts of your app, you can continue on that path without rewriting everything.\n\n[[security.enable-method-level]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/security.adoc", "title": "security", "heading": "@Secured security", "heading_level": 2, "file_order": 21, "section_index": 2, "content_hash": "9d288f36af101ab6c2b525fd4fb3390dbc934ca70c89ec2867883fa36a15ce5f", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/security.adoc"}}
{"id": "sha256:5c6d19896999e341000fbc70425f17d29021906e956208ed738aaa291f1e14dc", "content": "To configure method-level security, here is a brief snippet from Spring Data REST's test suite:\n\n.spring-data-rest-tests/spring-data-rest-tests-security/src/test/java/org/springframework/data/rest/tests/security/SecurityConfiguration.java\n====\n[source,java]\n----\n/*\n * Copyright 2014-present the original author or authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\npackage org.springframework.data.rest.tests.security;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.http.HttpMethod;\nimport org.springframework.security.config.Customizer;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.web.SecurityFilterChain;\n\n// tag::code[]\n@Configuration // <1>\n@EnableWebSecurity\n@EnableMethodSecurity(securedEnabled = true, prePostEnabled = true) // <2>\nclass SecurityConfiguration { // <3>\n\t// end::code[]\n\t@Autowired\n\tvoid configureAuth(AuthenticationManagerBuilder auth) throws Exception {\n\n\t\tauth.inMemoryAuthentication()\n\t\t\t\t.withUser(\"user\").password(\"user\").roles(\"USER\").and()\n\t\t\t\t.withUser(\"admin\").password(\"admin\").roles(\"USER\", \"ADMIN\");\n\t}\n\n\t@Bean\n\tSecurityFilterChain filterChain(HttpSecurity security) throws Exception {\n\n\t\treturn security\n\t\t\t\t.authorizeHttpRequests(it -> it.requestMatchers(HttpMethod.GET, \"/\")\n\t\t\t\t\t\t.permitAll().anyRequest().authenticated())\n\t\t\t\t.csrf(it -> it.disable())\n\t\t\t\t.httpBasic(Customizer.withDefaults())\n\t\t\t\t.build();\n\t}\n}\n\t...\n}\n----\n\n<1> This is a Spring configuration class.\n<2> It uses Spring Security's `@EnableGlobalMethodSecurity` annotation to enable both `@Secured` and `@Pre`/`@Post` support. NOTE: You don't have to use both. This particular case is used to prove both versions work with Spring Data REST.\n<3> This class extends Spring Security's `WebSecurityConfigurerAdapter` which is used for pure Java configuration of security.\n====\n\nThe rest of the configuration class is not listed, because it follows {spring-security-docs}/servlet/configuration/java.html[standard practices] that you can read about in the Spring Security reference docs.", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/security.adoc", "title": "security", "heading": "Enabling Method-level Security", "heading_level": 2, "file_order": 21, "section_index": 3, "content_hash": "5c6d19896999e341000fbc70425f17d29021906e956208ed738aaa291f1e14dc", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/security.adoc"}}
{"id": "sha256:7e19a30f83daa938a48751b16c3c50c3c7f86fc299cb48965c8ecbf353313a8d", "content": "[[tools]]\n\n[[tools.hal-explorer]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/tools.adoc", "title": "tools", "heading": "tools", "heading_level": 1, "file_order": 22, "section_index": 0, "content_hash": "7e19a30f83daa938a48751b16c3c50c3c7f86fc299cb48965c8ecbf353313a8d", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/tools.adoc"}}
{"id": "sha256:abed77f79c5445fbeb3640782ef3b1387ebe93447ed55e3861e8978b887949cc", "content": "Kai Tödter has created a useful application: HAL Explorer (https://github.com/toedter/hal-explorer[Git Repo], https://toedter.github.io/hal-explorer/release/reference-doc/[Reference Doc], https://toedter.github.io/hal-explorer/release/hal-explorer/#theme=Cosmo&uri=examples/examples.hal-forms.json[Demo]). It is an Angular based web application that lets you easily explore HAL and HAL-FORMS based HTTP responses. It also supports Spring profiles generated by Spring Data REST. You can point it at any Spring Data REST API and use it to navigate the app and create new resources.\n\nInstead of pulling down the files, embedding them in your application, and crafting a Spring MVC controller to serve them up, all you need to do is add a single dependency.\n\nThe following listing shows how to add the dependency in Maven:\n\n====\n[source,xml]\n----\n<dependencies>\n <dependency>\n <groupId>org.springframework.data</groupId>\n <artifactId>spring-data-rest-hal-explorer</artifactId>\n </dependency>\n</dependencies>\n----\n====\n\nThe following listing shows how to add the dependency in Gradle:\n\n====\n[source,groovy]\n----\ndependencies {\n implementation 'org.springframework.data:spring-data-rest-hal-explorer'\n}\n----\n====\n\nNOTE: If you use Spring Boot or the Spring Data BOM (bill of materials), you do not need to specify the version.\n\nThis dependency auto-configures the HAL Explorer to be served up when you visit your application's root URI in a browser. (NOTE: http://localhost:8080/api was plugged into the browser, and it redirected to the URL shown in the following image.)\n\nimage::hal-explorer-1.png[]\n\nThe preceding screenshot shows the root path of the API. On the right side are details from the response, including headers, and the body (a HAL document).\n\nThe HAL Explorer reads the links from the response and puts them in a list on the left side. You can either click on the green *GET* button and navigate to one of the collections, or click on the other buttons to make changes (POST, PUT, PATCH) or delete resources.\n\nThe HAL Explorer understands *URI Templates*. Whenever a link contains a URI template, a modal dialog pops up where you can enter the template parameters.\n\nimage::hal-explorer-3.png[]\n\nIf you click *Go!* without entering anything, the variables are essentially ignored. For situations like xref:projections-excerpts.adoc[Projections and Excerpts] or xref:paging-and-sorting.adoc[Paging and Sorting], this can be useful.\n\nWhen you click on a *NON-GET* button with a `+` or a `>` sign on it, a modal dialog appears. It shows the HTTP method belonging to the clicked button. You can fill the body and submit the new JSON document.\n\nBelow the URI and HTTP method are the fields. These are automatically supplied, depending on the metadata of the resources, which was automatically generated by Spring Data REST. If you update your domain objects, the pop-up reflects it, as the following image shows:\n\nimage::hal-explorer-2.png[]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/tools.adoc", "title": "tools", "heading": "The HAL Explorer", "heading_level": 2, "file_order": 22, "section_index": 1, "content_hash": "abed77f79c5445fbeb3640782ef3b1387ebe93447ed55e3861e8978b887949cc", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/tools.adoc"}}
{"id": "sha256:31e79fdb065f6391d695d691a7823bd8c0fd56cb761fddf2765d12fc789a5696", "content": "[[validation]]\n\nThere are two ways to register a `Validator` instance in Spring Data REST: wire it by bean name or register the validator manually. For the majority of cases, the simple bean name prefix style is sufficient.\n\nIn order to tell Spring Data REST you want a particular `Validator` assigned to a particular event, prefix the bean name with the event in question. For example, to validate instances of the `Person` class before new ones are saved into the repository, you would declare an instance of a `Validator<Person>` in your `ApplicationContext` with a bean name of `beforeCreatePersonValidator`. Since the `beforeCreate` prefix matches a known Spring Data REST event, that validator is wired to the correct event.\n\n[[validation.assigning-validators]]", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/validation.adoc", "title": "validation", "heading": "validation", "heading_level": 1, "file_order": 23, "section_index": 0, "content_hash": "31e79fdb065f6391d695d691a7823bd8c0fd56cb761fddf2765d12fc789a5696", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/validation.adoc"}}
{"id": "sha256:14e0fcea42df8d33a11e4e3349baff39c9c0fcdccf5e6a5b90eedc3f607da9c4", "content": "If you would rather not use the bean name prefix approach, you need to register an instance of your validator with the bean whose job it is to invoke validators after the correct event. In your configuration that implements `RepositoryRestConfigurer`, override the `configureValidatingRepositoryEventListener` method and call `addValidator` on the `ValidatingRepositoryEventListener`, passing the event on which you want this validator to be triggered and an instance of the validator. The following example shows how to do so:\n\n====\n[source,java]\n----\n@Override\nvoid configureValidatingRepositoryEventListener(ValidatingRepositoryEventListener v) {\n v.addValidator(\"beforeSave\", new BeforeSaveValidator());\n}\n----\n====", "metadata": {"source_type": "repo_asciidoc", "project": "spring-data-rest", "path": "antora/modules/ROOT/pages/validation.adoc", "title": "validation", "heading": "Assigning Validators Manually", "heading_level": 2, "file_order": 23, "section_index": 1, "content_hash": "14e0fcea42df8d33a11e4e3349baff39c9c0fcdccf5e6a5b90eedc3f607da9c4", "source_url": "https://github.com/spring-projects/spring-data-rest/blob/6144a2cee2478f5c1fd98008b0d2984564aab77c/src/main/antora/modules/ROOT/pages/validation.adoc"}}
